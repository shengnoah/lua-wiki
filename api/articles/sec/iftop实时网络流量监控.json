{"title":"iftop实时网络流量监控","uid":"41fa6af3e01b56174bad9d28a8d1d3a0","slug":"sec/iftop实时网络流量监控","date":"2024-03-14T07:45:09.060Z","updated":"2024-03-14T07:45:09.060Z","comments":true,"path":"api/articles/sec/iftop实时网络流量监控.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":[],"content":"<h1>iftop实时网络流量监控</h1>\n<h2 id=\"一、iftop-有什么作用\">一、iftop 有什么作用</h2>\n<p>iftop 是类似于 top 的实时流量监控工具，主要用来显示本机网络流量情况以及各个相互通信的流量集合，可以用来监控网卡的实时流量。</p>\n<h2 id=\"二、安装-iftop\">二、安装 iftop</h2>\n<h3 id=\"①、编译安装\">①、编译安装</h3>\n<p>安装所需要依赖包</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@docker ~]# yum install -y gcc flex byacc libpcap ncurses ncurses-devel libpcap-devel tcpdump</span><br></pre></td></tr></table></figure>\n<p>下载工具包：</p>\n<p>[root@localhost data]# wget <a href=\"https://link.zhihu.com/?target=http%3A//testingpai.com/forward%3Fgoto%3Dhttp%253A%252F%252Fwww.ex-parrot.com%252Fpdw%252Fiftop%252Fdownload%252Fiftop-1.0pre4.tar.gz\">http://www.ex-parrot.com/pdw/iftop/download/iftop-1.0pre4.tar.gz</a></p>\n<p>解压：</p>\n<p>[root@localhost data]# tar -zxvf iftop-1.0pre4.tar.gz</p>\n<p>安装</p>\n<p>[root@docker iftop-1.0pre4]# ./configure --prefix=/usr/local/iftop</p>\n<p>[root@docker iftop-1.0pre4]# make &amp;&amp; make install</p>\n<h3 id=\"②、或者直接-yum-命令安装：\">②、或者直接 yum 命令安装：</h3>\n<p>[root@localhost ~]# yum install iftop -y</p>\n<h2 id=\"三、运行-iftop-命令\">三、运行 iftop 命令</h2>\n<p>[root@localhost data]# iftop</p>\n<p><img src=\"https://pic4.zhimg.com/80/v2-5452e9fef26b2b198964d7c31ed78d8b_1440w.webp\" alt=\"\"></p>\n<p>从输出的界面中，主要分为是三大部分：</p>\n<p>第一部分：输出最上面的一行，显示网卡带宽流量</p>\n<p>第二部分：分为左中右三列，左列和中列记录了哪些 IP 或主机正在连接本机的网络</p>\n<p>中列的 =&gt; 代表发送数据</p>\n<p>&lt;= 代表接收数据</p>\n<p>通过这些指示箭头可以很清晰的知道两个 IP 之间的通信情况</p>\n<p>最右列的三个小列：</p>\n<p>分别表示外部 IP 连接到本机 2s，10s 和 40s 的平均流量</p>\n<p>还有一个流量图形条，可以很快的看出那个 IP 的流量最大</p>\n<p><img src=\"https://pic1.zhimg.com/80/v2-3d0293554556e4ae6b50bd391bb5710c_1440w.webp\" alt=\"\"></p>\n<p>第三部分：iftop 输出的最下面，分为三行</p>\n<p>TX：发送的数据</p>\n<p>RX：接收的数据</p>\n<p>TOTAL：发送和接收的全部数据</p>\n<p>对应的三列：</p>\n<p>cum：从运行 iftop 到目前的发送，接收和总数据流量</p>\n<p>peak：发送，接收以及总的流量峰值</p>\n<p>rates：过去 2s，10s，40s 的平均流量值</p>\n<h2 id=\"四、iftop-相关参数\">四、iftop 相关参数</h2>\n<p>[root@localhost ~]# iftop -h</p>\n<p>参数 含义</p>\n<p>-i 指定需要检测的网卡</p>\n<p>[root@localhost ~]# iftop -i ens33</p>\n<p><img src=\"https://pic2.zhimg.com/80/v2-051f1b8eb9a7d71bed362d15634d174d_1440w.webp\" alt=\"\"></p>\n<p>-n 将输出的主机信息都通过 IP 显示，不进行 DNS 解析</p>\n<p>-B 将输出以 byte 为单位显示网卡流量，默认是 bit</p>\n<p>-p 以混杂模式运行 iftop，此时 iftop 可以用作网络嗅探器</p>\n<p>-N 只显示连接端口号，不显示端口对应的服务名称</p>\n<p>-P 显示主机以及端口信息</p>\n<p>-F 显示特定网段的网卡进出流量 如 iftop -F 192.168.85.0/24</p>\n<p>-m 设置输出界面中最上面的流量刻度最大值，流量刻度分 5 个大段显示 如 iftop -m limit</p>\n<p>-f 使用筛选码选择数据包来计数 如 iftop -f filter code</p>\n<p>-b 不显示流量图形条</p>\n<p>-c 指定可选的配置文件 如 iftop -c config file</p>\n<p>-t 使用不带 ncurses 的文本界面，</p>\n<p>如下两个是只和-t 一起用的：</p>\n<p>-s num num 秒后打印一次文本输出然后退出</p>\n<p>-L num 打印的行数</p>\n<h2 id=\"五、进入-iftop-画面后的一些操作命令-注意大小写\">五、进入 iftop 画面后的一些操作命令(注意大小写)</h2>\n<p>按 h 切换是否显示帮助;</p>\n<p>按 n 切换显示本机的 IP 或主机名;</p>\n<p>按 s 切换是否显示本机的 host 信息;</p>\n<p>按 d 切换是否显示远端目标主机的 host 信息;</p>\n<p>按 t 切换显示格式为 2 行/1 行/只显示发送流量/只显示接收流量;</p>\n<p>按 N 切换显示端口号或端口服务名称;</p>\n<p>按 S 切换是否显示本机的端口信息;</p>\n<p>按 D 切换是否显示远端目标主机的端口信息;</p>\n<p>按 p 切换是否显示端口信息;</p>\n<p>按 P 切换暂停/继续显示;</p>\n<p>按 b 切换是否显示平均流量图形条;</p>\n<p>按 B 切换计算 2 秒或 10 秒或 40 秒内的平均流量;</p>\n<p>按 T 切换是否显示每个连接的总流量;</p>\n<p>按 l 打开屏幕过滤功能，输入要过滤的字符，比如 ip，按回车后，屏幕就只显示这个 IP 相关的流量信息;</p>\n<p>按 L 切换显示画面上边的刻度;刻度不同，流量图形条会有变化;</p>\n<p>按 j 或按 k 可以向上或向下滚动屏幕显示的连接记录;</p>\n<p>按 1 或 2 或 3 可以根据右侧显示的三列流量数据进行排序;</p>\n<p>按 &lt; 根据左边的本机名或 IP 排序;</p>\n<p>按 &gt; 根据远端目标主机的主机名或 IP 排序;</p>\n<p>按 o 切换是否固定只显示当前的连接;</p>\n<p>按 f 可以编辑过滤代码，这是翻译过来的说法，我还没用过这个！</p>\n<p>按！可以使用 shell 命令，这个没用过！没搞明白啥命令在这好用呢！</p>\n<p>按 q 退出监控。</p>\n<h2 id=\"六、使用案例\">六、使用案例</h2>\n<ol>\n<li class=\"lvl-3\">\n<p>使用 iftop 工具查出来是哪些 IP 地址在</p>\n</li>\n<li class=\"lvl-3\">\n<p>请求主机的带宽资源</p>\n</li>\n</ol>\n<p><img src=\"https://pic3.zhimg.com/80/v2-531e7bb7f67395cbd44e11453a4d93aa_720w.webp\" alt=\"\"></p>\n<p>可以看到 148 到 147 的流量，以及返回的流量都不是很大，都只有 6 兆，7 兆左右，流量占用整个带宽都很小</p>\n","text":"iftop实时网络流量监控 一、iftop 有什么作用 iftop 是类似于 top 的实时流量监控工具，主要用来显示本机网络流量情况以及各个相互通信的流量集合，可以用来监控网卡的实时流量。 二、安装 iftop ①、编译安装 安装所需要依赖包 1[root@docker ~]#...","link":"","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"安全","slug":"安全","count":37,"path":"api/categories/安全.json"}],"tags":[{"name":"iftop","slug":"iftop","count":2,"path":"api/tags/iftop.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\"><span class=\"toc-text\">iftop实时网络流量监控</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81iftop-%E6%9C%89%E4%BB%80%E4%B9%88%E4%BD%9C%E7%94%A8\"><span class=\"toc-text\">一、iftop 有什么作用</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85-iftop\"><span class=\"toc-text\">二、安装 iftop</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E2%91%A0%E3%80%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">①、编译安装</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E2%91%A1%E3%80%81%E6%88%96%E8%80%85%E7%9B%B4%E6%8E%A5-yum-%E5%91%BD%E4%BB%A4%E5%AE%89%E8%A3%85%EF%BC%9A\"><span class=\"toc-text\">②、或者直接 yum 命令安装：</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E8%BF%90%E8%A1%8C-iftop-%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">三、运行 iftop 命令</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E3%80%81iftop-%E7%9B%B8%E5%85%B3%E5%8F%82%E6%95%B0\"><span class=\"toc-text\">四、iftop 相关参数</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%94%E3%80%81%E8%BF%9B%E5%85%A5-iftop-%E7%94%BB%E9%9D%A2%E5%90%8E%E7%9A%84%E4%B8%80%E4%BA%9B%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4-%E6%B3%A8%E6%84%8F%E5%A4%A7%E5%B0%8F%E5%86%99\"><span class=\"toc-text\">五、进入 iftop 画面后的一些操作命令(注意大小写)</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%AD%E3%80%81%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B\"><span class=\"toc-text\">六、使用案例</span></a></li></ol></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"免费提高英语写作水平工writeandimprove","uid":"0f26909b5eeb369b2b2ef4e39832b7d6","slug":"website/免费提高英语写作水平工writeandimprove","date":"2024-03-14T07:45:09.061Z","updated":"2024-03-14T07:45:09.061Z","comments":true,"path":"api/articles/website/免费提高英语写作水平工writeandimprove.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"免费提高英语写作水平工writeandimprove 一款由剑桥大学开发的免费提高英语写作水平工具，无需注册。 供英语学习者练习他们的书面英语，提交写作结果几秒钟后将获得与国际标准CEFR相关联的结果，自动反馈你的写作可能需要改进的地方，支持初学者、中级和高级等不同英语写作水平的...","link":"","photos":[],"count_time":{"symbolsCount":218,"symbolsTime":"1 mins."},"categories":[{"name":"english","slug":"english","count":1,"path":"api/categories/english.json"}],"tags":[{"name":"english","slug":"english","count":2,"path":"api/tags/english.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"如何选择正确的恶意软件分类方案来提高事件响应","uid":"f5a3a00a7babb83c4a9dce249f61ff2c","slug":"sec/IOC/如何选择正确的恶意软件分类方案来提高事件响应","date":"2024-03-14T07:45:09.060Z","updated":"2024-03-14T07:45:09.060Z","comments":true,"path":"api/articles/sec/IOC/如何选择正确的恶意软件分类方案来提高事件响应.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"如何选择正确的恶意软件分类方案来提高事件响应 恶意软件感染是计算机安全中最常见的威胁之一。根据“2017年ENISA威胁环境报告”，一些防病毒供应商每天检测到400多万个恶意软件样本，仅2017年一季度就检测到7亿多个样本。 这些惊人的数字强调了建立恶意软件事件响应计划的重要性。...","link":"","photos":[],"count_time":{"symbolsCount":"3.2k","symbolsTime":"3 mins."},"categories":[{"name":"安全","slug":"安全","count":37,"path":"api/categories/安全.json"}],"tags":[{"name":"安全运营","slug":"安全运营","count":4,"path":"api/tags/安全运营.json"},{"name":"soc","slug":"soc","count":2,"path":"api/tags/soc.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}