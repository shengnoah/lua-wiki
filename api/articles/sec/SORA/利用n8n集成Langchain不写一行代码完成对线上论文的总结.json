{"title":"利用n8n集成Langchain不写一行代码完成对线上论文的总结","uid":"d8098627bfad2b6bf22c2e7b5e0d7afd","slug":"sec/SORA/利用n8n集成Langchain不写一行代码完成对线上论文的总结","date":"2024-03-18T10:55:35.743Z","updated":"2024-03-18T10:58:15.224Z","comments":true,"path":"api/articles/sec/SORA/利用n8n集成Langchain不写一行代码完成对线上论文的总结.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h1 id=\"利用n8n集成langchain不写一行代码完成对线上论文的总结\"><a class=\"markdownIt-Anchor\" href=\"#利用n8n集成langchain不写一行代码完成对线上论文的总结\"></a> 利用n8n集成Langchain不写一行代码完成对线上论文的总结</h1>\n<p>n8n是开源的工作流软件，国内用得比较少，之前知乎也有文章介绍过这个软件。如果你会大量使用国外的线上应用胡总和，比如出海，这个软件就它集成了国外很多线上应用，根据官网介绍，超过387个集成应用，比如Slack、Discord、Twitter、Facebook、Instagram、GMail、Outlook、Salesforce、Hubspot、Amazon S3，Dropbox等，只要你能想到国外的知名线上应用，基本上它都支持不用任何编写任何代码的集成，简单来说它是一个开源的低代码工作流集成平台，从它网站介绍，可以提升工作流开发效率10倍。感兴趣的同学可以去官方网站学习和下载。</p>\n<p>当然我们今天介绍的是它最近发布了一个新的集成API——LangChain，LangChain是目前AI Agents领域炙手可热的开源软件，由于内置大量可以快速使用的组件，在中国也广受欢迎，8但如果要使用LangChain，你还是得懂编程。有了n8n的langchain可视化组件，我们就不需要编码了。</p>\n<p>接下来我们来演示一下不写任何一行代码，如何完成线上论文的论总结，具体场景描述：</p>\n<blockquote>\n<p>假设你经常阅读<a href=\"https://link.zhihu.com/?target=http%3A//ArXiv.org\">http://ArXiv.org</a>的论文，你希望利用ChatGPT来帮你总结论文的内容，并发送到你的邮箱</p>\n</blockquote>\n<p>以终为始，结果如下：</p>\n<p><img src=\"https://pic2.zhimg.com/80/v2-cacc4f96d34614782e79495ff1212c51_1440w.webp\" alt=\"\" /></p>\n<p>基于上述场景和结果，我们来看看过程的实现思路：</p>\n<ul class=\"lvl-0\">\n<li class=\"lvl-2\">\n<p>使用n8n创建工作流，“Add Workflow”</p>\n</li>\n</ul>\n<p><img src=\"https://pic3.zhimg.com/80/v2-e7e4df2f284f1832a253afc394c96b3a_1440w.webp\" alt=\"\" /></p>\n<ul class=\"lvl-0\">\n<li class=\"lvl-2\">\n<p>添加第一组件，我们采用手动启动工作流，</p>\n</li>\n</ul>\n<p><img src=\"https://pic1.zhimg.com/80/v2-4a9a605aa1d480b589ab2ac9ea8452cc_1440w.webp\" alt=\"\" /></p>\n<p>在右侧选择Manually</p>\n<ul class=\"lvl-0\">\n<li class=\"lvl-2\">\n<p>点击工作流画布的加号，通过搜索添加HTTP Request组件，把你要访问的论文pdf文档的网址贴过来，论文的网址为：<a href=\"https://link.zhihu.com/?target=https%3A//arxiv.org/pdf/2305.18290.pdf\">2305.18290.pdf (arxiv.org)</a>，这是一篇关于“Direct Preference Optimization: Your Language Model is Secretly a Reward Model ”的论文。</p>\n</li>\n</ul>\n<p>设置方法为Get，如下所示：</p>\n<p><img src=\"https://pic3.zhimg.com/80/v2-c75364e232b0b6b39ee8aedff0d6a03e_1440w.webp\" alt=\"\" /></p>\n<p>点击右侧的“HTTP Request”</p>\n<p><img src=\"https://pic3.zhimg.com/80/v2-d4df6875274c96674175816dd4b6ff42_1440w.webp\" alt=\"\" /></p>\n<p>配置URL地址</p>\n<p>你可以点击“Execute Code”查看输出，如下所示：</p>\n<p><img src=\"https://pic1.zhimg.com/80/v2-50982715550b7ecd68fb011da112bd0c_1440w.webp\" alt=\"\" /></p>\n<p>右侧显示生成了一个pdf文档，你可以浏览或者下载</p>\n<p>返回工作流画布，可以看到我们添加的HTTP Request组件，如下所示：</p>\n<p><img src=\"https://pic3.zhimg.com/80/v2-75ba63644efa5e76fd3b2388964832b6_1440w.webp\" alt=\"\" /></p>\n<ul class=\"lvl-0\">\n<li class=\"lvl-2\">\n<p>继续添加组件，通过URL组件获得pdf文档内容，接下来就是利用LangChain来切分文档，并对各部分文档进行总结，最终形成总结文档。通过搜索langchain，添加“Summarization Chain”，如下图所示</p>\n</li>\n</ul>\n<p><img src=\"https://pic4.zhimg.com/80/v2-b3a575fa1cd1892ec0c315c47c4ea49f_1440w.webp\" alt=\"\" /></p>\n<p>点击右侧的”Summarization Chain“</p>\n<p>在Type中选择Refine，如下图所示：</p>\n<p><img src=\"https://pic1.zhimg.com/80/v2-f163cd9042ccaf9a13dbed4e605655b4_1440w.webp\" alt=\"\" /></p>\n<p>返回画布，我们可以可到&quot;Summarization Chain“组件，在下方Model有个加号，点击加号，选择OpenAI Model，如下所示:</p>\n<p><img src=\"https://pic3.zhimg.com/80/v2-b7e0a1a0c59ea69a4708b7cb4c35df1a_1440w.webp\" alt=\"\" /></p>\n<p>右侧选择OpenAI Model</p>\n<p>接下来配置OpenAI，Model选择”gpt-3.5-turbo-instruct“，如下图所示：</p>\n<p><img src=\"https://pic4.zhimg.com/80/v2-7857caccb750686b5fb94e899842656f_1440w.webp\" alt=\"\" /></p>\n<p>点击Credential to connect的下拉框，选择&quot;Create new credential”，在如下图输入OpenAI的API Key：</p>\n<p><img src=\"https://pic4.zhimg.com/80/v2-b9c39f7a7c7707685c3b82f61a888c63_1440w.webp\" alt=\"\" /></p>\n<p>返回画布，OpenAI Model创建成功，如下图所示：</p>\n<p><img src=\"https://pic1.zhimg.com/80/v2-128aaead71f9f6a2dcdada2595231e80_1440w.webp\" alt=\"\" /></p>\n<p>接下来点击Document下的加号对文档进行切分，选择右侧的&quot;Binary Input Loader“，如下图所示：</p>\n<p><img src=\"https://pic1.zhimg.com/80/v2-e47ca6e1e270ff76923ec3c94f064be4_1440w.webp\" alt=\"\" /></p>\n<p>设置loader type为”PDF Loader&quot;，如下图所示：</p>\n<p><img src=\"https://pic2.zhimg.com/80/v2-71b50f2bd540eb781ad4b50d89f9c055_1440w.webp\" alt=\"\" /></p>\n<p>返回工作流画布，我们可以看到已经添加了&quot;Binary Input Loader“组件，如下图所示：</p>\n<p><img src=\"https://pic3.zhimg.com/80/v2-5605608d1f8b7ac74e6360623bec6f3a_1440w.webp\" alt=\"\" /></p>\n<p>在text splitter下方点击加号，选择如下图右侧的”Token Splitter“，如下图所示:</p>\n<p><img src=\"https://pic1.zhimg.com/80/v2-46c7f84a3e3ce5a6aa8be80d100caad0_1440w.webp\" alt=\"\" /></p>\n<p>选择之后设置Chunk Size为1000，如下图所示：</p>\n<p><img src=\"https://pic2.zhimg.com/80/v2-f485c01466ce5eeef0b41ce6a2a966f1_1440w.webp\" alt=\"\" /></p>\n<p>返回画布，我们可以看到Token Splitter组件已经产生，如下图所示:</p>\n<p><img src=\"https://pic3.zhimg.com/80/v2-032242f6f7553c3ca5a7a1010210a472_1440w.webp\" alt=\"\" /></p>\n<p>好了，核心的工作流我们已经构建完了，我们可以跑一下工作流看一下结果，点击下方的&quot;Execute Workflow“，</p>\n<p><img src=\"https://pic4.zhimg.com/80/v2-b76b96820d6f9d61be194c081b354137_1440w.webp\" alt=\"\" /></p>\n<p>执行时间会有点时间（个人觉得n8n的langchain summarization chain组件是有必要优化，有点慢），你可以双击”openai model“组件查看进度，在output下方run显示跑完了几个节点，如下图所示：</p>\n<p><img src=\"https://pic2.zhimg.com/80/v2-ea0ead59a17322b88f07d4960bf049e1_1440w.webp\" alt=\"\" /></p>\n<p>跑完之后可以看到相应工作流完成提示，如下图：</p>\n<p><img src=\"https://pic4.zhimg.com/80/v2-200d46ebd473ad67cfd7139c915f3bcf_1440w.webp\" alt=\"\" /></p>\n<p>我们可以双击”Summarization Chain“组件查看内容，返回了总结的内容，具体如下：</p>\n<p><img src=\"https://pic2.zhimg.com/80/v2-b55d9af259e6123cc0efc545fb533dc1_1440w.webp\" alt=\"\" /></p>\n<ul class=\"lvl-0\">\n<li class=\"lvl-2\">\n<p>最后一步，发送邮件到你的邮箱。点击右侧的加号，把总结的内容发送到你的邮箱，我们使用Gmail组件来发邮箱，要在google cloud网站设置credential（由于国内较少使用google的gmail，所以不做详细展开，如果碰到问题，可以随时找我沟通），通过搜索查找Gmail组件，如下图所示：</p>\n</li>\n</ul>\n<p><img src=\"https://pic4.zhimg.com/80/v2-9a2f85b1459f782c3a3341e734fedfe7_1440w.webp\" alt=\"\" /></p>\n<p>为了使用Google GMail服务，在Google Cloud配置OAuth2.0（配置过程略过），如下图所示：</p>\n<p><img src=\"https://pic2.zhimg.com/80/v2-1240bed9f5b680adc3367b9a232f11e5_1440w.webp\" alt=\"\" /></p>\n<p>并且要允许调用Gmail的API，点击下图的”Gmail API“之后Enable即可：</p>\n<p><img src=\"https://pic4.zhimg.com/80/v2-a1924f84fd459208d96c460a8ab0bdd3_1440w.webp\" alt=\"\" /></p>\n<p>回到邮箱设置，选择&quot;send a message”，如下图所示：</p>\n<p><img src=\"https://pic4.zhimg.com/80/v2-09a4ace173de6fb99dc6b12b5a4cdd03_1440w.webp\" alt=\"\" /></p>\n<p>配置gmail，配置gmail credential、收件邮箱、主题，如下图所示：</p>\n<p><img src=\"https://pic2.zhimg.com/80/v2-00ff6a99048de972bdba677f2fdfe77d_1440w.webp\" alt=\"\" /></p>\n<p>配置发送邮件内容，选择表达式，并选择&quot;Summarization Chain”的“response”的”output text“</p>\n<p><img src=\"https://pic4.zhimg.com/80/v2-b07c64d552590e0204c112ed9404137f_1440w.webp\" alt=\"\" /></p>\n<p>返回工作流，至此，工作流配置完成，如下图所示：</p>\n<p><img src=\"https://pic2.zhimg.com/80/v2-cacc4f96d34614782e79495ff1212c51_1440w.webp\" alt=\"\" /></p>\n<p>运行工作流，邮箱就会收到如下邮件，具体如下:</p>\n<p><img src=\"https://pic2.zhimg.com/80/v2-68c66a711fa9e0ae6e14fe14fdea4a09_1440w.webp\" alt=\"\" /></p>\n<p>终于大功告成，没有编写过一行代码，利用n8n的langchain组件实现对论文总结，并发送邮件。</p>\n","text":" 利用n8n集成Langchain不写一行代码完成对线上论文的总结 n8n是开源的工作流软件，国内用得比较少，之前知乎也有文章介绍过这个软件。如果你会大量使用国外的线上应用胡总和，比如出海，这个软件就它集成了国外很多线上应用，根据官网介绍，超过387个集成应用，比如Slack、D...","link":"","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[{"name":"安全","slug":"安全","count":38,"path":"api/categories/安全.json"}],"tags":[{"name":"LLM","slug":"LLM","count":5,"path":"api/tags/LLM.json"},{"name":"sora","slug":"sora","count":3,"path":"api/tags/sora.json"},{"name":"langchain","slug":"langchain","count":2,"path":"api/tags/langchain.json"},{"name":"n8n","slug":"n8n","count":1,"path":"api/tags/n8n.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%88%A9%E7%94%A8n8n%E9%9B%86%E6%88%90langchain%E4%B8%8D%E5%86%99%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E5%AE%8C%E6%88%90%E5%AF%B9%E7%BA%BF%E4%B8%8A%E8%AE%BA%E6%96%87%E7%9A%84%E6%80%BB%E7%BB%93\"><span class=\"toc-text\"> 利用n8n集成Langchain不写一行代码完成对线上论文的总结</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"netstat 命令","uid":"ae10786cb00fec4dfbec3a62f19a5fee","slug":"linux/netstat 命令","date":"2024-03-19T07:36:46.509Z","updated":"2024-03-19T08:45:50.464Z","comments":true,"path":"api/articles/linux/netstat 命令.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" netstat 命令 sudo netstat -pantule 显示更全的端口进程信息。 sudo netstat -plunt nestat的所有命令参数的说明 -t, --tcp: 显示TCP协议的连接信息 -u, --udp: 显示UDP协议的连接信息 -n, --nu...","link":"","photos":[],"count_time":{"symbolsCount":454,"symbolsTime":"1 mins."},"categories":[{"name":"linux","slug":"linux","count":10,"path":"api/categories/linux.json"}],"tags":[{"name":"netstat","slug":"netstat","count":1,"path":"api/tags/netstat.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"用TheHive实现SOAR","uid":"4ed59a6d992f5c41879395e6019b7e3d","slug":"sec/TheHive/用TheHive实现SOAR","date":"2024-03-18T03:38:03.761Z","updated":"2024-03-18T03:42:33.349Z","comments":true,"path":"api/articles/sec/TheHive/用TheHive实现SOAR.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" 用TheHive实现SOAR 一、介绍 SOAR代表“安全编排、自动化和响应”，指的是一种解决方案，用于威胁领域，以更好地监控和响应安全监控工具和技术检测到的事件。随着探测恶意活动的更先进技术的发展，大多数机构正转向使用SOAR，利用自动化来有效地分析、升级和响应 analys...","link":"","photos":[],"count_time":{"symbolsCount":"3k","symbolsTime":"3 mins."},"categories":[{"name":"安全","slug":"安全","count":38,"path":"api/categories/安全.json"}],"tags":[{"name":"TheHive","slug":"TheHive","count":4,"path":"api/tags/TheHive.json"},{"name":"SOAR","slug":"SOAR","count":3,"path":"api/tags/SOAR.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}