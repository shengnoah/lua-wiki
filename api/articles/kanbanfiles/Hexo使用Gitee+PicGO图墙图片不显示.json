{"title":"Hexo使用Gitee+PicGO图墙图片不显示","uid":"70ccad85c177ffedfa95e18f77517e68","slug":"kanbanfiles/Hexo使用Gitee+PicGO图墙图片不显示","date":"2024-03-14T06:15:59.717Z","updated":"2024-03-14T06:15:59.718Z","comments":true,"path":"api/articles/kanbanfiles/Hexo使用Gitee+PicGO图墙图片不显示.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":[],"content":"<p><img src=\"https://gitee.com/shengnoah/picture/raw/master/20231027163025.png\" alt=\"image.png\"></p>\n<p>如何只对网页中的img标签进行no-referrer限制。</p>\n<p>要对网页中的img标签进行no-referrer限制，您可以使用以下方法：</p>\n<ol>\n<li>使用JavaScript：在网页中插入以下JavaScript代码，它将遍历所有的img标签，并为每个img标签设置rel属性为”noreferrer”。</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;DOMContentLoaded&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> imgTags = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&#x27;img&#x27;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; imgTags.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">    imgTags[i].<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&#x27;referrerpolicy&#x27;</span>, <span class=\"string\">&#x27;no-referrer&#x27;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>使用CSS：在网页的样式表（CSS）中添加以下代码，它将为所有的img标签设置rel属性为”noreferrer”。</li>\n</ol>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">img</span> &#123;</span><br><span class=\"line\">  referrerpolicy: no-referrer;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>请注意，这些方法都是在客户端（浏览器）执行的，并且只会影响到加载了该代码或样式表的网页。如果您想全局应用no-referrer限制，您可能需要在服务器端配置相关设置。</p>\n<p>直接在头文件中禁用，是可以跃过图片防盗链，但同时百度统计也屏蔽了， 图是可以显示了， 但是百度统计不过了。</p>\n<meta name=\"referrer\" content=\"no-referrer\"/>\n\n\n\n<p>用JS动态进行no-referrer设置。</p>\n<!-- 百度统计 -->\n<script src=\"https://hm.baidu.com/hm.js?c7002d193ba43df9317b7fc847709213\"></script>\n\n<!-- no-referrer -->\n<script>\n(function () {\n  // 添加 no-referrer\n  // <meta name=\"referrer\" content=\"no-referrer\" />\n  var meta = document.createElement('meta')\n  meta.content = 'no-referrer'\n  meta.name = 'referrer'\n  document.getElementsByTagName('head')[0].appendChild(meta)\n})()\n</script>\n\n\n<p>要在百度的统计JS加载之后，加载上面的代码，这样百度就可以正常统计了， 这段代码要放到Hexo的主题文件里， 标签不能用普通的JS标签，要用Hexo主题用的标签。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> theme.<span class=\"property\">baidu_analytics</span></span><br><span class=\"line\">  script.</span><br><span class=\"line\">    (<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> meta = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&#x27;meta&#x27;</span>)</span><br><span class=\"line\">    meta.<span class=\"property\">content</span> = <span class=\"string\">&#x27;no-referrer&#x27;</span></span><br><span class=\"line\">    meta.<span class=\"property\">name</span> = <span class=\"string\">&#x27;referrer&#x27;</span></span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&#x27;head&#x27;</span>)[<span class=\"number\">0</span>].<span class=\"title function_\">appendChild</span>(meta)</span><br><span class=\"line\">    &#125;)()</span><br></pre></td></tr></table></figure>\n\n<p>这段代码放在主题的百度代码统计之后， 图墙的图片就可以显示了， 并且百度的统计也是正常。 </p>\n<p>html的img标签显示图片的例子</p>\n<img src=\"example.jpg\" alt=\"Example Image\">\n\n\n<p><img src=\"https://gitee.com/shengnoah/picture/raw/master/20231027182204.png\" alt=\"image.png\"></p>\n","text":" 如何只对网页中的img标签进行no-referrer限制。 要对网页中的img标签进行no-referrer限制，您可以使用以下方法： 使用JavaScript：在网页中插入以下JavaScript代码，它将遍历所有的img标签，并为每个img标签设置rel属性为”norefe...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"obsidian","slug":"obsidian","count":8,"path":"api/categories/obsidian.json"},{"name":"hexo","slug":"obsidian/hexo","count":3,"path":"api/categories/obsidian/hexo.json"}],"tags":[{"name":"obsidian","slug":"obsidian","count":3,"path":"api/tags/obsidian.json"},{"name":"hexo","slug":"hexo","count":1,"path":"api/tags/hexo.json"},{"name":"picgo","slug":"picgo","count":1,"path":"api/tags/picgo.json"}],"toc":"","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"ChatGLM2如何使用多显卡GPU","uid":"db337d0c1275ad3ba82eaea7216e78e0","slug":"kanbanfiles/ChatGLM2如何使用多显卡GPU","date":"2024-03-14T06:15:59.717Z","updated":"2024-03-14T06:15:59.717Z","comments":true,"path":"api/articles/kanbanfiles/ChatGLM2如何使用多显卡GPU.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"ChatGLM2的train.sh的NUM_GPUS如何设置配置双显卡？ChatGLM和ChatGLM2，对GPU配置的传参数样式不太一样，一代的时候，“0,1”这么用双显卡，二代的时候直接输入NUM_GPUS=2. 要配置双显卡进行训练，可以将NUM_GPUS设置为2，以表示使...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"ChatGLM","slug":"ChatGLM","count":1,"path":"api/categories/ChatGLM.json"}],"tags":[{"name":"ChatGLM2","slug":"ChatGLM2","count":1,"path":"api/tags/ChatGLM2.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"jinxing/海淀区","date":"2024-03-14T06:15:59.716Z","updated":"2024-03-14T06:15:59.716Z","comments":true,"path":"api/articles/jinxing/海淀区.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"北京海淀区小学一年级50米，买多少秒成绩及格。 成绩及格的时间是根据个人情况而定的，无法通过跑50米的时间来确定。一般来说，小学一年级的学生在50米跑方面，如果能够在10-15秒之间完成，可以算作是成绩及格。但是需要根据学校或教师对于成绩评判标准来确定是否及格。 北京海淀区小学生...","link":"","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}