{"title":"Hexo使用Gitee+PicGO图墙图片不显示","uid":"70ccad85c177ffedfa95e18f77517e68","slug":"kanbanfiles/Hexo使用Gitee+PicGO图墙图片不显示","date":"2024-03-14T07:45:09.029Z","updated":"2024-03-14T07:45:09.030Z","comments":true,"path":"api/articles/kanbanfiles/Hexo使用Gitee+PicGO图墙图片不显示.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<p><img src=\"https://gitee.com/shengnoah/picture/raw/master/20231027163025.png\" alt=\"image.png\" /></p>\n<p>如何只对网页中的img标签进行no-referrer限制。</p>\n<p>要对网页中的img标签进行no-referrer限制，您可以使用以下方法：</p>\n<ol>\n<li class=\"lvl-3\">\n<p>使用JavaScript：在网页中插入以下JavaScript代码，它将遍历所有的img标签，并为每个img标签设置rel属性为&quot;noreferrer&quot;。</p>\n</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'DOMContentLoaded'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> imgTags <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> imgTags<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    imgTags<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'referrerpolicy'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'no-referrer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ol start=\"2\">\n<li class=\"lvl-3\">\n<p>使用CSS：在网页的样式表（CSS）中添加以下代码，它将为所有的img标签设置rel属性为&quot;noreferrer&quot;。</p>\n</li>\n</ol>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">img</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">referrerpolicy</span><span class=\"token punctuation\">:</span> no-referrer<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>请注意，这些方法都是在客户端（浏览器）执行的，并且只会影响到加载了该代码或样式表的网页。如果您想全局应用no-referrer限制，您可能需要在服务器端配置相关设置。</p>\n<p>直接在头文件中禁用，是可以跃过图片防盗链，但同时百度统计也屏蔽了， 图是可以显示了， 但是百度统计不过了。<br />\n<meta name=\"referrer\" content=\"no-referrer\"/></p>\n<p>用JS动态进行no-referrer设置。</p>\n<!-- 百度统计 -->\n<script src=\"https://hm.baidu.com/hm.js?c7002d193ba43df9317b7fc847709213\"></script>\n<!-- no-referrer -->\n<script>\n(function () {\n  // 添加 no-referrer\n  // <meta name=\"referrer\" content=\"no-referrer\" />\n  var meta = document.createElement('meta')\n  meta.content = 'no-referrer'\n  meta.name = 'referrer'\n  document.getElementsByTagName('head')[0].appendChild(meta)\n})()\n</script>\n<p>要在百度的统计JS加载之后，加载上面的代码，这样百度就可以正常统计了， 这段代码要放到Hexo的主题文件里， 标签不能用普通的JS标签，要用Hexo主题用的标签。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> theme<span class=\"token punctuation\">.</span>baidu_analytics\n  script<span class=\"token punctuation\">.</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">var</span> meta <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'meta'</span><span class=\"token punctuation\">)</span>\n    meta<span class=\"token punctuation\">.</span>content <span class=\"token operator\">=</span> <span class=\"token string\">'no-referrer'</span>\n    meta<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'referrer'</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'head'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>meta<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>这段代码放在主题的百度代码统计之后， 图墙的图片就可以显示了， 并且百度的统计也是正常。</p>\n<p>html的img标签显示图片的例子</p>\n<img src=\"example.jpg\" alt=\"Example Image\">\n<p><img src=\"https://gitee.com/shengnoah/picture/raw/master/20231027182204.png\" alt=\"image.png\" /></p>\n","text":" 如何只对网页中的img标签进行no-referrer限制。 要对网页中的img标签进行no-referrer限制，您可以使用以下方法： 使用JavaScript：在网页中插入以下JavaScript代码，它将遍历所有的img标签，并为每个img标签设置rel属性为&quot;n...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"obsidian","slug":"obsidian","count":8,"path":"api/categories/obsidian.json"},{"name":"hexo","slug":"obsidian/hexo","count":3,"path":"api/categories/obsidian/hexo.json"}],"tags":[{"name":"obsidian","slug":"obsidian","count":3,"path":"api/tags/obsidian.json"},{"name":"hexo","slug":"hexo","count":1,"path":"api/tags/hexo.json"},{"name":"picgo","slug":"picgo","count":1,"path":"api/tags/picgo.json"}],"toc":"","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"教你理解和构建GPT Tokenizer","uid":"3f78d971eabe4d648c246dd6ba6afdb2","slug":"course/教你理解和构建GPT Tokenizer","date":"2024-03-14T07:45:09.029Z","updated":"2024-03-14T07:45:09.029Z","comments":true,"path":"api/articles/course/教你理解和构建GPT Tokenizer.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" 教你理解和构建GPT Tokenizer Open AI传奇研究员Andrej Karpathy的新课，教你理解和构建GPT Tokenizer。 他可以把相当复杂的LLM概念用非常好理解的方式讲出来。希望了解LLM的强烈建议听一下他的课，包括一些历史课程。 用GPT-4翻译了...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"课程","slug":"课程","count":1,"path":"api/categories/课程.json"}],"tags":[{"name":"GPT","slug":"GPT","count":1,"path":"api/tags/GPT.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"飞桨语音","uid":"6ee69322158c2a4501bafa2499ab7c23","slug":"kanbanfiles/飞桨语音","date":"2024-03-14T07:45:09.029Z","updated":"2024-03-14T07:45:09.029Z","comments":true,"path":"api/articles/kanbanfiles/飞桨语音.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"paddlespeech tts --input &quot;你 好 ， 欢 迎 使 用 百 度 飞 桨 深 度 学 习 框 架 ！ &quot; --output testout.wav conda 环境 ppocr_rosetta 如何用paddlespeech asr 实现...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"AIGC","slug":"AIGC","count":117,"path":"api/categories/AIGC.json"}],"tags":[{"name":"百度AI","slug":"百度AI","count":1,"path":"api/tags/百度AI.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}