{"title":"lua简明教程","uid":"3dd51d89d6a793aade0255d4266d1794","slug":"zl/2016-01-01-727_lua简明教程","date":"2024-04-03T03:47:35.965Z","updated":"2024-04-03T03:47:35.970Z","comments":true,"path":"api/articles/zl/2016-01-01-727_lua简明教程.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>lua是一种轻量小巧的脚本语言。</p>\n<h3 id=\"lua特性\"><a href=\"#lua特性\" class=\"headerlink\" title=\"lua特性\"></a>lua特性</h3><p>1.轻量级，编译后不过200K<br/>2.可扩展性<br/>3.自动内存管理<br/>4.支持面向过程编程和函数式编程<br/>……</p>\n<h3 id=\"lua应用场景\"><a href=\"#lua应用场景\" class=\"headerlink\" title=\"lua应用场景\"></a>lua应用场景</h3><p>1.游戏开发<br/>2.独立应用脚本<br/>3.web应用脚本<br/>4.扩展和数据库插件<br/>5.安全系统</p>\n<h2 id=\"安装使用\"><a href=\"#安装使用\" class=\"headerlink\" title=\"安装使用\"></a>安装使用</h2><h3 id=\"安装问题\"><a href=\"#安装问题\" class=\"headerlink\" title=\"安装问题\"></a>安装问题</h3><p>1.编译lua时，提示<br/></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">lua.c:80:31: fatal error: readline/readline.h: No such file or directory</div></pre></td></tr></tbody></table></figure><p></p>\n<p>linux环境缺少readline库。<br/>到ftp://ftp.gnu.org/gnu/readline/  下载并进行安装</p>\n<p>2.安装完readline后提示<br/></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">/usr/local/lib/libreadline.so: undefined reference to `tputs&#39;</div><div class=\"line\">/usr/local/lib/libreadline.so: undefined reference to `tgoto&#39;</div><div class=\"line\">/usr/local/lib/libreadline.so: undefined reference to `tgetflag&#39;</div><div class=\"line\">/usr/local/lib/libreadline.so: undefined reference to `UP&#39;</div><div class=\"line\">/usr/local/lib/libreadline.so: undefined reference to `tgetent&#39;</div><div class=\"line\">/usr/local/lib/libreadline.so: undefined reference to `tgetnum&#39;</div><div class=\"line\">/usr/local/lib/libreadline.so: undefined reference to `PC&#39;</div><div class=\"line\">/usr/local/lib/libreadline.so: undefined reference to `tgetstr&#39;</div><div class=\"line\">/usr/local/lib/libreadline.so: undefined reference to `BC&#39;</div></pre></td></tr></tbody></table></figure><p></p>\n<p>需要安装Ncurses</p>\n<p>3.编译Ncurses提示 error: expected ‘)’ before ‘int’</p>\n<p>导入环境变量,在进行配置编译,安装,命令如下<br/></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">export CPPFLAGS=&#34;-P&#34;</div><div class=\"line\">./configure</div><div class=\"line\">make</div><div class=\"line\">make install</div><div class=\"line\">Ncurses</div></pre></td></tr></tbody></table></figure><p></p>\n<p>参考:<br/><a href=\"https://stackoverflow.com/questions/37475222/ncurses-6-0-compilation-error-error-expected-before-int\" target=\"_blank\" rel=\"external noopener noreferrer\">https://stackoverflow.com/questions/37475222/ncurses-6-0-compilation-error-error-expected-before-int</a></p>\n<p>总结:安装成功安装lua的前提是linux上有readline和ncurses库.</p>\n<h2 id=\"Hello-World\"><a href=\"#Hello-World\" class=\"headerlink\" title=\"Hello World\"></a>Hello World</h2><p>和Python类似，它也可以交互式编程，在命令行输入lua后即可进入：<br/></p><figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;<span class=\"built_in\">print</span>(<span class=\"string\">&#34;Hello World&#34;</span>)</div><div class=\"line\">Hello World</div><div class=\"line\">&gt;</div></pre></td></tr></tbody></table></figure><p></p>\n<p>当然也可以将脚本内容写在文件，例如，将上面的内容写在hello.lua：<br/></p><figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/usr/<span class=\"keyword\">local</span>/bin/lua</div><div class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#34;Hello World&#34;</span>)</div></pre></td></tr></tbody></table></figure><p></p>\n<p>其中第一行指定了lua解释器路径，执行：<br/></p><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"bash\"> chmod +x hello.lua  </span></div><div class=\"line\"><span class=\"bash\"> ./hello.lua</span></div><div class=\"line\">Hello World</div></pre></td></tr></tbody></table></figure><p></p>\n<p>这里注意，如果你没有加第一行，shell就不知道用哪个解释器去解释运行，当然你也可以通过下面的方式运行：<br/></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ lua hello.lua</div></pre></td></tr></tbody></table></figure><p></p>\n<h2 id=\"注释\"><a href=\"#注释\" class=\"headerlink\" title=\"注释\"></a>注释</h2><p>同样地，它至少有两种注释，单行注释使用—：<br/></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">-- 这里是单行注释</div><div class=\"line\">print(&#34;hello&#34;)</div></pre></td></tr></tbody></table></figure><p></p>\n<p>多行注释：<br/></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">--[[</div><div class=\"line\">多行注释</div><div class=\"line\">多行注释</div><div class=\"line\">--]]</div><div class=\"line\">print(&#34;yanbinghu.com&#34;)</div></pre></td></tr></tbody></table></figure><p></p>\n<h2 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h2><h2 id=\"数据类型\"><a href=\"#数据类型\" class=\"headerlink\" title=\"数据类型\"></a>数据类型</h2><ul>\n<li>nil—表示无效值</li>\n<li>boolean false和true,lua将nil看成是”假”</li>\n<li>number 双精度类型的实浮点数</li>\n<li>string 字符串</li>\n<li>function 由c或lua编写的函数</li>\n<li>userdata 表示任意存储在变量中的c数据结构</li>\n<li>thread 表示执行的独立线路,用于执行协同程序</li>\n<li>table lua中的表,类似于关联数组</li>\n</ul>\n<h4 id=\"判断类型\"><a href=\"#判断类型\" class=\"headerlink\" title=\"判断类型\"></a>判断类型</h4><p>可以通过type函数来判断数据类型<br/></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">print(type(“hello”) ) --string</div><div class=\"line\">print(type(type)) --function</div></pre></td></tr></tbody></table></figure><p></p>\n<h4 id=\"字符串算数操作\"><a href=\"#字符串算数操作\" class=\"headerlink\" title=\"字符串算数操作\"></a>字符串算数操作</h4><p>在对一个数字字符串上进行算术操作时，Lua 会尝试将这个数字字符串转成一个数字:<br/>例如:<br/></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;print(“2” + “6”)</div><div class=\"line\">8</div></pre></td></tr></tbody></table></figure><p></p>\n<ul>\n<li>字符串连接 ..</li>\n</ul>\n<figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;print(“a”..”b”)</div><div class=\"line\">ab</div></pre></td></tr></tbody></table></figure>\n<ul>\n<li>计算字符串长度 #</li>\n</ul>\n<figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;print(#“a”)</div><div class=\"line\">1</div></pre></td></tr></tbody></table></figure>\n<h4 id=\"table\"><a href=\"#table\" class=\"headerlink\" title=\"table\"></a>table</h4><p>Lua 里表的默认初始索引一般以 1 开始</p>\n<h2 id=\"变量\"><a href=\"#变量\" class=\"headerlink\" title=\"变量\"></a>变量</h2><ul>\n<li><p>默认情况下,变量总认为是全局的.<br/>全局变量不需要声明,访问未初始化的全局变量不会报错,得到的结果是 nil</p>\n</li>\n<li><p>想删除一个全局变量,只需要将变量赋值为nil<br/>当且仅当该变量不为nil时,变量存在</p>\n</li>\n<li><p>a =1 —&gt;全局变量</p>\n</li>\n<li><p>local b =2 —&gt;局部变量</p>\n</li>\n<li><p>Lua可以对多个变量同时赋值，变量列表和值列表的各个元素用逗号分开，赋值语句右边的值会依次赋给左边的变量。</p>\n</li>\n</ul>\n<h2 id=\"未完待续\"><a href=\"#未完待续\" class=\"headerlink\" title=\"未完待续\"></a>未完待续</h2>","text":"前言lua是一种轻量小巧的脚本语言。 lua特性1.轻量级，编译后不过200K2.可扩展性3.自动内存管理4.支持面向过程编程和函数式编程…… lua应用场景1.游戏开发2.独立应用脚本3.web应用脚本4.扩展和数据库插件5.安全系统 安装使用安装问题1.编译lua时，提示1l...","link":"","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">前言</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#lua%E7%89%B9%E6%80%A7\"><span class=\"toc-text\">lua特性</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#lua%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\">lua应用场景</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">安装使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">安装问题</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Hello-World\"><span class=\"toc-text\">Hello World</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B3%A8%E9%87%8A\"><span class=\"toc-text\">注释</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AF%AD%E6%B3%95\"><span class=\"toc-text\">语法</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">数据类型</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%88%A4%E6%96%AD%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">判断类型</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%95%B0%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">字符串算数操作</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#table\"><span class=\"toc-text\">table</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">变量</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9C%AA%E5%AE%8C%E5%BE%85%E7%BB%AD\"><span class=\"toc-text\">未完待续</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"LUAWAF","uid":"8733a9f0389c2b32eac15c996ea8e211","slug":"zl/2016-01-01-728_LUAWAF","date":"2024-04-03T03:47:35.970Z","updated":"2024-04-03T03:47:35.971Z","comments":true,"path":"api/articles/zl/2016-01-01-728_LUAWAF.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"LUAWAFLUAWAF是我编写的一个针对Nginx的Web应用提供安全防护的Web应用防火墙。 支持平台目前WAF只支持Windows平台 安装1，使用本软件最好直接在OpenResty官网下载OpenResty，OpenResty自身带有Nginx 2，将该WAF下载到Ope...","link":"","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Performance evaluation of MQTT and CoAP via a common middleware","uid":"7245a271502d46fc94e5812441e78b3b","slug":"zl/2016-01-01-726_[译]Performance evaluation of MQTT and CoAP via a c","date":"2024-04-03T03:47:35.964Z","updated":"2024-04-03T03:47:35.965Z","comments":true,"path":"api/articles/zl/2016-01-01-726_[译]Performance evaluation of MQTT and CoAP via a c.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" Performance evaluation of MQTT and CoAP via a common middleware（全文翻译） 12345678910Dinesh ThangavelFaculty of Engineering National University...","link":"","photos":[],"count_time":{"symbolsCount":"5.5k","symbolsTime":"5 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}