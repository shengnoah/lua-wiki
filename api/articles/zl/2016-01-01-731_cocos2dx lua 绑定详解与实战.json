{"title":"cocos2dx lua 绑定详解与实战","uid":"adba9f75759928073dc25e3c54ccdb5c","slug":"zl/2016-01-01-731_cocos2dx lua 绑定详解与实战","date":"2024-04-03T03:47:35.976Z","updated":"2024-04-03T03:47:35.976Z","comments":true,"path":"api/articles/zl/2016-01-01-731_cocos2dx lua 绑定详解与实战.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<p>我们平时在开发cocos2dx lua游戏的时候的，会遇到这样的情况：</p>\n<ul>\n<li>在c++层定义了一些类，我们需要将这些类导出给Lua来使用，从而完成在c++层实现起来容易的需求，这个时候就需要将整个类作为模块导出。</li>\n</ul>\n<p>而Cocos2d-x正是采用的这种思想，将Cocos中的类导出供用户使用，而不是再写一套Lua代码，用户使用Cocos导出的这套接口，在Lua脚本层写游戏代码。</p>\n<blockquote>\n<p>为了更好的理解这部分的内容，可以先了解c++中调用Lua的机制。</p>\n</blockquote>\n<h6 id=\"推荐\"><a href=\"#推荐\" class=\"headerlink\" title=\"推荐\"></a>推荐</h6><ul>\n<li><a href=\"https://www.cnblogs.com/chevin/p/5954948.html\" target=\"_blank\" rel=\"noopener noreferrer\">手动绑定自定义类中的函数</a></li>\n<li><a href=\"https://www.cnblogs.com/chevin/p/5899516.html\" target=\"_blank\" rel=\"noopener noreferrer\">自动绑定自定义类中的函数</a></li>\n</ul>\n<p>前面文章中，我们说到了，Lua的本质是C，不是C++，Lua提供给C用的API也都是基于面向过程的C函数来用的，要把C++类注册进Lua形成一个一个的table环境是不太容易一下子办到的事。</p>\n<p>为了实现我们的需求，同样也是官方的需求，在Cocos 2.x版本的时候，使用的是tolua++这个工具，但是这个工具用起来相当的麻烦，耗费体力，所以现在使用的是<a href=\"https://github.com/cocos2d/bindings-generator\" target=\"_blank\" rel=\"noopener noreferrer\">bindings-generator</a>工具（官方用Python写的一个工具），这个东西底层使用的也应该是tolua++。</p>\n<blockquote>\n<p>这里只针对iOS平台，Android和其他平台在tolua中README.mdown中有具体介绍，其他步骤基本上一样！</p>\n</blockquote>\n<p>在项目跟目录framework/cocos2d-x/cocos中创建mybinding文件夹，里面创建一个MyBinding.h文件(mybinding, MyBinding自定义)，输入如下测试代码</p>\n<pre><code>#include &#34;cocos2d.h&#34;\n<p>namespace cocos2d &#123;<br />\nclass MyBinding: public Ref &#123;<br />\npublic:</p>\n<p>virtual bool init() &#123;<br />\nreturn true;<br />\n&#125;</p>\n<p>void sayBinding() &#123;<br />\nlog(&quot;Hello Binding Lua&quot;);<br />\n&#125;</p>\n<p>MyBinding();<br />\n~MyBinding();<br />\n&#125;<br />\n&#125;<br />\n</code></pre><p>在framework/cocos2d-x/tools/tolua，新建一个配置文件，这里命名cocos2dx_binding.ini</p></p>\n<p>输入下面代码：（处理标记修改处其他所有都一样）</p>\n<pre><code>[cocos2dx_binding] # 标记修改\n# the prefix to be added to the generated functions. You might or might not use this in your own\n# templates\nprefix = cocos2dx_binding # 标记修改\n<h1 id=\"create-a-target-namespace-in-javascript-this-would-create-some-code-like-the-equiv-to-ns-ns\"><a class=\"markdownIt-Anchor\" href=\"#create-a-target-namespace-in-javascript-this-would-create-some-code-like-the-equiv-to-ns-ns\"></a> create a target namespace (in javascript, this would create some code like the equiv. to <code>ns = ns || &#123;&#125;</code>)</h1>\n<h1 id=\"all-classes-will-be-embedded-in-that-namespace\"><a class=\"markdownIt-Anchor\" href=\"#all-classes-will-be-embedded-in-that-namespace\"></a> all classes will be embedded in that namespace</h1>\n<p>target_namespace = cc # 标记修改</p>\n<h1 id=\"-\"><a class=\"markdownIt-Anchor\" href=\"#-\"></a> --------- ?</h1>\n<p>#android_headers = -I%(androidndkdir)s/platforms/android-19/arch-arm/usr/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.7/libs/armeabi-v7a/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.7/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.8/libs/armeabi-v7a/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.8/include<br />\nandroid_headers = -I%(androidndkdir)s/platforms/android-19/arch-arm/usr/lib -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi-v7a/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.9/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi-v7a/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.9/include</p>\n<h1 id=\"--2\"><a class=\"markdownIt-Anchor\" href=\"#--2\"></a> --------- ?</h1>\n<p>android_flags = -D_SIZE_T_DEFINED_</p>\n<p>#clang_headers = -I%(clangllvmdir)s/lib/clang/%(clang_version)s/include<br />\nclang_headers = -I%(clangllvmdir)s/lib64/clang/5.0/include<br />\nclang_flags = -nostdinc -x c++ -std=c++11 -U <strong>SSE</strong></p>\n<h1 id=\"--3\"><a class=\"markdownIt-Anchor\" href=\"#--3\"></a> --------- ?</h1>\n<h1 id=\"-icocosdirsjsext-icocosdirsjsextsystem-icocosdirsjsextalipay-icocosdirsjsextvideo-icocosdirsjsextwebview-icocosdirsjsextumeng\"><a class=\"markdownIt-Anchor\" href=\"#-icocosdirsjsext-icocosdirsjsextsystem-icocosdirsjsextalipay-icocosdirsjsextvideo-icocosdirsjsextwebview-icocosdirsjsextumeng\"></a> -I%(cocosdir)s/jsext -I%(cocosdir)s/jsext/system -I%(cocosdir)s/jsext/alipay  -I%(cocosdir)s/jsext/video -I%(cocosdir)s/jsext/webview -I%(cocosdir)s/jsext/umeng</h1>\n<p>cocos_headers = -I%(cocosdir)s -I%(cocosdir)s/cocos -I%(cocosdir)s/cocos/base -I%(cocosdir)s/cocos/platform/android -I%(cocosdir)s/extensions -I%(cocosdir)s/external -I%(cocosdir)s/cocos/editor-support -I%(cocosdir)s/cocos/network -I%(cocosdir)s/cocos/ui/UIEditBox -I%(cocosdir)s/cocos/ui<br />\n#cocos_headers = -I%(cocosdir)s -I%(cocosdir)s/cocos -I%(cocosdir)s/cocos/platform/android</p>\n<p>cocos_flags = -DANDROID</p>\n<p>cxxgenerator_headers =</p>\n<h1 id=\"extra-arguments-for-clang\"><a class=\"markdownIt-Anchor\" href=\"#extra-arguments-for-clang\"></a> extra arguments for clang</h1>\n<p>extra_arguments = %(android_headers)s %(clang_headers)s %(cxxgenerator_headers)s %(cocos_headers)s %(android_flags)s %(clang_flags)s %(cocos_flags)s %(extra_flags)s</p>\n<h1 id=\"what-headers-to-parse-头文件路径\"><a class=\"markdownIt-Anchor\" href=\"#what-headers-to-parse-头文件路径\"></a> what headers to parse 头文件路径</h1>\n<p>headers = %(cocosdir)s/cocos/mybinding/MyBinding.h # 标记修改</p>\n<h1 id=\"what-classes-to-produce-code-for-you-can-use-regular-expressions-here-when-testing-the-regular\"><a class=\"markdownIt-Anchor\" href=\"#what-classes-to-produce-code-for-you-can-use-regular-expressions-here-when-testing-the-regular\"></a> what classes to produce code for. You can use regular expressions here. When testing the regular</h1>\n<h1 id=\"expression-it-will-be-enclosed-in-34-like-this-34menu\"><a class=\"markdownIt-Anchor\" href=\"#expression-it-will-be-enclosed-in-34-like-this-34menu\"></a> expression, it will be enclosed in &quot;^&#34;, like this: &#34;^Menu*&quot;.</h1>\n<p>#包含的类，新添加文件需要修改<br />\nclasses = MyBinding.* # 标记修改</p>\n<p>#需要在js里面派生的类<br />\n#classes_need_extend = MyBinding # 标记修改</p>\n<h1 id=\"what-should-we-skip-in-the-format-classnamefunction-function\"><a class=\"markdownIt-Anchor\" href=\"#what-should-we-skip-in-the-format-classnamefunction-function\"></a> what should we skip? in the format ClassName::[function function]</h1>\n<h1 id=\"classname-is-a-regular-expression-but-will-be-used-like-this-classname-functions-are-also\"><a class=\"markdownIt-Anchor\" href=\"#classname-is-a-regular-expression-but-will-be-used-like-this-classname-functions-are-also\"></a> ClassName is a regular expression, but will be used like this: &quot;^ClassName$&quot; functions are also</h1>\n<h1 id=\"regular-expressions-they-will-not-be-surrounded-by-if-you-want-to-skip-a-whole-class-just\"><a class=\"markdownIt-Anchor\" href=\"#regular-expressions-they-will-not-be-surrounded-by-if-you-want-to-skip-a-whole-class-just\"></a> regular expressions, they will not be surrounded by &quot;^$&quot;. If you want to skip a whole class, just</h1>\n<h1 id=\"add-a-single-as-functions-see-bellow-for-several-examples-a-special-class-name-is-which\"><a class=\"markdownIt-Anchor\" href=\"#add-a-single-as-functions-see-bellow-for-several-examples-a-special-class-name-is-which\"></a> add a single &quot;<em>&quot; as functions. See bellow for several examples. A special class name is &quot;</em>&quot;, which</h1>\n<h1 id=\"will-apply-to-all-class-names-this-is-a-convenience-wildcard-to-be-able-to-skip-similar-named\"><a class=\"markdownIt-Anchor\" href=\"#will-apply-to-all-class-names-this-is-a-convenience-wildcard-to-be-able-to-skip-similar-named\"></a> will apply to all class names. This is a convenience wildcard to be able to skip similar named</h1>\n<h1 id=\"functions-from-all-classes\"><a class=\"markdownIt-Anchor\" href=\"#functions-from-all-classes\"></a> functions from all classes.</h1>\n<p>skip =</p>\n<p>rename_functions =</p>\n<p>rename_classes =</p>\n<h1 id=\"for-all-class-names-should-we-remove-something-when-registering-in-the-target-vm\"><a class=\"markdownIt-Anchor\" href=\"#for-all-class-names-should-we-remove-something-when-registering-in-the-target-vm\"></a> for all class names, should we remove something when registering in the target VM?</h1>\n<p>remove_prefix =</p>\n<h1 id=\"classes-for-which-there-will-be-no-parent-lookup\"><a class=\"markdownIt-Anchor\" href=\"#classes-for-which-there-will-be-no-parent-lookup\"></a> classes for which there will be no &quot;parent&quot; lookup</h1>\n<p>classes_have_no_parents =</p>\n<h1 id=\"base-classes-which-will-be-skipped-when-their-sub-classes-found-them\"><a class=\"markdownIt-Anchor\" href=\"#base-classes-which-will-be-skipped-when-their-sub-classes-found-them\"></a> base classes which will be skipped when their sub-classes found them.</h1>\n<p>base_classes_to_skip = Ref</p>\n<h1 id=\"classes-that-create-no-constructor\"><a class=\"markdownIt-Anchor\" href=\"#classes-that-create-no-constructor\"></a> classes that create no constructor</h1>\n<h1 id=\"set-is-special-and-we-will-use-a-hand-written-constructor\"><a class=\"markdownIt-Anchor\" href=\"#set-is-special-and-we-will-use-a-hand-written-constructor\"></a> Set is special and we will use a hand-written constructor</h1>\n<p>abstract_classes =</p>\n<h1 id=\"determining-whether-to-use-script-objectjs-object-to-control-the-lifecycle-of-nativecpp-object-or-the-other-way-around-supported-values-are-yes-or-no\"><a class=\"markdownIt-Anchor\" href=\"#determining-whether-to-use-script-objectjs-object-to-control-the-lifecycle-of-nativecpp-object-or-the-other-way-around-supported-values-are-yes-or-no\"></a> Determining whether to use script object(js object) to control the lifecycle of native(cpp) object or the other way around. Supported values are 'yes' or 'no'.</h1>\n<p>script_control_cpp = no<br />\n</code></pre><p>注意检查一下三个头文件对应的路径及文件问题</p></p>\n<ul>\n<li>android_headers</li>\n<li>clang_headers</li>\n<li>cocos_headers</li>\n</ul>\n<h5 id=\"说明内容：\"><a href=\"#说明内容：\" class=\"headerlink\" title=\"说明内容：\"></a>说明内容：</h5><pre><code>+ •[title]：要配置将被使用的工具/ tolua的/ gengindings.py脚本的称号。一般来说，标题可以是文件名。\n+ •prefix：要配置一个函数名的前缀，通常，我们还可以使用文件名作为前缀。\n+ •target_namespace：要配置在脚本层模块的名字。在这里，我们使用cc作为模块名，当你想在脚本层REF的名称，您必须将一个名为前缀，CC在名称的前面。例如，CustomClass可以参考作为cc.CustomClass。\n+ •headers：要配置所有需要解析的头文件和％（cocosdir）s是的Cocos2d-x的引擎的根路径。\n+ •classes：要配置所有绑定所需的类。在这里，它支持正则表达式。因此，我们可以设置MyCustomClass。*在这里，用于查找多个特定的用法，你可以对照到tools/tolua/cocos2dx.ini。\n+ •skip：要配置需要被忽略的功能。现在绑定发电机无法解析的void *类型，并委托类型，所以这些类型的需要进行手动绑定。而在这种情况下，你应该忽略所有这些类型，然后再手动将它们绑定。你可以对照到配置文件路径下的cocos/scripting/lua-bindings/auto 。\n+ •rename_functions：要配置的功能需要在脚本层进行重命名。由于某些原因，开发者希望更多的脚本友好的API，所以配置选项就是为了这个目的。\n+ •rename_classes：不在使用。\n+ •remove_prefix：不在使用。\n+ •classes_have_no_parents：要配置是过滤器所需要的父类。这个选项是很少修改。\n+ •abstract_classes：要配置的公共构造并不需要导出的类。\n+ •script_control_cpp：是的。要配置脚本层是否管理对象的生命周期。如果没有，那么C++层关心他们的生命周期。现在，它是不完善的，以控制原生对象的续航时间在脚本层。所以，你可以简单地把它设置为no\n</code></pre><p>修改framework/cocos2d-x/tools/tolua里面的genbindings.py。有个cmd_args键值对的配置，增加下面代码，作为自定义绑定配置</p>\n<pre><code>&#39;cocos2dx_binding.ini&#39; : (&#39;cocos2dx_binding&#39;, &#39;lua_cocos2dx_binding_auto&#39;), \n</code></pre><blockquote>\n<p>注：python注释为#，这里将cmd_args其他的元素注释掉是因为这些文件都是生成过得，没必要再生成浪费时间<br/>这行代码表示在cocos2dx_custom中找到cocos2dx_custom的模块，然后生成lua_cocos2dx_custom_auto文件</p>\n</blockquote>\n<p>这里要确保NDK_ROOT，和PYTHON_BIN安装切配置好了,然后在framework/cocos2d-x/tools/tolua执行</p>\n<pre><code>./genbindings.py\n</code></pre><p>之前./genbindings.py之前，请先查看官方tolua中README文件，按照对应的流程，安装好需要的依赖，和相应的库，下面是我这边3.17最新的README</p>\n<pre><code>* The OSX 10.1&lt;!--0 has a built-in python2.7 and if your os don&#39;t have python2.7 then use [Homebrew](http://brew.sh/) to install the python and use pip install the python dependencies.\n&lt;pre&gt;\nbrew install python\n&lt;/pre&gt;\n<ul class=\"lvl-0\">\n<li class=\"lvl-2\">\n<p>Install python dependices by pip.<br />\n&lt;pre&gt;<br />\nsudo easy_install pip<br />\nsudo pip install PyYAML<br />\nsudo pip install Cheetah<br />\n&lt;/pre&gt;</p>\n</li>\n<li class=\"lvl-2\">\n<p>Download NDK 64bit r10c or later from <a href=\"https://developer.android.com/ndk/downloads/index.html\">Android Ndk</a></p>\n</li>\n<li class=\"lvl-2\">\n<p>Run<br />\n&lt;pre&gt;<br />\nexport NDK_ROOT=/path/to/android-ndk-10c<br />\n./genbindings.py<br />\n&lt;/pre&gt;–&gt;<br />\n</code></pre><p>大概意思就是下载r10c之后版的NDK本，然后安装python(这一步一般Mac都有，但是最好安装到2.x)。</p></p>\n</li>\n</ul>\n<p>大概意思就是安装，pip， PyYAML， Cheetah</p>\n<p>…….</p>\n<p>执行./genbindings.py之后生成在</p>\n<pre><code>工程目录frameworkscocos2d-xcocosscriptinglua-bindingsauto\n</code></pre><p>下便有了两个生成的文件</p>\n<pre><code>lua_cocos2dx_custom_auto.cpp\nlua_cocos2dx_custom_auto.hpp\n</code></pre><p>进入到文件夹</p>\n<pre><code>C:UsersuserDocumentsCocosLinkframeworkscocos2d-xcocosscriptinglua-bindingsmanual\n<p>打开CCLuaStack.cpp，添加</p>\n<p>#include &quot;lua_cocos2dx_custom_auto.hpp&quot;<br />\nregister_all_cocos2dx_custom(_state);<br />\n</code></pre><h3 id=\"期间遇到的错误\"><a href=\"#期间遇到的错误\" class=\"headerlink\" title=\"期间遇到的错误\"></a>期间遇到的错误</h3><h5 id=\"错误一\"><a href=\"#错误一\" class=\"headerlink\" title=\"错误一\"></a>错误一</h5><pre><code>Traceback (most recent call last):<br />\nFile &quot;/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x/tools/bindings-generator/generator.py&quot;, line 1799, in &lt;module&gt;<br />\nmain()<br />\nFile &quot;/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x/tools/bindings-generator/generator.py&quot;, line 1772, in main<br />\n'clang_args': (config.get(s, 'extra_arguments', 0, dict(userconfig.items('DEFAULT'))) or &quot;&quot;).split(&quot; &quot;),<br />\nFile &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ConfigParser.py&quot;, line 623, in get<br />\nreturn self._interpolate(section, option, value, d)<br />\nFile &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ConfigParser.py&quot;, line 691, in _interpolate<br />\nself._interpolate_some(option, L, rawval, section, vars, 1)<br />\nFile &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ConfigParser.py&quot;, line 726, in _interpolate_some<br />\nsection, map, depth + 1)<br />\nFile &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ConfigParser.py&quot;, line 723, in _interpolate_some<br />\noption, section, rest, var)<br />\nInterpolationMissingOptionError: Bad value substitution:<br />\nsection: [cocos2dx_custom]<br />\noption : extra_arguments<br />\nkey    : clang_version<br />\nrawval : /include<br />\n</code></pre><p>路径错误</p></p>\n<pre><code>#clang_headers = -I%(clangllvmdir)s/lib/clang/%(clang_version)s/include\nclang_headers = -I%(clangllvmdir)s/lib64/clang/5.0/include  # --------- ?\n</code></pre><h5 id=\"错误二\"><a href=\"#错误二\" class=\"headerlink\" title=\"错误二\"></a>错误二</h5><pre><code>Traceback (most recent call last):\n<h2 id=\"file-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1799-in-modulemainfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1795-in-maingeneratorgenerate_codefile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1444-in-generate_codeself_parse_headersfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1487-in-_parse_headersraise-exceptionfatal-error-in-parsing-headersexception-fatal-error-in-parsing-headers\"><a class=\"markdownIt-Anchor\" href=\"#file-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1799-in-modulemainfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1795-in-maingeneratorgenerate_codefile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1444-in-generate_codeself_parse_headersfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1487-in-_parse_headersraise-exceptionfatal-error-in-parsing-headersexception-fatal-error-in-parsing-headers\"></a> File &quot;/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x/tools/bindings-generator/generator.py&quot;, line 1799, in &lt;module&gt;<br />\nmain()<br />\nFile &quot;/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x/tools/bindings-generator/generator.py&quot;, line 1795, in main<br />\ngenerator.generate_code()<br />\nFile &quot;/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x/tools/bindings-generator/generator.py&quot;, line 1444, in generate_code<br />\nself._parse_headers()<br />\nFile &quot;/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x/tools/bindings-generator/generator.py&quot;, line 1487, in _parse_headers<br />\nraise Exception(&quot;Fatal error in parsing headers&quot;)<br />\nException: Fatal error in parsing headers</h2>\n<h2 id=\"generating-lua-bindings-fails\"><a class=\"markdownIt-Anchor\" href=\"#generating-lua-bindings-fails\"></a> Generating lua bindings fails.</h2>\n<p></code></pre><p>C++语法错误</p></p>\n<h5 id=\"错误三\"><a href=\"#错误三\" class=\"headerlink\" title=\"错误三\"></a>错误三</h5><pre><code>Generating bindings for cocos2dx_custom...\nUsing userconfig\n[(&#39;androidndkdir&#39;, &#39;/Users/iCocos/tools/android-ndk-r16b&#39;), (&#39;clangllvmdir&#39;, &#39;/Users/iCocos/tools/android-ndk-r16b/toolchains/llvm/prebuilt/darwin-x86_64&#39;), (&#39;gcc_toolchain_dir&#39;, &#39;/Users/iCocos/tools/android-ndk-r16b/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64&#39;), (&#39;cocosdir&#39;, &#39;/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x&#39;), (&#39;cxxgeneratordir&#39;, &#39;/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x/tools/bindings-generator&#39;), (&#39;extra_flags&#39;, &#39;&#39;)]\n<p>… Generating bindings for target lua</p>\n<p>… … Processing section cocos2dx_custom</p>\n<h2 id=\"traceback-most-recent-call-lastfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1799-in-modulemainfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1795-in-maingeneratorgenerate_codefile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1444-in-generate_codeself_parse_headersfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1478-in-_parse_headerstu-selfindexparseheader-selfclang_argsfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorclangcindexpy-line-2602-in-parseselffile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorclangcindexpy-line-2714-in-from_sourceraise-translationunitloaderrorerror-parsing-translation-unittranslationunitloaderror-error-parsing-translation-unit\"><a class=\"markdownIt-Anchor\" href=\"#traceback-most-recent-call-lastfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1799-in-modulemainfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1795-in-maingeneratorgenerate_codefile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1444-in-generate_codeself_parse_headersfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1478-in-_parse_headerstu-selfindexparseheader-selfclang_argsfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorclangcindexpy-line-2602-in-parseselffile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorclangcindexpy-line-2714-in-from_sourceraise-translationunitloaderrorerror-parsing-translation-unittranslationunitloaderror-error-parsing-translation-unit\"></a> Traceback (most recent call last):<br />\nFile &quot;/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x/tools/bindings-generator/generator.py&quot;, line 1799, in &lt;module&gt;<br />\nmain()<br />\nFile &quot;/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x/tools/bindings-generator/generator.py&quot;, line 1795, in main<br />\ngenerator.generate_code()<br />\nFile &quot;/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x/tools/bindings-generator/generator.py&quot;, line 1444, in generate_code<br />\nself._parse_headers()<br />\nFile &quot;/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x/tools/bindings-generator/generator.py&quot;, line 1478, in _parse_headers<br />\ntu = self.index.parse(header, self.clang_args)<br />\nFile &quot;/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x/tools/bindings-generator/clang/cindex.py&quot;, line 2602, in parse<br />\nself)<br />\nFile &quot;/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x/tools/bindings-generator/clang/cindex.py&quot;, line 2714, in from_source<br />\nraise TranslationUnitLoadError(&quot;Error parsing translation unit.&quot;)<br />\nTranslationUnitLoadError: Error parsing translation unit.</h2>\n<h2 id=\"generating-lua-bindings-fails-2\"><a class=\"markdownIt-Anchor\" href=\"#generating-lua-bindings-fails-2\"></a> Generating lua bindings fails.</h2>\n<p></code></pre><p>路径错误</p></p>\n<pre><code>#android_headers = -I%(androidndkdir)s/platforms/android-19/arch-arm/usr/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.7/libs/armeabi-v7a/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.7/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.8/libs/armeabi-v7a/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.8/include\nandroid_headers = -I%(androidndkdir)s/platforms/android-19/arch-arm/usr/lib -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi-v7a/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.9/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi-v7a/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.9/include\n</code></pre><h5 id=\"错误四\"><a href=\"#错误四\" class=\"headerlink\" title=\"错误四\"></a>错误四</h5><pre><code>====\n<p>Errors in parsing headers:</p>\n<ol>\n<li class=\"lvl-3\">\n<p>&lt;severity = Fatal,<br />\nlocation = &lt;SourceLocation file '/Users/iCocos/Desktop/cocos2d/Products/cocos2dx-demo/SingleLua/frameworks/cocos2d-x/cocos/platform/android/CCPlatformDefine-android.h', line 33, column 10&gt;,<br />\ndetails = &quot;'android/log.h' file not found&quot;&gt;<br />\n====<br />\n</code></pre><p>……</p></p>\n</li>\n</ol>\n<h3 id=\"提示成功\"><a href=\"#提示成功\" class=\"headerlink\" title=\"提示成功\"></a>提示成功</h3><pre><code>---------------------------------\nGenerating lua bindings succeeds.\n---------------------------------\n</code></pre><h4 id=\"拓展推荐\"><a href=\"#拓展推荐\" class=\"headerlink\" title=\"拓展推荐\"></a>拓展推荐</h4><ul>\n<li><p>lua： <a href=\"http://www.lua.org/\" target=\"_blank\" rel=\"noopener noreferrer\">http://www.lua.org/</a></p>\n<ul>\n<li>lua是个脚本语言，脚本语言！！就是脚本文件加解释器。之后你就可以看效果了。可是呢，lua如果正是靠自己独立完成点事情，那就是大材小用，需要和其他东西结合起来，比如C/C++.貌似主要也就是C/C++。</li>\n</ul>\n</li>\n<li><p>tolua++： <a href=\"http://www.codenix.com/~tolua/#news\" target=\"_blank\" rel=\"noopener noreferrer\">http://www.codenix.com/~tolua/#news</a></p>\n<ul>\n<li>tolua++：首先看名字“到、lua、++”，就是把其他语言（C/C++函数对象转化为lua能调用形式，++这里理解为增强版），有了这个工具，我们就可以快速的将我们现成的C/C++代码封装成Lua接口形式。</li>\n</ul>\n</li>\n<li><p>luajit： <a href=\"http://luajit.org/luajit.html\" target=\"_blank\" rel=\"noopener noreferrer\">http://luajit.org/luajit.html</a></p>\n<ul>\n<li>LuaJIT：LuaJIT is a Just-In-Time Compiler (JIT) for the  Lua programming language. 。。。。。。说了半天就一个lua的高效率版本。</li>\n</ul>\n</li>\n<li><p>lua for windows： <a href=\"http://luaforge.net/projects/luaforwindows/\" target=\"_blank\" rel=\"noopener noreferrer\">http://luaforge.net/projects/luaforwindows/</a></p>\n<ul>\n<li>lua for windows：lua在windows下的打包版本，除了最基本的lua解释器，还包括了可用于和C/C++集成开发的【动态链接库、静态链接库、头文件】、文本编辑器、常用的lua module，帮助说明文档。</li>\n</ul>\n</li>\n</ul>\n<h6 id=\"致谢：\"><a href=\"#致谢：\" class=\"headerlink\" title=\"致谢：\"></a>致谢：</h6><ul>\n<li><a href=\"https://blog.csdn.net/never_QH/article/details/45148835\" target=\"_blank\" rel=\"noopener noreferrer\">https://blog.csdn.net/never_QH/article/details/45148835</a></li>\n<li><a href=\"http://geekgaoyang.herokuapp.com/blog/2015/02/11/cocos2d-x-tutorial-of-binding-c-plus-plus-class-to-lua-usage/\" target=\"_blank\" rel=\"noopener noreferrer\">http://geekgaoyang.herokuapp.com/blog/2015/02/11/cocos2d-x-tutorial-of-binding-c-plus-plus-class-to-lua-usage/</a></li>\n<li><a href=\"https://www.cnblogs.com/ZhYQ-Note/p/5939783.html\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.cnblogs.com/ZhYQ-Note/p/5939783.html</a></li>\n<li><a href=\"http://www.bubuko.com/infodetail-1210197.html\" target=\"_blank\" rel=\"noopener noreferrer\">http://www.bubuko.com/infodetail-1210197.html</a></li>\n<li><a href=\"https://www.jianshu.com/p/9bd4d5518d53\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.jianshu.com/p/9bd4d5518d53</a></li>\n</ul>","text":"我们平时在开发cocos2dx lua游戏的时候的，会遇到这样的情况： 在c++层定义了一些类，我们需要将这些类导出给Lua来使用，从而完成在c++层实现起来容易的需求，这个时候就需要将整个类作为模块导出。 而Cocos2d-x正是采用的这种思想，将Cocos中的类导出供用户使用...","link":"","photos":[],"count_time":{"symbolsCount":"14k","symbolsTime":"12 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E6%8E%A8%E8%8D%90\"><span class=\"toc-text\">推荐</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#create-a-target-namespace-in-javascript-this-would-create-some-code-like-the-equiv-to-ns-ns\"><span class=\"toc-text\"> create a target namespace (in javascript, this would create some code like the equiv. to ns &#x3D; ns || {})</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#all-classes-will-be-embedded-in-that-namespace\"><span class=\"toc-text\"> all classes will be embedded in that namespace</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#-\"><span class=\"toc-text\"> --------- ?</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#--2\"><span class=\"toc-text\"> --------- ?</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#--3\"><span class=\"toc-text\"> --------- ?</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#-icocosdirsjsext-icocosdirsjsextsystem-icocosdirsjsextalipay-icocosdirsjsextvideo-icocosdirsjsextwebview-icocosdirsjsextumeng\"><span class=\"toc-text\"> -I%(cocosdir)s&#x2F;jsext -I%(cocosdir)s&#x2F;jsext&#x2F;system -I%(cocosdir)s&#x2F;jsext&#x2F;alipay  -I%(cocosdir)s&#x2F;jsext&#x2F;video -I%(cocosdir)s&#x2F;jsext&#x2F;webview -I%(cocosdir)s&#x2F;jsext&#x2F;umeng</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#extra-arguments-for-clang\"><span class=\"toc-text\"> extra arguments for clang</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#what-headers-to-parse-%E5%A4%B4%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84\"><span class=\"toc-text\"> what headers to parse 头文件路径</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#what-classes-to-produce-code-for-you-can-use-regular-expressions-here-when-testing-the-regular\"><span class=\"toc-text\"> what classes to produce code for. You can use regular expressions here. When testing the regular</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#expression-it-will-be-enclosed-in-34-like-this-34menu\"><span class=\"toc-text\"> expression, it will be enclosed in &quot;^&quot;, like this: &quot;^Menu*&quot;.</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#what-should-we-skip-in-the-format-classnamefunction-function\"><span class=\"toc-text\"> what should we skip? in the format ClassName::[function function]</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#classname-is-a-regular-expression-but-will-be-used-like-this-classname-functions-are-also\"><span class=\"toc-text\"> ClassName is a regular expression, but will be used like this: &quot;^ClassName$&quot; functions are also</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#regular-expressions-they-will-not-be-surrounded-by-if-you-want-to-skip-a-whole-class-just\"><span class=\"toc-text\"> regular expressions, they will not be surrounded by &quot;^$&quot;. If you want to skip a whole class, just</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#add-a-single-as-functions-see-bellow-for-several-examples-a-special-class-name-is-which\"><span class=\"toc-text\"> add a single &quot;&quot; as functions. See bellow for several examples. A special class name is &quot;&quot;, which</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#will-apply-to-all-class-names-this-is-a-convenience-wildcard-to-be-able-to-skip-similar-named\"><span class=\"toc-text\"> will apply to all class names. This is a convenience wildcard to be able to skip similar named</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#functions-from-all-classes\"><span class=\"toc-text\"> functions from all classes.</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#for-all-class-names-should-we-remove-something-when-registering-in-the-target-vm\"><span class=\"toc-text\"> for all class names, should we remove something when registering in the target VM?</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#classes-for-which-there-will-be-no-parent-lookup\"><span class=\"toc-text\"> classes for which there will be no &quot;parent&quot; lookup</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#base-classes-which-will-be-skipped-when-their-sub-classes-found-them\"><span class=\"toc-text\"> base classes which will be skipped when their sub-classes found them.</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#classes-that-create-no-constructor\"><span class=\"toc-text\"> classes that create no constructor</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#set-is-special-and-we-will-use-a-hand-written-constructor\"><span class=\"toc-text\"> Set is special and we will use a hand-written constructor</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#determining-whether-to-use-script-objectjs-object-to-control-the-lifecycle-of-nativecpp-object-or-the-other-way-around-supported-values-are-yes-or-no\"><span class=\"toc-text\"> Determining whether to use script object(js object) to control the lifecycle of native(cpp) object or the other way around. Supported values are &#39;yes&#39; or &#39;no&#39;.</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E8%AF%B4%E6%98%8E%E5%86%85%E5%AE%B9%EF%BC%9A\"><span class=\"toc-text\">说明内容：</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9C%9F%E9%97%B4%E9%81%87%E5%88%B0%E7%9A%84%E9%94%99%E8%AF%AF\"><span class=\"toc-text\">期间遇到的错误</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E9%94%99%E8%AF%AF%E4%B8%80\"><span class=\"toc-text\">错误一</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E9%94%99%E8%AF%AF%E4%BA%8C\"><span class=\"toc-text\">错误二</span></a></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#file-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1799-in-modulemainfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1795-in-maingeneratorgenerate_codefile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1444-in-generate_codeself_parse_headersfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1487-in-_parse_headersraise-exceptionfatal-error-in-parsing-headersexception-fatal-error-in-parsing-headers\"><span class=\"toc-text\"> File &quot;&#x2F;Users&#x2F;iCocos&#x2F;Desktop&#x2F;cocos2d&#x2F;Products&#x2F;cocos2dx-demo&#x2F;SingleLua&#x2F;frameworks&#x2F;cocos2d-x&#x2F;tools&#x2F;bindings-generator&#x2F;generator.py&quot;, line 1799, in &lt;module&gt;\nmain()\nFile &quot;&#x2F;Users&#x2F;iCocos&#x2F;Desktop&#x2F;cocos2d&#x2F;Products&#x2F;cocos2dx-demo&#x2F;SingleLua&#x2F;frameworks&#x2F;cocos2d-x&#x2F;tools&#x2F;bindings-generator&#x2F;generator.py&quot;, line 1795, in main\ngenerator.generate_code()\nFile &quot;&#x2F;Users&#x2F;iCocos&#x2F;Desktop&#x2F;cocos2d&#x2F;Products&#x2F;cocos2dx-demo&#x2F;SingleLua&#x2F;frameworks&#x2F;cocos2d-x&#x2F;tools&#x2F;bindings-generator&#x2F;generator.py&quot;, line 1444, in generate_code\nself._parse_headers()\nFile &quot;&#x2F;Users&#x2F;iCocos&#x2F;Desktop&#x2F;cocos2d&#x2F;Products&#x2F;cocos2dx-demo&#x2F;SingleLua&#x2F;frameworks&#x2F;cocos2d-x&#x2F;tools&#x2F;bindings-generator&#x2F;generator.py&quot;, line 1487, in _parse_headers\nraise Exception(&quot;Fatal error in parsing headers&quot;)\nException: Fatal error in parsing headers</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#generating-lua-bindings-fails\"><span class=\"toc-text\"> Generating lua bindings fails.</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E9%94%99%E8%AF%AF%E4%B8%89\"><span class=\"toc-text\">错误三</span></a></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#traceback-most-recent-call-lastfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1799-in-modulemainfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1795-in-maingeneratorgenerate_codefile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1444-in-generate_codeself_parse_headersfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorgeneratorpy-line-1478-in-_parse_headerstu-selfindexparseheader-selfclang_argsfile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorclangcindexpy-line-2602-in-parseselffile-usersicocosdesktopcocos2dproductscocos2dx-demosingleluaframeworkscocos2d-xtoolsbindings-generatorclangcindexpy-line-2714-in-from_sourceraise-translationunitloaderrorerror-parsing-translation-unittranslationunitloaderror-error-parsing-translation-unit\"><span class=\"toc-text\"> Traceback (most recent call last):\nFile &quot;&#x2F;Users&#x2F;iCocos&#x2F;Desktop&#x2F;cocos2d&#x2F;Products&#x2F;cocos2dx-demo&#x2F;SingleLua&#x2F;frameworks&#x2F;cocos2d-x&#x2F;tools&#x2F;bindings-generator&#x2F;generator.py&quot;, line 1799, in &lt;module&gt;\nmain()\nFile &quot;&#x2F;Users&#x2F;iCocos&#x2F;Desktop&#x2F;cocos2d&#x2F;Products&#x2F;cocos2dx-demo&#x2F;SingleLua&#x2F;frameworks&#x2F;cocos2d-x&#x2F;tools&#x2F;bindings-generator&#x2F;generator.py&quot;, line 1795, in main\ngenerator.generate_code()\nFile &quot;&#x2F;Users&#x2F;iCocos&#x2F;Desktop&#x2F;cocos2d&#x2F;Products&#x2F;cocos2dx-demo&#x2F;SingleLua&#x2F;frameworks&#x2F;cocos2d-x&#x2F;tools&#x2F;bindings-generator&#x2F;generator.py&quot;, line 1444, in generate_code\nself._parse_headers()\nFile &quot;&#x2F;Users&#x2F;iCocos&#x2F;Desktop&#x2F;cocos2d&#x2F;Products&#x2F;cocos2dx-demo&#x2F;SingleLua&#x2F;frameworks&#x2F;cocos2d-x&#x2F;tools&#x2F;bindings-generator&#x2F;generator.py&quot;, line 1478, in _parse_headers\ntu &#x3D; self.index.parse(header, self.clang_args)\nFile &quot;&#x2F;Users&#x2F;iCocos&#x2F;Desktop&#x2F;cocos2d&#x2F;Products&#x2F;cocos2dx-demo&#x2F;SingleLua&#x2F;frameworks&#x2F;cocos2d-x&#x2F;tools&#x2F;bindings-generator&#x2F;clang&#x2F;cindex.py&quot;, line 2602, in parse\nself)\nFile &quot;&#x2F;Users&#x2F;iCocos&#x2F;Desktop&#x2F;cocos2d&#x2F;Products&#x2F;cocos2dx-demo&#x2F;SingleLua&#x2F;frameworks&#x2F;cocos2d-x&#x2F;tools&#x2F;bindings-generator&#x2F;clang&#x2F;cindex.py&quot;, line 2714, in from_source\nraise TranslationUnitLoadError(&quot;Error parsing translation unit.&quot;)\nTranslationUnitLoadError: Error parsing translation unit.</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#generating-lua-bindings-fails-2\"><span class=\"toc-text\"> Generating lua bindings fails.</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E9%94%99%E8%AF%AF%E5%9B%9B\"><span class=\"toc-text\">错误四</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8F%90%E7%A4%BA%E6%88%90%E5%8A%9F\"><span class=\"toc-text\">提示成功</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8B%93%E5%B1%95%E6%8E%A8%E8%8D%90\"><span class=\"toc-text\">拓展推荐</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E8%87%B4%E8%B0%A2%EF%BC%9A\"><span class=\"toc-text\">致谢：</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Luajit反编译之探索记","uid":"22062178d617aba31a34cf58f7508d61","slug":"zl/2016-01-01-732_Luajit反编译之探索记","date":"2024-04-03T03:47:35.977Z","updated":"2024-04-03T03:47:35.982Z","comments":true,"path":"api/articles/zl/2016-01-01-732_Luajit反编译之探索记.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" 由于工作需求，要反编译一个luajit编译过的文件。百度反编译luajit，得到的信息是目前没有此类成熟的反编译器。所以，如果你用luajit编译了代码，基本上不用担心被别人破解（2015.12）。 虽然没有luaj反编译器，但是不代表反编译不可能。至少，人肉反编译是可以的，哈...","link":"","photos":[],"count_time":{"symbolsCount":"2.3k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Lua模块与包 · 花生肉泥","uid":"fa26efea87641e4d0b61bbcc2aa1b1af","slug":"zl/2016-01-01-730_Lua模块与包 · 花生肉泥","date":"2024-04-03T03:47:35.974Z","updated":"2024-04-03T03:47:35.975Z","comments":true,"path":"api/articles/zl/2016-01-01-730_Lua模块与包 · 花生肉泥.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"lua的模块是由变量，函数等已知元素组成的table，因此创建一个模块很简单，就是创建一个table，然后把需要导出的常量，函数放入其中，最后返回这个table就行。 例：123456789101112131415161718192021-- 定义一个名为module的模块mod...","link":"","photos":[],"count_time":{"symbolsCount":881,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}