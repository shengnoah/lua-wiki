{"title":"LUA","uid":"1af1fe55807c70bf78d46b38de92ac2d","slug":"zl/2016-01-01-641_LUA","date":"2024-04-03T03:47:35.863Z","updated":"2024-04-03T03:47:35.863Z","comments":true,"path":"api/articles/zl/2016-01-01-641_LUA.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<div class=\"article\">\n                <a class=\"clearlink\" href=\"15583468928554.html\">\n<pre><code>              &lt;/a&gt;&lt;div class=&quot;a-content&quot;&gt;&lt;a class=&quot;clearlink&quot; href=&quot;15583468928554.html&quot;&gt;\n                  \n                  &lt;/a&gt;&lt;div class=&quot;a-content-text&quot;&gt;&lt;a class=&quot;clearlink&quot; href=&quot;15583468928554.html&quot;&gt;\n                    \n                    \t&lt;p&gt;kong作为非java全家桶的一员，在非java领域的网关系统中得到了广泛的应用&lt;/p&gt;\n</code></pre>\n<h2 id=\"toc_0\">使用docker一键启动kong</h2>\n<p></a><p><a class=\"clearlink\" href=\"15583468928554.html\">参考项目：</a><a href=\"https://github.com/Kong/docker-kong/tree/master/compose\"><a href=\"https://github.com/Kong/docker-kong/tree/master/compose\">https://github.com/Kong/docker-kong/tree/master/compose</a></a></p></p>\n<p>启动过程如下：</p>\n<pre><code class=\"language-shell\">git clone https://github.com/Kong/docker-kong.git\ncd docker-kong/compose\ndocker-compose up -d\n</code></pre>\n<p>查看操作效果：<br/>\n<img src=\"https://neatlifecoco.com/media/15583468928554/15583471408158.jpg\" alt=\"\"/></p>\n<p><img src=\"https://neatlifecoco.com/media/15583468928554/15583471833754.jpg\" alt=\"\"/></p>\n<p>可以看到kong监控了4个端口</p>\n<pre><code>                  &lt;/div&gt;\n              &lt;/div&gt;\n            \n            &lt;div class=&quot;read-more clearfix&quot;&gt;\n              &lt;div class=&quot;more-left left&quot;&gt;\n               &lt;a href=&quot;15583468928554.html&quot;&gt;Read more&lt;/a&gt;   \n                &lt;span class=&quot;date&quot;&gt;2019/5/20&lt;/span&gt;\n                &lt;span&gt;posted in &lt;/span&gt; \n      \t\t\t\t  \n      \t\t\t\t\t    &lt;span class=&quot;posted-in&quot;&gt;&lt;a href=&quot;lua.html&quot;&gt;LUA&lt;/a&gt;&lt;/span&gt;\n      \t\t\t\t  \n      \t\t\t\t\t    &lt;span class=&quot;posted-in&quot;&gt;&lt;a href=&quot;openresty.html&quot;&gt;OpenResty&lt;/a&gt;&lt;/span&gt;\n      \t\t\t\t   \n              &lt;/div&gt;\n              &lt;div class=&quot;more-right right&quot;&gt;\n              &lt;span class=&quot;comments&quot;&gt;\n                  \n\n                   \n              &lt;/span&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n    \n\t\t&lt;div class=&quot;article&quot;&gt;\n            &lt;a class=&quot;clearlink&quot; href=&quot;15582846518332.html&quot;&gt;\n            \n              &lt;h1&gt;lua开发注意事项&lt;/h1&gt;\n              &lt;div class=&quot;a-content&quot;&gt;\n                  \n                  &lt;div class=&quot;a-content-text&quot;&gt;\n                    \n                    \t&lt;p&gt;lua中目前只有false和nil是假，空table，空字符串，0是真&lt;br/&gt;\n</code></pre>\n<p><img src=\"https://neatlifecoco.com/media/15582846518332/image-20180604144329529.png\" alt=\"image-20180604144329529\"/></p></p>\n<p>false转为数字为nil<br/>\n<img src=\"https://neatlifecoco.com/media/15582846518332/image-20180604144254531.png\" alt=\"image-20180604144254531\"/></p>\n<p>字符串连接符：..<br/>\n<img src=\"https://neatlifecoco.com/media/15582846518332/image-20180604144422758.png\" alt=\"image-20180604144422758\"/></p>\n<pre><code>                  &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/a&gt;\n            &lt;div class=&quot;read-more clearfix&quot;&gt;\n              &lt;div class=&quot;more-left left&quot;&gt;\n              \n                &lt;span class=&quot;date&quot;&gt;2018/5/20&lt;/span&gt;\n                &lt;span&gt;posted in &lt;/span&gt; \n      \t\t\t\t  \n      \t\t\t\t\t    &lt;span class=&quot;posted-in&quot;&gt;&lt;a href=&quot;lua.html&quot;&gt;LUA&lt;/a&gt;&lt;/span&gt;\n      \t\t\t\t   \n              &lt;/div&gt;\n              &lt;div class=&quot;more-right right&quot;&gt;\n              &lt;span class=&quot;comments&quot;&gt;\n                  \n\n                   \n              &lt;/span&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n    \n\t\t&lt;div class=&quot;article&quot;&gt;\n            &lt;a class=&quot;clearlink&quot; href=&quot;15582844238379.html&quot;&gt;\n            \n              &lt;h1&gt;灰度发布&lt;/h1&gt;\n              &lt;div class=&quot;a-content&quot;&gt;\n                  \n                  &lt;div class=&quot;a-content-text&quot;&gt;\n                    \n                    \t&lt;pre&gt;&lt;code class=&quot;language-sql&quot;&gt;CREATE TABLE `gray` (\n</code></pre>\n<p><code>id</code> int(10) unsigned NOT NULL AUTO_INCREMENT,<br />\n<code>project</code> varchar(45) NOT NULL,<br />\n<code>shopId</code> text,<br />\n<code>status</code> tinyint(1) unsigned NOT NULL DEFAULT '1',<br />\n<code>created_at</code> timestamp NULL DEFAULT NULL,<br />\n<code>updated_at</code> timestamp NULL DEFAULT NULL,<br />\nPRIMARY KEY (<code>id</code>)<br />\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4;<br />\n</code></pre></p>\n<pre><code class=\"language-sql\">INSERT INTO `cpx_prod`.`gray` (`id`, `project`, `shopId`, `status`, `created_at`, `updated_at`) VALUES (&#39;2&#39;, &#39;kufang&#39;, &#39;1804&#39;, &#39;1&#39;, &#39;2018-05-28 17:04:25&#39;, &#39;2018-05-28 17:04:25&#39;);\n</code></pre>\n<p>灰度开发方案</p>\n<ol>\n<li>设计灰度表结构和存储位置</li>\n<li>设计redis键，选择灰度发布使用的redis服务器</li>\n<li>在ops平台上开发店铺灰度灰度状态管理页面</li>\n<li>使用ops现有的指定发布功能发布灰度代码</li>\n<li>nginx lua根据店铺的灰度状态走不同的项目路径</li>\n</ol>\n<p>灰度缓存更新</p>\n<ol>\n<li>ops灰度系统设置了店铺灰度后更新灰度缓存</li>\n<li>lua检测到redis里没有缓存key，从mysql中读取店铺灰度数据，缓存到redis中，redis使用一个key保存所有灰度店铺的id，使用json序列化</li>\n</ol>\n<p>灰度代码发布</p>\n<ol>\n<li>灰度代码发布复用ops上的指定发布</li>\n</ol>\n<pre><code>                  &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/a&gt;\n            &lt;div class=&quot;read-more clearfix&quot;&gt;\n              &lt;div class=&quot;more-left left&quot;&gt;\n               &lt;a href=&quot;15582844238379.html&quot;&gt;Read more&lt;/a&gt;   \n                &lt;span class=&quot;date&quot;&gt;2018/5/20&lt;/span&gt;\n                &lt;span&gt;posted in &lt;/span&gt; \n      \t\t\t\t  \n      \t\t\t\t\t    &lt;span class=&quot;posted-in&quot;&gt;&lt;a href=&quot;ops.html&quot;&gt;OPS&lt;/a&gt;&lt;/span&gt;\n      \t\t\t\t  \n      \t\t\t\t\t    &lt;span class=&quot;posted-in&quot;&gt;&lt;a href=&quot;lua.html&quot;&gt;LUA&lt;/a&gt;&lt;/span&gt;\n      \t\t\t\t  \n      \t\t\t\t\t    &lt;span class=&quot;posted-in&quot;&gt;&lt;a href=&quot;openresty.html&quot;&gt;OpenResty&lt;/a&gt;&lt;/span&gt;\n      \t\t\t\t   \n              &lt;/div&gt;\n              &lt;div class=&quot;more-right right&quot;&gt;\n              &lt;span class=&quot;comments&quot;&gt;\n                  \n\n                   \n              &lt;/span&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n    \n          \n\n\n\t\t&lt;div class=&quot;row&quot;&gt;\n\t\t  &lt;div class=&quot;large-6 columns&quot;&gt;\n\t\t  &lt;p class=&quot;text-left&quot; style=&quot;padding-top:25px;&quot;&gt;\n\t\t   \n\t\t  &lt;/p&gt;\n\t\t  &lt;/div&gt;\n\t\t  &lt;div class=&quot;large-6 columns&quot;&gt;\n\t\t&lt;p class=&quot;text-right&quot; style=&quot;padding-top:25px;&quot;&gt;\n\t\t\n\t\t&lt;/p&gt;\n\t\t  &lt;/div&gt;\n\t\t&lt;/div&gt;\n</code></pre>\n","text":" &lt;/a&gt;&lt;div class=&quot;a-content&quot;&gt;&lt;a class=&quot;clearlink&quot; href=&quot;15583468928554.html&quot;&gt; &lt;/a&gt;&lt;d...","link":"","photos":[],"count_time":{"symbolsCount":"5.6k","symbolsTime":"5 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#toc_0\"><span class=\"toc-text\">使用docker一键启动kong</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"逆向分析Lua注入类型外挂","uid":"c82dde1f5a4311b882f0704493a4f2b5","slug":"zl/2016-01-01-644_逆向分析Lua注入类型外挂","date":"2024-04-03T03:47:35.864Z","updated":"2024-04-03T03:47:35.864Z","comments":true,"path":"api/articles/zl/2016-01-01-644_逆向分析Lua注入类型外挂.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" &lt;h2 id=&quot;相关&quot;&gt;&lt;a href=&quot;#相关&quot; class=&quot;headerlink&quot; title=&quot;相关&quot;&gt;&lt;/a&gt;相关&lt;/h2&gt;&lt;p&gt...","link":"","photos":[],"count_time":{"symbolsCount":"20k","symbolsTime":"18 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Lua之面向对象个人总结","uid":"852c964e0ebf9776baeac392aedb9bd9","slug":"zl/2016-01-01-642_Lua之面向对象个人总结","date":"2024-04-03T03:47:35.863Z","updated":"2024-04-03T03:47:35.863Z","comments":true,"path":"api/articles/zl/2016-01-01-642_Lua之面向对象个人总结.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" 面向对象的三个特征：封装、继承和多态。Lua并没有类，没有直接实现面向对象的方法。不过Lua的Table，有内部对象和内部方法。Lua的面向对象主要是通过Table来模拟面向对象。 封装在Lua之Table学习中，曾以Computer为例子，介绍了Table 也是可以有自己内部...","link":"","photos":[],"count_time":{"symbolsCount":"7.5k","symbolsTime":"7 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}