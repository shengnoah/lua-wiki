{"title":"Lua 学习 chapter3 数值","uid":"c3980be2033a6a0bbe8461b97ee16933","slug":"zl/2016-01-01-806_Lua 学习 chapter3 数值 ","date":"2024-04-03T03:47:36.051Z","updated":"2024-04-03T03:47:36.051Z","comments":true,"path":"api/articles/zl/2016-01-01-806_Lua 学习 chapter3 数值 .json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h3 id=\"目录\">目录</h3>\n<ol>\n  <li>算术计算</li>\n  <li>关系运算</li>\n  <li>数学库</li>\n  <li>表示范围</li>\n  <li>运算符的优先级</li>\n  <li>练习</li>\n</ol>\n<blockquote>\n  <p>To be honest, i think what you have compare to others expection has a long way.</p>\n</blockquote>\n<h2 id=\"算术计算\">算术计算</h2>\n<p>在lua中，除法运算操作的永远是浮点数而且产生的结果也是浮点数。</p>\n<p>在新的版本中针对于整数除法引入了一个floor除法的新运算符‘//’，floor除法会对得到的上进行向下取整，从而保证结果是一个整数。</p>\n<p>如果操作数是整形类型结果就是整型类型，如果操作数是浮点类型那么结果就是浮点类型（其值是个整数），类似的取模运算(%)也是一样的。</p>\n<h2 id=\"关系运算\">关系运算</h2>\n<p>Lua提供了下列的关系运算：</p>\n<p>&lt; &gt; &lt;= &gt;= == ~=  这个关系运算的返回值都是Boolean类型的。</p>\n<h2 id=\"数学库\">数学库</h2>\n<p>Lua提供了标准的数学库 math，包含三角函数，指数，取整，最大最小，用于生成伪随机的random函数以及pi和huge(最大可表示的值)。</p>\n<h3 id=\"随机数发生器\">随机数发生器</h3>\n<p>lua中随机数共有三种调用方式：</p>\n<ol>\n  <li>不带参：随机返回一个伪随机的[0,1)的数</li>\n  <li>带一个整型参：返回一个[1,n]的伪随机整数</li>\n  <li>带两个整型参：返回一个[n,m]的伪随机整数</li>\n</ol>\n<p>函数randomseed用于设置伪随机数发生器的种子，该函数的唯一参数就是数值类型的种子。</p>\n<p>在一个程序启动时，系统固定使用1为随机数发生器。如果不设置其它种子，每次系统启动都会产生一样的随机数。</p>\n<p>所以为了解决这个问题通常使用<strong>math.randomseed(os.time())</strong> 来作为种子。</p>\n<h3 id=\"取整函数\">取整函数</h3>\n<ol>\n  <li>floor：向下取整</li>\n  <li>ceil：向上取整</li>\n  <li>modf：向0取整</li>\n</ol>\n<p>就近取整：</p>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><table class=\"rouge-table\"><tbody><tr><td class=\"rouge-gutter gl\"><pre class=\"lineno\">1\n2\n3\n4\n5\n6\n7\n8\n</pre></td><td class=\"rouge-code\"><pre><span class=\"k\">function</span> <span class=\"nf\">round</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n\t<span class=\"kd\">local</span> <span class=\"n\">f</span> <span class=\"o\">=</span> <span class=\"nb\">math.floor</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n\t<span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">f</span> <span class=\"o\">==</span> <span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"ow\">or</span> <span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"o\">%</span> <span class=\"mi\">2</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">5</span><span class=\"p\">)</span>  <span class=\"k\">then</span> \n\t\t<span class=\"k\">return</span> <span class=\"n\">x</span>\n\t<span class=\"k\">else</span> \n\t\t<span class=\"k\">return</span> <span class=\"nb\">math.floor</span><span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"o\">+</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">5</span><span class=\"p\">)</span>\n\t<span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</pre></td></tr></tbody></table></code></pre></div></div>\n<h2 id=\"表示范围\">表示范围</h2>\n<p>lua使用64个比特位来存储整型值，其最大值为2^63 - 1。</p>\n<p>我们可以简单的使用整数加上0.0来转换成浮点数。</p>\n<p>在lua的管理中，超过2^53之后这样转换就会失去精度。</p>\n<p>特别是在进行浮点数的运算过程中，可能会导致计算的不精确。例如：</p>\n<p>12.7 -20 + 7.3，即便使用双精度来表示结果也不是0，因为12.7和7.3的二进制表示不是有限的小数。</p>\n<h2 id=\"运算符的优先级\">运算符的优先级</h2>\n<ol>\n  <li></li>\n  <li>一元运算符 （- # ~ not）</li>\n  <li>/  //  %  （//  floor除）</li>\n  <li>\n    <ul>\n      <li>-</li>\n    </ul>\n  </li>\n  <li>..（连接）</li>\n  <li>« » （按位移位）</li>\n  <li>&amp;</li>\n  <li>~</li>\n  <li>\n    <table>\n      <tbody>\n        <tr>\n        </tr>\n      </tbody>\n    </table>\n  </li>\n  <li>&lt; &gt; &lt;= &gt;= ~= ==</li>\n  <li>and or</li>\n</ol>\n<h2 id=\"练习\">练习</h2>\n<p>乘2，就是左移一位。</p>\n<p>使用math.random生成正太分布的为随机数发生器</p>\n<p>采用 Box-Muller 变换可以将均匀分布转化成正态分布</p>\n<p>Z=R<em>cosθ 或 Z=R</em>sinθ （其中 R = sqrt(-2<em>ln(u1)), θ = 2</em>π*u2，u1和u2是（0，1]的均匀分布随机数，得到的Z就是标准正态分布随机数。</p>\n<ol>\n  <li>\n    <p>生成均匀分布的随机数，math.random 函数生成的是 [ 0,1 ) 之间的随机数，只需在生成 0 时改为生成 1 。</p>\n  </li>\n  <li>\n    <p>通过Box-Muller公式得到服从正态分布的随机数</p>\n  </li>\n</ol>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><table class=\"rouge-table\"><tbody><tr><td class=\"rouge-gutter gl\"><pre class=\"lineno\">1\n2\n3\n4\n</pre></td><td class=\"rouge-code\"><pre><span class=\"kd\">local</span> <span class=\"n\">rand1</span><span class=\"p\">,</span><span class=\"n\">rand2</span><span class=\"o\">=</span><span class=\"nb\">math.random</span><span class=\"p\">(),</span><span class=\"nb\">math.random</span><span class=\"p\">()</span>\n  <span class=\"n\">rand1</span><span class=\"o\">=</span><span class=\"n\">rand1</span><span class=\"o\">==</span><span class=\"mi\">0</span> <span class=\"ow\">and</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"ow\">or</span> <span class=\"p\">(</span><span class=\"n\">rand1</span><span class=\"p\">)</span>\n  <span class=\"n\">rand2</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"n\">rand2</span><span class=\"o\">==</span><span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"ow\">and</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"ow\">or</span> <span class=\"p\">(</span><span class=\"n\">rand2</span><span class=\"p\">)</span>\n  <span class=\"k\">return</span> <span class=\"nb\">math.sqrt</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">2</span><span class=\"p\">.</span><span class=\"mi\">0</span><span class=\"o\">*</span><span class=\"p\">(</span><span class=\"nb\">math.log</span><span class=\"p\">(</span><span class=\"n\">rand1</span><span class=\"p\">)))</span><span class=\"o\">*</span><span class=\"nb\">math.sin</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"o\">*</span><span class=\"nb\">math.pi</span><span class=\"o\">*</span><span class=\"n\">rand2</span><span class=\"p\">);</span>\t\n</pre></td></tr></tbody></table></code></pre></div></div>\n<pre><code>            &lt;hr style=&quot;visibility: hidden;&quot;/&gt;\n            \n            &lt;hr style=&quot;visibility: hidden;&quot;/&gt;\n</code></pre>\n","text":"目录 算术计算 关系运算 数学库 表示范围 运算符的优先级 练习 To be honest, i think what you have compare to others expection has a long way. 算术计算 在lua中，除法运算操作的永远是浮点数而且产...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">目录</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%AE%97%E6%9C%AF%E8%AE%A1%E7%AE%97\"><span class=\"toc-text\">算术计算</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97\"><span class=\"toc-text\">关系运算</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%95%B0%E5%AD%A6%E5%BA%93\"><span class=\"toc-text\">数学库</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%9A%8F%E6%9C%BA%E6%95%B0%E5%8F%91%E7%94%9F%E5%99%A8\"><span class=\"toc-text\">随机数发生器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8F%96%E6%95%B4%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">取整函数</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A1%A8%E7%A4%BA%E8%8C%83%E5%9B%B4\"><span class=\"toc-text\">表示范围</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%BF%90%E7%AE%97%E7%AC%A6%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7\"><span class=\"toc-text\">运算符的优先级</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%BB%83%E4%B9%A0\"><span class=\"toc-text\">练习</span></a>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Lua 中的随机数","uid":"73feeba3e1d1ac59d590841c2286442d","slug":"zl/2016-01-01-808_Lua 中的随机数 ","date":"2024-04-03T03:47:36.052Z","updated":"2024-04-03T03:47:36.055Z","comments":true,"path":"api/articles/zl/2016-01-01-808_Lua 中的随机数 .json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"Lua 随机数算法用的是 libc 中的 rand, 也就是 LCG。然而这个算法的随机性一般。尤其是在一些平台上，当随机种子变化非常小的时候，产生的随机数变化也非常小。这样再经过 Lua 的精度取舍之后，产生的随机序列仍然很相似（伪随机的结果变成可预知性）。 lua-l 上也讨...","link":"","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"NLP论文学习笔记（一）——Mining opinions from instructor evaluation reviews a deep learning approach","uid":"939a072e8e43c80556879513a6abfc8b","slug":"zl/2016-01-01-804_NLP论文学习笔记（一）——Mining opinions from instructor eval","date":"2024-04-03T03:47:36.050Z","updated":"2024-04-03T03:47:36.050Z","comments":true,"path":"api/articles/zl/2016-01-01-804_NLP论文学习笔记（一）——Mining opinions from instructor eval.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"论文时间：2019.5一，论文摘要Mining opinions from instructor evaluation reviews a deep learning approach，即通过深度学习的方法来挖掘评教文本中的情感。Student evaluations of te...","link":"","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}