{"title":"Lua的win和linux环境搭建","uid":"7fe1dad0ab07c1159a9c6ba848add36c","slug":"zl/2016-01-01-809_Lua的win和linux环境搭建","date":"2024-04-03T03:47:36.055Z","updated":"2024-04-03T03:47:36.056Z","comments":true,"path":"api/articles/zl/2016-01-01-809_Lua的win和linux环境搭建.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<div class=\"post-nav\">\n          <div class=\"post-nav-next post-nav-item\">\n<pre><code>          &lt;a href=&quot;/2015/11/03/Linux常用命令笔记整理之tcpdump/&quot; rel=&quot;next&quot; title=&quot;Linux常用命令笔记整理之tcpdump&quot;&gt;\n            &lt;i class=&quot;fa fa-chevron-left&quot;&gt;&lt;/i&gt; \n            &lt;p class=&quot;post-nav-pre-next-title&quot;&gt;\n              Linux常用命令笔记整理之tcpdump\n            &lt;/p&gt; \n          &lt;/a&gt;\n        \n      &lt;/div&gt;\n\n      &lt;span class=&quot;post-nav-divider&quot;&gt;&lt;/span&gt;\n\n      &lt;div class=&quot;post-nav-prev post-nav-item&quot;&gt;\n        \n          &lt;a href=&quot;/2015/11/10/kmp/&quot; rel=&quot;prev&quot; title=&quot;KMP查找子字符串&quot;&gt;\n          &lt;p class=&quot;post-nav-pre-next-title&quot;&gt;\n              KMP查找子字符串\n          &lt;/p&gt; \n          &lt;i class=&quot;fa fa-chevron-right&quot;&gt;&lt;/i&gt;\n          &lt;/a&gt;\n        \n      &lt;/div&gt;\n    &lt;/div&gt;\n  \n\n  \n  \n\n  \n  \n\n  \n    &lt;p&gt;&lt;strong&gt;. . .&lt;/strong&gt;&lt;/p&gt;\n</code></pre>\n<h2 id=\"测试文件\"><a href=\"#测试文件\" class=\"headerlink\" title=\"测试文件\"></a>测试文件</h2><figure class=\"highlight c++\"><figcaption><span>a.cpp</span></figcaption><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/><span class=\"line\">11</span><br/><span class=\"line\">12</span><br/><span class=\"line\">13</span><br/><span class=\"line\">14</span><br/><span class=\"line\">15</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"string\">&#34;C&#34;</span> {</span><br/><span class=\"line\">    </span><br/><span class=\"line\">    <span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&#34;lualib.h&#34;</span></span></span><br/><span class=\"line\">    <span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&#34;lauxlib.h&#34;</span></span></span><br/><span class=\"line\">};  </span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"comment\">//#include &#34;lua.h&#34;</span></span><br/><span class=\"line\"><span class=\"comment\">//#include &#34;lauxlib.h&#34;</span></span><br/><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"params\">(<span class=\"keyword\">int</span> argc, <span class=\"keyword\">char</span> **argv)</span></span></span><br/><span class=\"line\"><span class=\"function\"></span>{</span><br/><span class=\"line\">    lua_State *L = luaL_newstate();</span><br/><span class=\"line\">    luaL_openlibs(L);</span><br/><span class=\"line\">    luaL_dostring(L, <span class=\"string\">&#34;print(&#39;hello, &#39;.._VERSION)&#34;</span>);</span><br/><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br/><span class=\"line\">}</span><br/></pre></td></tr></tbody></table></figure>\n<h2 id=\"lua5-1\"><a href=\"#lua5-1\" class=\"headerlink\" title=\"lua5.1\"></a>lua5.1</h2><pre><code>sudo apt-get install lua5.1\nsudo apt-get install liblua5.1-0-dev</code></pre><p>编译命令 : <code>gcc a.cpp -I/usr/include/lua5.1 -llua5.1 -lm</code></p>\n<p>生成 a.out 之后, 运行 a.out, 若打印 <code>hello, Lua 5.1</code> 即为安装成功.</p>\n<h2 id=\"lua5-3\"><a href=\"#lua5-3\" class=\"headerlink\" title=\"lua5.3\"></a>lua5.3</h2><pre><code>sudo apt-get install libreadline-dev\nsudo curl -R -O http://www.lua.org/ftp/lua-5.3.0.tar.gz\nsudo tar zxf lua-5.3.0.tar.gz\nsudo cd lua-5.3.0\nsudo make linux test\nsudo make install</code></pre><p>编译命令 : <code>g++ a.cpp -llua -ldl</code></p>\n<p>生成 a.out 之后, 运行 a.out, 若打印 <code>hello, Lua 5.3</code> 即为安装成功.</p>\n<h2 id=\"luajit\"><a href=\"#luajit\" class=\"headerlink\" title=\"luajit\"></a>luajit</h2>\n<p>//下载<br/>git clone <a href=\"http://luajit.org/git/luajit-2.0.git\" target=\"_blank\" rel=\"noopener noreferrer\">http://luajit.org/git/luajit-2.0.git</a><br/>tar zxf LuaJIT-2.0.4.tar.gz<br/>cd LuaJIT-2.0.4<br/>//linux下编译<br/>make<br/>//安装<br/>sudo make install<br/>luajit -v<br/>出现版权信息即为安装成功。</p>\n<h2 id=\"luarocks\"><a href=\"#luarocks\" class=\"headerlink\" title=\"luarocks\"></a>luarocks</h2><p>到luarocks的官网下载luarocks, 直接apt-get的已经太老旧, 默认的配置文件有错</p>\n<p>luarocks 命令：</p>\n<ul>\n<li><p>luarocks  build     XXX     建立/编译一个包</p>\n</li>\n<li><p>luarocks  download XXX   从rocks服务器下载一个指定文件或者包</p>\n</li>\n<li><p>luarocks  help                luarocks帮助</p>\n</li>\n<li><p>luarocks  install     XXX    安装包</p>\n</li>\n<li><p>luarocks  make      XXX    下载并编译包</p>\n</li>\n<li><p>luarocks  pack                打包</p>\n</li>\n<li><p>luarocks  list                   显示已安装的列表</p>\n</li>\n<li><p>luarocks  path                返回包地址</p>\n</li>\n<li><p>luarocks  remove  XXX     删除</p>\n</li>\n<li><p>luarocks  search               Query the LuaRocks repositories</p>\n</li>\n<li><p>luarocks    show                    Shows information about an installed rock.</p>\n</li>\n<li><p>luarocks    unpack                 Unpack the contents of a rock.</p>\n</li>\n</ul>\n<h2 id=\"Install-lua-socket\"><a href=\"#Install-lua-socket\" class=\"headerlink\" title=\"Install lua-socket\"></a>Install lua-socket</h2><p>如果有安装 Lua 模块的安装和部署工具 – luarocks，</p>\n<p>那么一条指令就能安装部署好 LuaSocket： </p>\n<p>luarocks install luasocket</p>\n<h2 id=\"关于json\"><a href=\"#关于json\" class=\"headerlink\" title=\"关于json\"></a>关于json</h2><p>如果想安装一个解析 JSON(JavaScript Object Notation) 的模块，<br/>可以用 search 参数先搜索一下有什么可安装的解析 JSON 的模块：</p>\n<p>luarocks search json</p>\n<p>假设想安装一个名为 json4lua 模块，可以用 install 参数来安装：</p>\n<p>luarocks install json4lua</p>\n<h1 id=\"Windows环境\"><a href=\"#Windows环境\" class=\"headerlink\" title=\"Windows环境\"></a>Windows环境</h1><p>首先要安装一个微软依赖 : <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=3387&amp;fa43d42b-25b5-4a42-fe9b-1634f450f5ee=True\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.microsoft.com/en-us/download/details.aspx?id=3387&amp;fa43d42b-25b5-4a42-fe9b-1634f450f5ee=True</a></p>\n<p>然后安装lua for windows : </p>\n<ul>\n<li><a href=\"http://www.runoob.com/lua/lua-environment.html\" target=\"_blank\" rel=\"noopener noreferrer\">http://www.runoob.com/lua/lua-environment.html</a> </li>\n<li>或 <a href=\"http://luaforge.net/projects/luaforwindows/\" target=\"_blank\" rel=\"noopener noreferrer\">http://luaforge.net/projects/luaforwindows/</a></li>\n</ul>","text":" &lt;a href=&quot;/2015/11/03/Linux常用命令笔记整理之tcpdump/&quot; rel=&quot;next&quot; title=&quot;Linux常用命令笔记整理之tcpdump&quot;&gt; &lt;i class=&quo...","link":"","photos":[],"count_time":{"symbolsCount":"3k","symbolsTime":"3 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B5%8B%E8%AF%95%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">测试文件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#lua5-1\"><span class=\"toc-text\">lua5.1</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#lua5-3\"><span class=\"toc-text\">lua5.3</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#luajit\"><span class=\"toc-text\">luajit</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#luarocks\"><span class=\"toc-text\">luarocks</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Install-lua-socket\"><span class=\"toc-text\">Install lua-socket</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%B3%E4%BA%8Ejson\"><span class=\"toc-text\">关于json</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Windows%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">Windows环境</span></a>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Programming in Lua(Thrid Edition)笔记","uid":"a502732b8dc58224e972b6c53538b8c4","slug":"zl/2016-01-01-80_Programming in Lua(Thrid Edition)笔记","date":"2024-04-03T03:47:36.056Z","updated":"2024-04-03T03:47:36.057Z","comments":true,"path":"api/articles/zl/2016-01-01-80_Programming in Lua(Thrid Edition)笔记.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"5 Functions 当函数参数为literal string或table constructor时，可以不加括号 12345print &#34;Hello world&#34;dofile &#39;a.lua&#39;print [[a multi-line messag...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"evaluate(input_sentence)","uid":"a7684d8db99f4a04b496679622ad1b05","slug":"zl/2016-01-01-807_evaluate(input_sentence)","date":"2024-04-03T03:47:36.052Z","updated":"2024-04-03T03:47:36.052Z","comments":true,"path":"api/articles/zl/2016-01-01-807_evaluate(input_sentence).json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"详细的记录 evaluate函数的实现。解决报错 12345678910111213141516171819ValueError Traceback (most recent call last)&lt;ipython-input-44-2ec1176683f0&gt; in &...","link":"","photos":[],"count_time":{"symbolsCount":"3.7k","symbolsTime":"3 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}