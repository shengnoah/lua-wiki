{"title":"lua学习笔记（一）","uid":"e8058bc58a0d4fd63c47f20b7d5cde34","slug":"zl/2016-01-01-253_lua学习笔记（一）","date":"2024-04-03T03:47:33.119Z","updated":"2024-04-03T03:47:33.119Z","comments":true,"path":"api/articles/zl/2016-01-01-253_lua学习笔记（一）.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<pre><code>    &lt;h2 id=&quot;注释&quot;&gt;&lt;a href=&quot;https://Jaxes.github.io/#%E6%B3%A8%E9%87%8A&quot; class=&quot;headerlink&quot; title=&quot;注释&quot;&gt;&lt;/a&gt;注释&lt;/h2&gt;&lt;figure class=&quot;highlight lua&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- 等号数量只要两边一致即可&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;--[=[多行注释]=]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;\n</code></pre>\n<h2 id=\"标识符\"><a href=\"https://Jaxes.github.io/#%E6%A0%87%E8%AF%86%E7%AC%A6\" class=\"headerlink\" title=\"标识符\"></a>标识符</h2><p>A-Z、a-z、下划线_开头后加上0个或多个字母、下划线、数字（0-9）</p>\n<p><strong>注意</strong>：最好不要使用下划线加大写字母，Lua保留字也是如此</p>\n<p>不允许特殊字符@、$、%定义标识符</p>\n<p>区分大小写</p>\n<h2 id=\"关键词\"><a href=\"https://Jaxes.github.io/#%E5%85%B3%E9%94%AE%E8%AF%8D\" class=\"headerlink\" title=\"关键词\"></a>关键词</h2><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- Lua的保留关键字</span></span><br><span class=\"line\"><span class=\"keyword\">and</span> <span class=\"keyword\">break</span> <span class=\"keyword\">do</span> <span class=\"keyword\">else</span> <span class=\"keyword\">elseif</span> <span class=\"keyword\">end</span> <span class=\"literal\">false</span> <span class=\"keyword\">for</span> <span class=\"function\"><span class=\"keyword\">function</span>   <span class=\"title\">local</span> <span class=\"title\">nil</span> <span class=\"title\">not</span> <span class=\"title\">or</span> <span class=\"title\">repeat</span> <span class=\"title\">return</span> <span class=\"title\">then</span> <span class=\"title\">true</span> <span class=\"title\">until</span> <span class=\"title\">while</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"comment\">-- 一般约定，以下划线开头连接一串大写字母的名字（如_VERSION）被保留用于Lua内部全局变量</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">_VERSION</span></span></span><br></pre></td></tr></table></figure>\n<h2 id=\"全局变量\"><a href=\"https://Jaxes.github.io/#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F\" class=\"headerlink\" title=\"全局变量\"></a>全局变量</h2><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">--[[</span></span><br><span class=\"line\"><span class=\"comment\">默认情况下变量认为是全局的，不需要声明，赋值后即创建了这个全局变量，访问一个没有初始化的全局变量不会出错，会返回nil</span></span><br><span class=\"line\"><span class=\"comment\">--]]</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(b) <span class=\"comment\">-- 返回nil</span></span><br><span class=\"line\">b=<span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(b) <span class=\"comment\">-- 返回10</span></span><br><span class=\"line\"><span class=\"comment\">-- 如果要删除一个全局变量，只需要将变量赋值为nil</span></span><br><span class=\"line\">b=<span class=\"literal\">nil</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(b) <span class=\"comment\">-- 返回nil</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"数据类型\"><a href=\"https://Jaxes.github.io/#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\" class=\"headerlink\" title=\"数据类型\"></a>数据类型</h2><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- Lua是动态类型语言，不需要定义，只需要赋值。值可以储存在变量中，作为参数传递或结果返回</span></span><br><span class=\"line\"><span class=\"comment\">-- 8个基本类型nil、boolean、number、string、userdata、function、thread、table</span></span><br><span class=\"line\"><span class=\"comment\">--[[</span></span><br><span class=\"line\"><span class=\"comment\">nil\t\t\t只有值nil属于该类，表示一个无效值（在条件表达式中相当于false）</span></span><br><span class=\"line\"><span class=\"comment\">boolean\t\t包含两个值：false和true</span></span><br><span class=\"line\"><span class=\"comment\">number\t\t双精度类型的实浮点数</span></span><br><span class=\"line\"><span class=\"comment\">string\t\t字符串由一对双引号或单引号来表示</span></span><br><span class=\"line\"><span class=\"comment\">function\t由C或Lua编写的函数</span></span><br><span class=\"line\"><span class=\"comment\">userdata\t表示任意存储在变量中的C数据结构</span></span><br><span class=\"line\"><span class=\"comment\">thread\t\t表示执行的独立线程，用于执行协程</span></span><br><span class=\"line\"><span class=\"comment\">table\t\tLua中的表是一个“关联数组”，数组的索引可以是数字、字符串或表类型。在Lua里，table的创建时通过“构造表达式”来完成，最简单构造表达式是{}，用来创建一个空表</span></span><br><span class=\"line\"><span class=\"comment\">]]</span></span><br><span class=\"line\"><span class=\"built_in\">type</span>() <span class=\"comment\">-- 该函数可以测试给定变量或者值得类型</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"nil（空）\"><a href=\"https://Jaxes.github.io/#nil%EF%BC%88%E7%A9%BA%EF%BC%89\" class=\"headerlink\" title=\"nil（空）\"></a>nil（空）</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- nil类型表示没有任何有效值，它只有一个值nil</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"built_in\">type</span>(a)) <span class=\"comment\">-- 输出nil</span></span><br><span class=\"line\"><span class=\"comment\">-- 对于全局变量和table，nil有删除的作用</span></span><br><span class=\"line\">tab1={key1=<span class=\"string\">\"val1\"</span>,key2=<span class=\"string\">\"val2\"</span>,<span class=\"string\">\"val3\"</span>}</span><br><span class=\"line\"><span class=\"keyword\">for</span> k,v <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(tab1) <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(k .. <span class=\"string\">\" - \"</span> .. v) <span class=\"comment\">-- ..运算符用于连接字符串</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">tab1.key1=<span class=\"literal\">nil</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> k,v <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(tab1) <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(k .. <span class=\"string\">\" - \"</span> .. v)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"boolean（布尔）\"><a href=\"https://Jaxes.github.io/#boolean%EF%BC%88%E5%B8%83%E5%B0%94%EF%BC%89\" class=\"headerlink\" title=\"boolean（布尔）\"></a>boolean（布尔）</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 只有两个可选值：false、true，Lua把false和nil看作是“假”，其他的都为真</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"literal\">false</span> <span class=\"keyword\">or</span> <span class=\"literal\">nil</span> <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">\"至少有一个是true\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">\"false和nil都为false！\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">-- 执行结果为false和nil都为false！</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"number（数字）\"><a href=\"https://Jaxes.github.io/#number%EF%BC%88%E6%95%B0%E5%AD%97%EF%BC%89\" class=\"headerlink\" title=\"number（数字）\"></a>number（数字）</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- Lua默认只有一种number类型 double（双精度）类型</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"built_in\">type</span>(<span class=\"number\">2</span>))\t\t<span class=\"comment\">-- 输出number</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"built_in\">type</span>(<span class=\"number\">2e+1</span>))\t<span class=\"comment\">-- 输出number</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"string（字符串）\"><a href=\"https://Jaxes.github.io/#string%EF%BC%88%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%89\" class=\"headerlink\" title=\"string（字符串）\"></a>string（字符串）</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">string1=<span class=\"string\">\"this is string1\"</span></span><br><span class=\"line\">string2=<span class=\"string\">\"this is string2\"</span></span><br><span class=\"line\"><span class=\"comment\">-- 也可以用两个方括号“[[]]”来表示“一块”字符串，输出时会将换行和制表等格式也输出</span></span><br><span class=\"line\">string3=<span class=\"string\">[[</span></span><br><span class=\"line\"><span class=\"string\">emmmmmmmmmm</span></span><br><span class=\"line\"><span class=\"string\">aaaaaaaaaaa</span></span><br><span class=\"line\"><span class=\"string\">ruaruaruaruarua!</span></span><br><span class=\"line\"><span class=\"string\">]]</span></span><br><span class=\"line\"><span class=\"comment\">-- 对一个数字字符串进行算术操作，Lua会尝试将这个数字字符串转成一个数字</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">\"2\"</span>+<span class=\"number\">6</span>)\t\t<span class=\"comment\">-- 输出8.0</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">\"-2e2\"</span>*<span class=\"string\">\"6\"</span>)\t<span class=\"comment\">-- 输出-1200.0</span></span><br><span class=\"line\"><span class=\"comment\">-- 字符串连接使用..操作符，注意操作对象如果为数字，则操作对象与操作符之间需要加空格</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">\"2\"</span>..<span class=\"string\">\"b\"</span>)\t\t<span class=\"comment\">-- 输出2b</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"number\">233</span> .. <span class=\"number\">666</span>)\t<span class=\"comment\">-- 输出233666</span></span><br><span class=\"line\"><span class=\"comment\">-- 使用#来计算字符串长度，放在字符串前面</span></span><br><span class=\"line\"><span class=\"built_in\">len</span>=<span class=\"string\">\"www.rua.com\"</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(#<span class=\"built_in\">len</span>)\t\t\t\t<span class=\"comment\">-- 输出11</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(#<span class=\"string\">\"helloworld\"</span>)\t<span class=\"comment\">-- 输出10</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"table（表）\"><a href=\"https://Jaxes.github.io/#table%EF%BC%88%E8%A1%A8%EF%BC%89\" class=\"headerlink\" title=\"table（表）\"></a>table（表）</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建一个空表</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> tbl1={}</span><br><span class=\"line\"><span class=\"comment\">-- 直接初始表</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> tbl2={<span class=\"string\">\"a\"</span>,<span class=\"string\">\"b\"</span>,<span class=\"string\">\"c\"</span>,<span class=\"string\">\"d\"</span>}</span><br><span class=\"line\"><span class=\"comment\">-- 创建键值对</span></span><br><span class=\"line\">a[<span class=\"string\">\"key\"</span>]=<span class=\"string\">\"value\"</span></span><br><span class=\"line\">a[<span class=\"number\">1</span>]=<span class=\"number\">22</span></span><br><span class=\"line\">key=<span class=\"number\">10</span>\t<span class=\"comment\">-- 这里只是赋值，赋值后用于后面的创建键值对</span></span><br><span class=\"line\">a[key]=<span class=\"number\">22</span></span><br><span class=\"line\">a[a[key]]=a[key]+<span class=\"number\">11</span></span><br><span class=\"line\"><span class=\"comment\">-- 在Lua中，默认初始索引一般以1开始</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> tb1={<span class=\"string\">\"a\"</span>,<span class=\"string\">\"b\"</span>,<span class=\"string\">\"c\"</span>}</span><br><span class=\"line\"><span class=\"keyword\">for</span> key,val <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(tb1) <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">\"Key\"</span>,key)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">--[[</span></span><br><span class=\"line\"><span class=\"comment\">输出：</span></span><br><span class=\"line\"><span class=\"comment\">Key 1</span></span><br><span class=\"line\"><span class=\"comment\">Key 2</span></span><br><span class=\"line\"><span class=\"comment\">Key 3</span></span><br><span class=\"line\"><span class=\"comment\">]]</span></span><br><span class=\"line\"><span class=\"comment\">-- table的长度是动态增长的</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"function（函数）\"><a href=\"https://Jaxes.github.io/#function%EF%BC%88%E5%87%BD%E6%95%B0%EF%BC%89\" class=\"headerlink\" title=\"function（函数）\"></a>function（函数）</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 在Lua中，函数是被看作“第一类值（First-Class Value）”，函数可以存在变量里</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun1</span><span class=\"params\">(n)</span></span>\t<span class=\"comment\">-- 一个递归求阶乘的函数</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> n == <span class=\"number\">0</span> <span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> n*fun1(n<span class=\"number\">-1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(fun1(<span class=\"number\">5</span>))\t\t<span class=\"comment\">-- 输出120</span></span><br><span class=\"line\">fun2=fun1</span><br><span class=\"line\"><span class=\"built_in\">print</span>(fun2(<span class=\"number\">5</span>))\t\t<span class=\"comment\">-- 输出120</span></span><br><span class=\"line\"><span class=\"comment\">-- 也可以使用匿名函数的形式</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">testFun</span><span class=\"params\">(tab,fun)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> k,v <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(tab) <span class=\"keyword\">do</span></span><br><span class=\"line\">        <span class=\"built_in\">print</span>(fun(k,v))</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">tab={kay1=<span class=\"string\">\"val1\"</span>,key2=<span class=\"string\">\"val2\"</span>}</span><br><span class=\"line\">testFun(tab,</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key,val)</span></span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> key .. <span class=\"string\">\"=\"</span> .. val</span><br><span class=\"line\">\t<span class=\"keyword\">end</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"comment\">--[[</span></span><br><span class=\"line\"><span class=\"comment\">执行结果:</span></span><br><span class=\"line\"><span class=\"comment\">key1=val1</span></span><br><span class=\"line\"><span class=\"comment\">key2=val2</span></span><br><span class=\"line\"><span class=\"comment\">]]</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"thread（线程）\"><a href=\"https://Jaxes.github.io/#thread%EF%BC%88%E7%BA%BF%E7%A8%8B%EF%BC%89\" class=\"headerlink\" title=\"thread（线程）\"></a>thread（线程）</h3><p>Lua中主要的线程是协程（coroutine）</p>\n<p>线程可以同时多个运行，协程任意时刻只能运行一个</p>\n<h3 id=\"userdata（自定义类型）\"><a href=\"https://Jaxes.github.io/#userdata%EF%BC%88%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%EF%BC%89\" class=\"headerlink\" title=\"userdata（自定义类型）\"></a>userdata（自定义类型）</h3><p>用户自定义数据，用于表示一种由应用进程或C/C++语言库所创建的类型，可以将任意C/C++的任意数据类型的数据（通常是struct和指针）存储到Lua变量中调用</p>","text":" &lt;h2 id=&quot;注释&quot;&gt;&lt;a href=&quot;https://Jaxes.github.io/#%E6%B3%A8%E9%87%8A&quot; class=&quot;headerlink&quot; title=&quot;注释&...","link":"","photos":[],"count_time":{"symbolsCount":"4.4k","symbolsTime":"4 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A0%87%E8%AF%86%E7%AC%A6\"><span class=\"toc-text\">标识符</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%94%AE%E8%AF%8D\"><span class=\"toc-text\">关键词</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">全局变量</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">数据类型</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#nil%EF%BC%88%E7%A9%BA%EF%BC%89\"><span class=\"toc-text\">nil（空）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#boolean%EF%BC%88%E5%B8%83%E5%B0%94%EF%BC%89\"><span class=\"toc-text\">boolean（布尔）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#number%EF%BC%88%E6%95%B0%E5%AD%97%EF%BC%89\"><span class=\"toc-text\">number（数字）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#string%EF%BC%88%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%89\"><span class=\"toc-text\">string（字符串）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#table%EF%BC%88%E8%A1%A8%EF%BC%89\"><span class=\"toc-text\">table（表）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#function%EF%BC%88%E5%87%BD%E6%95%B0%EF%BC%89\"><span class=\"toc-text\">function（函数）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#thread%EF%BC%88%E7%BA%BF%E7%A8%8B%EF%BC%89\"><span class=\"toc-text\">thread（线程）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#userdata%EF%BC%88%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%EF%BC%89\"><span class=\"toc-text\">userdata（自定义类型）</span></a></li></ol></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Lua中ipairs和pairs的区别与使用","uid":"ee708369e43d7b01905981d2b3485e2f","slug":"zl/2016-01-01-254_Lua中ipairs和pairs的区别与使用","date":"2024-04-03T03:47:33.119Z","updated":"2024-04-03T03:47:33.120Z","comments":true,"path":"api/articles/zl/2016-01-01-254_Lua中ipairs和pairs的区别与使用.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" &lt;div class=&quot;post-nav&quot;&gt; &lt;div class=&quot;post-nav-next post-nav-item&quot;&gt; &lt;a href=&quot;https://hulinhong.com/201...","link":"","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"centos下安装openresty+ngx_lua_waf防火墙部署","uid":"0bbecffdbf888a921316fd4ef393eaaa","slug":"zl/2016-01-01-251_centos下安装openresty+ngx_lua_waf防火墙部署","date":"2024-04-03T03:47:33.118Z","updated":"2024-04-03T03:47:33.118Z","comments":true,"path":"api/articles/zl/2016-01-01-251_centos下安装openresty+ngx_lua_waf防火墙部署.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" &lt;p&gt;全文默认安装路径：/usr/local/src&lt;/p&gt; 1、安装Luagit:1234567# cd /usr/local/src# wget http://luajit.org/download/LuaJIT-2.1.0-beta3.tar.gz...","link":"","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}