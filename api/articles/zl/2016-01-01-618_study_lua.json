{"title":"study_lua","uid":"eafee6ad072d01002f94e94cb70747d8","slug":"zl/2016-01-01-618_study_lua","date":"2024-04-03T03:47:35.841Z","updated":"2024-04-03T03:47:35.842Z","comments":true,"path":"api/articles/zl/2016-01-01-618_study_lua.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<p>#Lua  学习</p>\n<p>##知识点<br/>1.requeire加载路径</p>\n<p>###加载机制<br/>对于自定义的模块，模块文件不是放在哪个文件目录都行，函数 require 有它自己的文件路径加载策略，它会尝试从 Lua 文件或 C 程序库中加载模块。<br/>require 用于搜索 Lua 文件的路径是存放在全局变量 package.path 中，当 Lua 启动后，会以环境变量 LUA_PATH 的值来初始这个环境变量。如果没有找到该环境变量，则使用一个编译时定义的默认路径来初始化。<br/>当然，如果没有 LUA_PATH 这个环境变量，也可以自定义设置，在当前用户根目录下打开 .profile 文件（没有则创建，打开 .bashrc 文件也可以），例如把 “~/lua/“ 路径加入 LUA_PATH 环境变量里：</p>\n<p>#LUA_PATH<br/>export LUA_PATH=”~/lua/?.lua;;”<br/>文件路径以 “;” 号分隔，最后的 2 个 “;;” 表示新加的路径后面加上原来的默认路径。<br/>接着，更新环境变量参数，使之立即生效。<br/>source ~/.profile<br/>这时假设 package.path 的值是：<br/>/Users/dengjoe/lua/?.lua;./?.lua;/usr/local/share/lua/5.1/?.lua;/usr/local/share/lua/5.1/?/init.lua;/usr/local/lib/lua/5.1/?.lua;/usr/local/lib/lua/5.1/?/init.lua<br/>那么调用 require(“module”) 时就会尝试打开以下文件目录去搜索目标。<br/>/Users/dengjoe/lua/module.lua;<br/>./module.lua<br/>/usr/local/share/lua/5.1/module.lua<br/>/usr/local/share/lua/5.1/module/init.lua<br/>/usr/local/lib/lua/5.1/module.lua<br/>/usr/local/lib/lua/5.1/module/init.lua<br/>如果找过目标文件，则会调用 package.loadfile 来加载模块。否则，就会去找 C 程序库。<br/>搜索的文件路径是从全局变量 package.cpath 获取，而这个变量则是通过环境变量 LUA_CPATH 来初始。<br/>搜索的策略跟上面的一样，只不过现在换成搜索的是 so 或 dll 类型的文件。如果找得到，那么 require 就会通过 package.loadlib 来加载它。</p>","text":"#Lua 学习 ##知识点1.requeire加载路径 ###加载机制对于自定义的模块，模块文件不是放在哪个文件目录都行，函数 require 有它自己的文件路径加载策略，它会尝试从 Lua 文件或 C 程序库中加载模块。require 用于搜索 Lua 文件的路径是存放在全局变...","link":"","photos":[],"count_time":{"symbolsCount":"1.1k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Programming in Lua(Thrid Edition)笔记","uid":"a502732b8dc58224e972b6c53538b8c4","slug":"zl/2016-01-01-61_Programming in Lua(Thrid Edition)笔记","date":"2024-04-03T03:47:35.842Z","updated":"2024-04-03T03:47:35.842Z","comments":true,"path":"api/articles/zl/2016-01-01-61_Programming in Lua(Thrid Edition)笔记.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"8 Compilation, Execution, and Errors dofile()实现：1234function (filename) local f = assert(loadfile(filename)) return f()end 可简单一些：123function...","link":"","photos":[],"count_time":{"symbolsCount":"4.6k","symbolsTime":"4 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"LuaFramework笔记One","uid":"785eae8982424fd04179c4f85b57c3b9","slug":"zl/2016-01-01-613_LuaFramework笔记One","date":"2024-04-03T03:47:35.840Z","updated":"2024-04-03T03:47:35.840Z","comments":true,"path":"api/articles/zl/2016-01-01-613_LuaFramework笔记One.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" Contents &lt;/div&gt; &lt;h2 id=&quot;AppConst-DebugMode&quot;&gt;&lt;a href=&quot;#AppConst-DebugMode&quot; class=&quot;headerlink&quot; t...","link":"","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}