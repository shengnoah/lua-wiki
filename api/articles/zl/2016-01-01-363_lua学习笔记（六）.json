{"title":"lua学习笔记（六）","uid":"159171ab2db2dcc9927fd3c20c0193d9","slug":"zl/2016-01-01-363_lua学习笔记（六）","date":"2024-04-03T03:47:35.644Z","updated":"2024-04-03T03:47:35.645Z","comments":true,"path":"api/articles/zl/2016-01-01-363_lua学习笔记（六）.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h2 id=\"Lua面向对象\"><a href=\"#Lua面向对象\" class=\"headerlink\" title=\"Lua面向对象\"></a>Lua面向对象</h2><h3 id=\"封装\"><a href=\"#封装\" class=\"headerlink\" title=\"封装\"></a>封装</h3><figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/><span class=\"line\">11</span><br/><span class=\"line\">12</span><br/><span class=\"line\">13</span><br/><span class=\"line\">14</span><br/><span class=\"line\">15</span><br/><span class=\"line\">16</span><br/><span class=\"line\">17</span><br/><span class=\"line\">18</span><br/><span class=\"line\">19</span><br/><span class=\"line\">20</span><br/><span class=\"line\">21</span><br/><span class=\"line\">22</span><br/><span class=\"line\">23</span><br/><span class=\"line\">24</span><br/><span class=\"line\">25</span><br/><span class=\"line\">26</span><br/><span class=\"line\">27</span><br/><span class=\"line\">28</span><br/><span class=\"line\">29</span><br/><span class=\"line\">30</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br/><span class=\"line\">People={isHumen=<span class=\"literal\">true</span>}\t\t<span class=\"comment\">-- 此处定义的元素都是相当于C++的静态成员变量</span></span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"comment\">-- 基类方法new</span></span><br/><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(o,n,a)</span></span></span><br/><span class=\"line\">\to=o <span class=\"keyword\">or</span> {}</span><br/><span class=\"line\">\t<span class=\"built_in\">setmetatable</span>(o,self)\t<span class=\"comment\">-- self相当于C++的this指针，但是这里指代的是元类People而不是对象o</span></span><br/><span class=\"line\">\tself.<span class=\"built_in\">__index</span>=self</span><br/><span class=\"line\">\to.name=n\t\t\t\t<span class=\"comment\">-- 用self代替o相当于C++中给静态成员变量赋值</span></span><br/><span class=\"line\">\to.age=a</span><br/><span class=\"line\">\t<span class=\"keyword\">return</span> o</span><br/><span class=\"line\"><span class=\"keyword\">end</span></span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"comment\">-- 基类元方法__tostring</span></span><br/><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">People:__tostring</span><span class=\"params\">()</span></span></span><br/><span class=\"line\">\t<span class=\"keyword\">local</span> sum=<span class=\"string\">&#34;名字为：&#34;</span>..self.name..<span class=\"string\">&#34;n年龄为：&#34;</span>..self.age <span class=\"comment\">-- 此处self指代的是实际调用时的对象</span></span><br/><span class=\"line\">\t<span class=\"keyword\">return</span> sum</span><br/><span class=\"line\"><span class=\"keyword\">end</span></span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"comment\">-- 基类方法walk</span></span><br/><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">People:walk</span><span class=\"params\">()</span></span></span><br/><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&#34;我正在走！&#34;</span>)</span><br/><span class=\"line\"><span class=\"keyword\">end</span></span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"comment\">-- 创建对象</span></span><br/><span class=\"line\">me=People:new(<span class=\"literal\">nil</span>,<span class=\"string\">&#34;Jaxes&#34;</span>,<span class=\"number\">21</span>)</span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"comment\">-- 调用对象中的函数</span></span><br/><span class=\"line\"><span class=\"built_in\">print</span>(me)\t\t<span class=\"comment\">-- 等价于print(tostring(me))</span></span><br/><span class=\"line\">me:walk()\t\t<span class=\"comment\">-- 等价于me.walk(me)</span></span><br/></pre></td></tr></tbody></table></figure>\n<h3 id=\"继承\"><a href=\"#继承\" class=\"headerlink\" title=\"继承\"></a>继承</h3><figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/><span class=\"line\">11</span><br/><span class=\"line\">12</span><br/><span class=\"line\">13</span><br/><span class=\"line\">14</span><br/><span class=\"line\">15</span><br/><span class=\"line\">16</span><br/><span class=\"line\">17</span><br/><span class=\"line\">18</span><br/><span class=\"line\">19</span><br/><span class=\"line\">20</span><br/><span class=\"line\">21</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 类Worker派生自People类</span></span><br/><span class=\"line\">Worker=People:new()</span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"comment\">-- 派生类</span></span><br/><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Worker:new</span><span class=\"params\">(o,n,a,id)</span></span></span><br/><span class=\"line\">\to=o <span class=\"keyword\">or</span> People:new(o,n,a)</span><br/><span class=\"line\">\t<span class=\"built_in\">setmetatable</span>(o,self)</span><br/><span class=\"line\">\tself.<span class=\"built_in\">__index</span>=self</span><br/><span class=\"line\">\to.id=id</span><br/><span class=\"line\">\t<span class=\"keyword\">return</span> o</span><br/><span class=\"line\"><span class=\"keyword\">end</span></span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Worker:__tostring</span><span class=\"params\">()</span></span></span><br/><span class=\"line\">\t<span class=\"keyword\">local</span> sum=People.<span class=\"built_in\">__tostring</span>(self)</span><br/><span class=\"line\">\tsum=sum..<span class=\"string\">&#34;nID为：&#34;</span>..self.id</span><br/><span class=\"line\">\t<span class=\"keyword\">return</span> sum</span><br/><span class=\"line\"><span class=\"keyword\">end</span></span><br/><span class=\"line\"></span><br/><span class=\"line\">worker=Worker:new(<span class=\"literal\">nil</span>,<span class=\"string\">&#34;kaka&#34;</span>,<span class=\"number\">55</span>,<span class=\"number\">01</span>)</span><br/><span class=\"line\"><span class=\"built_in\">print</span>(worker)</span><br/><span class=\"line\">worker:walk()\t\t<span class=\"comment\">-- 继承自父类函数walk</span></span><br/></pre></td></tr></tbody></table></figure>\n<h3 id=\"多态\"><a href=\"#多态\" class=\"headerlink\" title=\"多态\"></a>多态</h3><p>这个部分暂时还不清楚怎么搞，暂时做为后续储备内容</p>","text":"Lua面向对象封装123456789101112131415161718192021222324252627282930People={isHumen=true} -- 此处定义的元素都是相当于C++的静态成员变量-- 基类方法newfunction (o,n,a) o=o or...","link":"","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Lua%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1\"><span class=\"toc-text\">Lua面向对象</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B0%81%E8%A3%85\"><span class=\"toc-text\">封装</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%BB%A7%E6%89%BF\"><span class=\"toc-text\">继承</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A4%9A%E6%80%81\"><span class=\"toc-text\">多态</span></a></li></ol></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"OpenResty Lua 的使用 (一) 环境搭建","uid":"e7caaf0563bdeb3b9918a8bc0871fd9a","slug":"zl/2016-01-01-364_OpenResty Lua 的使用 (一) 环境搭建","date":"2024-04-03T03:47:35.645Z","updated":"2024-04-03T03:47:35.646Z","comments":true,"path":"api/articles/zl/2016-01-01-364_OpenResty Lua 的使用 (一) 环境搭建.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"OpenResty Lua 的使用 (一) 环境搭建 前言 开始学习Openresty Lua的使用,顺便也熟悉了下Nginx。 一、准备 Linux环境，我这里是在虚拟机安装的CentOS 7。 Openresty lua 安装包。 二、安装 安装 wget 命令用以下载使用，...","link":"","photos":[],"count_time":{"symbolsCount":"7.6k","symbolsTime":"7 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Lua Iterator","uid":"1fdf57fb1195f5f43473998d9681fe6e","slug":"zl/2016-01-01-361_Lua Iterator","date":"2024-04-03T03:47:35.640Z","updated":"2024-04-03T03:47:35.640Z","comments":true,"path":"api/articles/zl/2016-01-01-361_Lua Iterator.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"前言由于工作的关系其实我平时写Lua还是很多的，然而一个偶然的机会发现了其实我对Lua的迭代的认识还不够，这里记录一下。 READ THE MANUAL强调一下，一定要看守手册Lua5.1手册 我们来看下Lua中的For 12345678910111213141516171819...","link":"","photos":[],"count_time":{"symbolsCount":"5.5k","symbolsTime":"5 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}