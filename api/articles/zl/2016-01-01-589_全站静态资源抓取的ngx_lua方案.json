{"title":"全站静态资源抓取的ngx_lua方案","uid":"95d6afbff481aed8248dd4731c0bf4a3","slug":"zl/2016-01-01-589_全站静态资源抓取的ngx_lua方案","date":"2024-04-03T03:47:35.832Z","updated":"2024-04-03T03:47:35.832Z","comments":true,"path":"api/articles/zl/2016-01-01-589_全站静态资源抓取的ngx_lua方案.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<p>一些方案，没有一一测试：SiteSucker、httrack、idm、nomder、webzip、Teleport Pro、wget</p>\n<p>webzip有乱码问题，？和后面一个英文字符被合成了一个中文乱码，原因不明，最终采用的是wget的方案：  </p>\n<pre><code>wget -e robots=off -w 1 -x -np -p -m -k -t 1 -X/upload/ http://domain\n</code></pre>\n<p>简洁地把整站抓了下来。</p>\n<p>接着的问题是，静态资源的名字是：xxxx.asp?a=zzzz&amp;b=qqqq 这种形式的，在nginx里直接访问的话会去寻找xxxx.asp，原因是？是个url关键字(URL reserved characters)，需要采取一些措施来规避，方案是HttpLluaModule，在nginx的rewrite阶段执行：  </p>\n<pre><code>rewrite_by_lua ‘\n    if string.find(ngx.var.uri,”.asp”)~=nil then\n        if ngx.var.args~=nil then\n            ngx.req.set_uri(ngx.var.uri..”?”..ngx.var.args)\n        else\n            ngx.req.set_uri(ngx.var.uri)\n        end\n    end\n‘;\n</code></pre><p>这样就成功访问了文件名为xxxx.asp?a=zzzz&amp;b=qqqq的静态文件。</p>","text":"一些方案，没有一一测试：SiteSucker、httrack、idm、nomder、webzip、Teleport Pro、wget webzip有乱码问题，？和后面一个英文字符被合成了一个中文乱码，原因不明，最终采用的是wget的方案： wget -e robots=off -...","link":"","photos":[],"count_time":{"symbolsCount":651,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"fflua更新","uid":"83de5120af5a98a8d401694006b8691e","slug":"zl/2016-01-01-590_fflua更新","date":"2024-04-03T03:47:35.833Z","updated":"2024-04-03T03:47:35.833Z","comments":true,"path":"api/articles/zl/2016-01-01-590_fflua更新.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"简介：fflua 发布了有段时间了，很多网友都用了，并且提供了一些很好的反馈。其中一个就是c++接口注册到lua中时，对引用的支持。这样使用起来更加方便。 原有方式：fflua 中注册c++的类用如下方式： 1234567891011121314class {public: ba...","link":"","photos":[],"count_time":{"symbolsCount":992,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"特征重要性评估(Feature Importance Evaluation)","uid":"49f660041a1d67d298d2eb875a535f36","slug":"zl/2016-01-01-587_特征重要性评估(Feature Importance Evaluation)","date":"2024-04-03T03:47:35.832Z","updated":"2024-04-03T03:47:35.832Z","comments":true,"path":"api/articles/zl/2016-01-01-587_特征重要性评估(Feature Importance Evaluation).json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"特征对目标变量预测的相对重要性，可以通过决策树中使用特征作为决策节点的相对顺序来评估。决策树顶部使用的特征，将对更多样本的最终预测决策做出贡献。因此，可以通过每个特征对最终预测做出贡献的样本比例，来评估该特征的重要性。 通过对多个随机树中的预期贡献率取平均，可以减少这种估计的方差...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}