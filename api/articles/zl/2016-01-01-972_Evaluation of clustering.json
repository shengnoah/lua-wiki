{"title":"Evaluation of clustering","uid":"30727807ab641aee32f6f2d8ba3f604d","slug":"zl/2016-01-01-972_Evaluation of clustering","date":"2024-04-03T03:47:36.233Z","updated":"2024-04-03T03:47:36.233Z","comments":true,"path":"api/articles/zl/2016-01-01-972_Evaluation of clustering.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h3 id=\"聚类的目标\"><a href=\"#聚类的目标\" class=\"headerlink\" title=\"聚类的目标\"></a>聚类的目标</h3><p>high intra-cluster similarity and low inter-cluster similarity</p>\n<p>数据集有groundtruth时，如何评估聚类结果的优劣？</p>\n<h3 id=\"4种评估方法\"><a href=\"#4种评估方法\" class=\"headerlink\" title=\"4种评估方法\"></a>4种评估方法</h3><ol>\n<li>purity。 简单。</li>\n<li>NMI。从信息论角度解释。</li>\n<li>RI。实质是accuracy，同时惩罚了FP和FN两种错误。</li>\n<li>F-measure。为不同的错误类型（FP和FN）赋予不同的权重。</li>\n</ol>\n<!--\n![“aaaa”](https://nlp.stanford.edu/IR-book/html/htmledition/img1393.png)  \n-->\n<p><img src=\"https://sayarara.github.io//images/img1393.png\" alt=\"“bbb”\"/></p>\n<h4 id=\"purity\"><a href=\"#purity\" class=\"headerlink\" title=\"purity\"></a>purity</h4><p>purity取值范围[0，1]，越大越好。 当cluster数量(k)很大时，purity值容易高，极端情况下，当一个类只包含一条记录时，purity取1.</p>\n<p>begin{equation}<br/>    purity(W,C) = frac {1}{N} sum_k max_j |w_k cap c_j| label{rij}<br/>end{equation}</p>\n<p>N为数据集大小，$W=\\{w_1,w_2,…,w_k\\}$ is the set of clusters,即聚类结果。 $C = \\{c_1,c_2,…,c_j\\}$ is the set of classes，即groundtruth. 取$w_k$与$c_j$交集的最大值。</p>\n<p>begin{equation}<br/>    purity(W,C) = frac {1}{17} *（5+4+3）approx 0.71<br/>end{equation}</p>\n<h4 id=\"NMI\"><a href=\"#NMI\" class=\"headerlink\" title=\"NMI\"></a>NMI</h4><p>begin{equation}<br/>    NMI(W,C) = frac {I(W,C)}{[H(W)+H(C)]/2}<br/>end{equation}</p>\n<p>$I(W,C)$衡量类W与groundtruth C之间的互信息。</p>\n<p>begin{align}<br/>I(W,C) &amp;= sum_k sum_j P(w_k cap c_j) log frac {P(w_k cap c_j)}{P(w_k)P(c_j)} nonumber \\<br/>&amp;= sum_k sum_j frac{|w_k cap c_j| }{N} log frac {N|w_k cap c_j| }{|w_k||c_j|}  label{imp}<br/>end{align}</p>\n<p>当类与groundtruth之间关系随机时，互信息取0。当类与groundtruth一样时，互信息取1，当类进一步分割成更小的类时，互信息不变。<br/>极端情况下，当一个类只包含一条记录时，互信息仍然取1. 因此使用熵来惩罚过大的类数量。（熵随着类数目的增加而增加，极端情况下，当一个类只包含一条记录时，熵取最大值）</p>\n<p>$H(W)$ 和$H(C)$分布衡量类W与groundtruth C的熵 (entropy).</p>\n<p>begin{equation}<br/>    H(W) = - sum_k P(w_k) log P(w_k)<br/>end{equation}</p>\n<p>$P(w_k)$ 用 cluster $w_k$中的记录在总数据集的出现频率来估算，即$P(w_k)=|w_k|/N$</p>\n<h4 id=\"RI-（Rand-index）\"><a href=\"#RI-（Rand-index）\" class=\"headerlink\" title=\"RI （Rand index）\"></a>RI （Rand index）</h4><div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>TP</td>\n<td style=\"text-align:center\">2个相似实体被分配到了相同类中</td>\n</tr>\n<tr>\n<td>TN</td>\n<td style=\"text-align:center\">2个不相似实体分配到了不同类中</td>\n</tr>\n<tr>\n<td>FP</td>\n<td style=\"text-align:center\">2个不相似实体分配到了相同类中</td>\n</tr>\n<tr>\n<td>FN</td>\n<td style=\"text-align:center\">2个相似实体分配到了不同类中</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>begin{equation}<br/>    RI(W,C) = frac {TP+TN}{TP+FP+FN+TN}<br/>end{equation}</p>\n<p><strong>例子</strong>：</p>\n<p>$TP+FP = C_6^2+C_6^2+C_5^2 = 40$</p>\n<p>$TP = C_5^2+C_4^2+C_3^2+C_2^2 = 20$</p>\n<p>thus $FP = 40 -20 = 20$</p>\n<p>for each classes, $x:8,o:5,diamondsuit:4$</p>\n<p>the number of similar entities: $TP+FN = C_8^2+C_5^2+C_4^2 = 44$</p>\n<p>$FN = 44 - 20 = 24$</p>\n<p>the number of dissimilar entities : $ TN+FP = 8times5+8times 4+5times4=92$</p>\n<p>$TN = 92-20 = 72$</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th></th>\n<th style=\"text-align:center\">same cluster</th>\n<th style=\"text-align:center\">different clusters</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>same class</td>\n<td style=\"text-align:center\">TP=20</td>\n<td style=\"text-align:center\">FN=24</td>\n</tr>\n<tr>\n<td>different classes</td>\n<td style=\"text-align:center\">FP=20</td>\n<td style=\"text-align:center\">TN=72</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h4 id=\"F-measure\"><a href=\"#F-measure\" class=\"headerlink\" title=\"F-measure\"></a>F-measure</h4><p>$Precision = TP/(TP+FP)$</p>\n<p>$Recall= TP/(TP+FN)$<br/>$F_beta = frac{(beta^2+1)PR}{beta^2P+R}$</p>\n<p>当$beta &gt; 1$时，更多的权重给Recall，对FN的惩罚力度更强。</p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"https://nlp.stanford.edu/IR-book/html/htmledition/evaluation-of-clustering-1.html\" target=\"_blank\" rel=\"noopener noreferrer\">Evaluation of clustering</a></li>\n</ol>","text":"聚类的目标high intra-cluster similarity and low inter-cluster similarity 数据集有groundtruth时，如何评估聚类结果的优劣？ 4种评估方法 purity。 简单。 NMI。从信息论角度解释。 RI。实质是acc...","link":"","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%81%9A%E7%B1%BB%E7%9A%84%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">聚类的目标</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4%E7%A7%8D%E8%AF%84%E4%BC%B0%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">4种评估方法</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#purity\"><span class=\"toc-text\">purity</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#NMI\"><span class=\"toc-text\">NMI</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#RI-%EF%BC%88Rand-index%EF%BC%89\"><span class=\"toc-text\">RI （Rand index）</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#F-measure\"><span class=\"toc-text\">F-measure</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Reference\"><span class=\"toc-text\">Reference</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"xLua热更新4之Hotfix（上篇）","uid":"e988662893ced0a5e1e7507e4bbb5a0b","slug":"zl/2016-01-01-974_xLua热更新4之Hotfix（上篇）","date":"2024-04-03T03:47:36.234Z","updated":"2024-04-03T03:47:36.235Z","comments":true,"path":"api/articles/zl/2016-01-01-974_xLua热更新4之Hotfix（上篇）.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"思考并回答以下问题： xLua里面有一个热补丁的功能。就是你有的C#代码不用改，就可以加入热更新的功能。 为什么叫热补丁呢？已有项目中的C#代码只需要增加一些配置，不用做其他任何调整就可使用上类似热更新的功能。由于和热更新也不同，所以叫热补丁。这也是xLua首创的一项功能。 热补...","link":"","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Centos7安装Nginx整合Lua","uid":"b2ed6721ac7c046b1a394babb74083fa","slug":"zl/2016-01-01-970_Centos7安装Nginx整合Lua","date":"2024-04-03T03:47:36.232Z","updated":"2024-04-03T03:47:36.232Z","comments":true,"path":"api/articles/zl/2016-01-01-970_Centos7安装Nginx整合Lua.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"(adsbygoogle=window.adsbygoogle||[]).push({})背景Lua 是一种轻量小巧的脚本语言，用标准C语言编写并以源代码形式开放， 其设计目的是为了嵌入应用程序中，从而为应用程序提供灵活的扩展和定制功能。现在通常把lua迁入nginx中，根据lu...","link":"","photos":[],"count_time":{"symbolsCount":"2.3k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}