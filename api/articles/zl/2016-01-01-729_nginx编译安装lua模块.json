{"title":"nginx编译安装lua模块","uid":"eb06e9f2ad672616c91271c05869f3c6","slug":"zl/2016-01-01-729_nginx编译安装lua模块","date":"2024-04-03T03:47:35.971Z","updated":"2024-04-03T03:47:35.972Z","comments":true,"path":"api/articles/zl/2016-01-01-729_nginx编译安装lua模块.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h2 id=\"1-获取nginx源代码\"><a href=\"#1-获取nginx源代码\" class=\"headerlink\" title=\"1. 获取nginx源代码\"></a>1. 获取nginx源代码</h2><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/nginx/nginx.git nginx-release</span><br/></pre></td></tr></tbody></table></figure>\n<h2 id=\"2-下载安装LuaJIT\"><a href=\"#2-下载安装LuaJIT\" class=\"headerlink\" title=\"2. 下载安装LuaJIT\"></a>2. 下载安装LuaJIT</h2><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/LuaJIT/LuaJIT.git</span><br/><span class=\"line\">cd LuaJIT</span><br/><span class=\"line\">make </span><br/><span class=\"line\">make install</span><br/></pre></td></tr></tbody></table></figure>\n<h2 id=\"3-下载lua-nginx-module\"><a href=\"#3-下载lua-nginx-module\" class=\"headerlink\" title=\"3. 下载lua-nginx-module\"></a>3. 下载lua-nginx-module</h2><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://github.com/openresty/lua-nginx-module/archive/v0.10.7.tar.gz</span><br/><span class=\"line\">tar zxvf v0.10.7.tar.gz</span><br/></pre></td></tr></tbody></table></figure>\n<p>或者<br/></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/openresty/lua-nginx-module.git</span><br/></pre></td></tr></tbody></table></figure><p></p>\n<h2 id=\"4-下载ngx-devel-kit\"><a href=\"#4-下载ngx-devel-kit\" class=\"headerlink\" title=\"4. 下载ngx_devel_kit\"></a>4. 下载ngx_devel_kit</h2><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://github.com/simpl/ngx_devel_kit/archive/v0.3.0.tar.gz</span><br/></pre></td></tr></tbody></table></figure>\n<p>或者<br/></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/simpl/ngx_devel_kit.git</span><br/></pre></td></tr></tbody></table></figure><p></p>\n<h2 id=\"5-编译安装nginx\"><a href=\"#5-编译安装nginx\" class=\"headerlink\" title=\"5. 编译安装nginx\"></a>5. 编译安装nginx</h2><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~/opt/nginx-release/</span><br/><span class=\"line\">./configure --prefix=/home/USERNAME/opt/nginx-1.9 --with-ld-opt=&#34;-Wl,-rpath,/usr/local/lib&#34; --add-module=/home/USERNAME/opt/nginx-module/lua-nginx-module-0.10.7 --add-module=/home/USERNAME/opt/nginx-module/ngx_devel_kit/ --with-http_stub_status_module --with-http_ssl_module --with-ipv6 --with-http_gzip_static_module --with-http_realip_module --with-http_flv_module --with-pcre-jit</span><br/><span class=\"line\"></span><br/><span class=\"line\">make -j4</span><br/><span class=\"line\">make install</span><br/></pre></td></tr></tbody></table></figure>\n<h2 id=\"6-修改nginx配置\"><a href=\"#6-修改nginx配置\" class=\"headerlink\" title=\"6. 修改nginx配置\"></a>6. 修改nginx配置</h2><p>在http server区域内添加如下内容<br/></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">location /hello_lua {</span><br/><span class=\"line\">default_type &#39;text/plain&#39;;</span><br/><span class=\"line\">content_by_lua &#39;ngx.say(&#34;hello, lua&#34;)&#39;;</span><br/><span class=\"line\">}</span><br/></pre></td></tr></tbody></table></figure><p></p>\n<p>重启nginx</p>\n<h2 id=\"7-测试\"><a href=\"#7-测试\" class=\"headerlink\" title=\"7. 测试\"></a>7. 测试</h2><p>浏览器访问<code>IP/hello_lua</code>显示<br/>hello,lua  </p>\n<p>nginx的lua模块安装完成。  </p>","text":"1. 获取nginx源代码1git clone https://github.com/nginx/nginx.git nginx-release 2. 下载安装LuaJIT1234git clone https://github.com/LuaJIT/LuaJIT.gitcd L...","link":"","photos":[],"count_time":{"symbolsCount":"1.1k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-%E8%8E%B7%E5%8F%96nginx%E6%BA%90%E4%BB%A3%E7%A0%81\"><span class=\"toc-text\">1. 获取nginx源代码</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85LuaJIT\"><span class=\"toc-text\">2. 下载安装LuaJIT</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-%E4%B8%8B%E8%BD%BDlua-nginx-module\"><span class=\"toc-text\">3. 下载lua-nginx-module</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4-%E4%B8%8B%E8%BD%BDngx-devel-kit\"><span class=\"toc-text\">4. 下载ngx_devel_kit</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85nginx\"><span class=\"toc-text\">5. 编译安装nginx</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#6-%E4%BF%AE%E6%94%B9nginx%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">6. 修改nginx配置</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#7-%E6%B5%8B%E8%AF%95\"><span class=\"toc-text\">7. 测试</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Lua学习笔记(4)面向对象实现","uid":"9e83c6c60823836655cba905e4082c95","slug":"zl/2016-01-01-72_Lua学习笔记(4)面向对象实现","date":"2024-04-03T03:47:35.972Z","updated":"2024-04-03T03:47:35.974Z","comments":true,"path":"api/articles/zl/2016-01-01-72_Lua学习笔记(4)面向对象实现.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"百度搜索一下，给出出的解决方案和学习帖子很多，可是我还是有很多的问题！ 什么是面向对象？ lua中怎么实现面向对象？ 什么样的实现既简单又能完成我的功能？ 一定要按照c++的方式实现类的继承吗？ 在学习lua面向对象的过程中我比较喜欢下面两种实现方式： 简单粗暴的实现 参考[1]...","link":"","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"LUAWAF","uid":"8733a9f0389c2b32eac15c996ea8e211","slug":"zl/2016-01-01-728_LUAWAF","date":"2024-04-03T03:47:35.970Z","updated":"2024-04-03T03:47:35.971Z","comments":true,"path":"api/articles/zl/2016-01-01-728_LUAWAF.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"LUAWAFLUAWAF是我编写的一个针对Nginx的Web应用提供安全防护的Web应用防火墙。 支持平台目前WAF只支持Windows平台 安装1，使用本软件最好直接在OpenResty官网下载OpenResty，OpenResty自身带有Nginx 2，将该WAF下载到Ope...","link":"","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}