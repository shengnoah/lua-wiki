{"title":"Nginx配置及应用场景之lua","uid":"bd9c623429b10ab2e5ff69c94e6008e1","slug":"zl/2016-01-01-31_Nginx配置及应用场景之lua","date":"2024-04-03T03:47:35.603Z","updated":"2024-04-03T03:47:35.603Z","comments":true,"path":"api/articles/zl/2016-01-01-31_Nginx配置及应用场景之lua.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<div class=\"col-md-9 col-sm-12 col-xs-12 mainbar\">\n                <div class=\"pt-article\">\n                    <div class=\"panel panel-default pt-article-extra\">\n<pre><code>                &lt;/div&gt;\n                &lt;div class=&quot;pt-article-main&quot;&gt;\n                    &lt;div class=&quot;panel panel-default&quot;&gt;\n                        &lt;div class=&quot;panel-body&quot;&gt;\n                            &lt;div class=&quot;pt-article-content&quot;&gt;\n                                &lt;h2 id=&quot;一说明&quot;&gt;一、说明&lt;/h2&gt;\n</code></pre>\n<p>这里不对lua语言本身及其编译器运行环境等做介绍，以下所有介绍前提对lua相关有所了解。</p>\n<h2 id=\"二ngx_lua介绍\">二、ngx_lua介绍</h2>\n<h3 id=\"原理\">原理</h3>\n<p>ngx_lua将Lua嵌入Nginx，可以让Nginx执行Lua脚本，并且高并发、非阻塞的处理各种请求。Lua内建协程，这样就可以很好的将异步回调转换成顺序调用的形式。ngx_lua在Lua中进行的IO操作都会委托给Nginx的事件模型，从而实现非阻塞调用。开发者可以采用串行的方式编写程序，ngx_lua会自动的在进行阻塞的IO操作时中断，保存上下文；然后将IO操作委托给Nginx事件处理机制，在IO操作完成后，ngx_lua会恢复上下文，程序继续执行，这些操作都是对用户程序透明的。</p>\n<p>每个NginxWorker进程持有一个Lua解释器或者LuaJIT实例，被这个Worker处理的所有请求共享这个实例。每个请求的Context会被Lua轻量级的协程分割，从而保证各个请求是独立的。</p>\n<p>ngx_lua采用“one-coroutine-per-request”的处理模型，对于每个用户请求，ngx_lua会唤醒一个协程用于执行用户代码处理请求，当请求处理完成这个协程会被销毁。每个协程都有一个独立的全局环境（变量空间），继承于全局共享的、只读的“comman data”。所以，被用户代码注入全局空间的任何变量都不会影响其他请求的处理，并且这些变量在请求处理完成后会被释放，这样就保证所有的用户代码都运行在一个“sandbox”（沙箱），这个沙箱与请求具有相同的生命周期。</p>\n<p>得益于Lua协程的支持，ngx_lua在处理10000个并发请求时只需要很少的内存。根据测试，ngx_lua处理每个请求只需要2KB的内存，如果使用LuaJIT则会更少。所以ngx_lua非常适合用于实现可扩展的、高并发的服务。</p>\n<p><strong>协程</strong></p>\n<p>协程类似一种多线程，与多线程的区别有：</p>\n<ol>\n  <li>协程并非os线程，所以创建、切换开销比线程相对要小。</li>\n  <li>协程与线程一样有自己的栈、局部变量等，但是协程的栈是在用户进程空间模拟的，所以创建、切换开销很小。</li>\n  <li>多线程程序是多个线程并发执行，也就是说在一瞬间有多个控制流在执行。而协程强调的是一种多个协程间协作的关系，只有当一个协程主动放弃执行权，另一个协程才能获得执行权，所以在某一瞬间，多个协程间只有一个在运行。</li>\n  <li>由于多个协程时只有一个在运行，所以对于临界区的访问不需要加锁，而多线程的情况则必须加锁。</li>\n  <li>多线程程序由于有多个控制流，所以程序的行为不可控，而多个协程的执行是由开发者定义的所以是可控的。</li>\n</ol>\n<p>Nginx的每个Worker进程都是在epoll或kqueue这样的事件模型之上，封装成协程，每个请求都有一个协程进行处理。这正好与Lua内建协程的模型是一致的，所以即使ngx_lua需要执行Lua，相对C有一定的开销，但依然能保证高并发能力。</p>\n<h2 id=\"二ngx_lua安装\">二、ngx_lua安装</h2>\n<p>Nginx中安装ngx_lua需要安装LuaJIT，ngx_devel_kit，ngx_lua等安装文件，我们这里用的OpenResty，内部已经集成ngx_lua，无需再安装任何模块。</p>\n<h2 id=\"三ngx_lua用法\">三、ngx_lua用法</h2>\n<p><strong>嵌套lua脚本</strong></p>\n<div class=\"highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>location /lua &#123;\nset $test &#34;hello, world&#34;;\ncontent_by_lua &#39;\n    ngx.header.content_type = &#34;text/plain&#34;;\n    ngx.say(ngx.var.test);\n&#39;;\n&#125;\n</code></pre></div></div>\n<p>$ curl ‘http://134.32.28.134:8888/lua’，输出 hello, world。</p>\n<p><strong>include lua文件</strong></p>\n<p>Nginx中include lua的脚本文件方式，如：</p>\n<div class=\"highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code> location /mytest &#123;    \n\t  content_by_lua_file conf/alcache.lua;       \n &#125;\n</code></pre></div></div>\n<p>其中在alcache.lua中编写lua脚本即可。</p>\n<h2 id=\"四实际运用中通过lua结合分布式缓存对session的处理\">四、实际运用中通过lua结合分布式缓存对session的处理</h2>\n<p>这里redis与memcache的支持不是调用Nginx自带redis与memcache模块，都是调用OpenResty内部集成的第三方模块</p>\n<p><strong>nginx.conf部分配置</strong></p>\n<pre><code>location /login &#123;  &lt;br/&gt;\n</code></pre>\n<div class=\"highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>\tcontent_by_lua_file conf/alcache.lua;       \n&#125;\n</code></pre></div></div>\n<p><strong>alcache.lua配置</strong></p>\n<div class=\"highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>local key = tostring(ngx.var.arg_username)\nlocal val = tostring(ngx.var.arg_password)\nlocal passLogin = tostring(ngx.var.arg_passLoginFlag)\nlocal flags = tostring(ngx.var.arg_flags or 0)\nlocal exptime = tostring(ngx.var.arg_exptime or 0)\nlocal sessionId  = tostring(ngx.var.cookie_JSESSIONID)\n<p>ngx.say(&quot;sessionId:&quot;,sessionId)<br />\nngx.say(&quot;key:&quot;,key)<br />\nngx.say(&quot;val:&quot;,val)</p>\n<p>if (key == nil and val == nil)  then return end<br />\n–if (passLogin == nil or sessionId == nil)  then return end</p>\n<p>local memcached = require(&quot;resty.memcached&quot;)<br />\n–local redis = require(&quot;resty.redis&quot;)<br />\nlocal cache,err = memcached:new()<br />\n–local cache,err = redis.new()</p>\n<p>if not cache then<br />\nngx.say(&quot;failed to instantiate cache: &quot;,err)<br />\nreturn<br />\nend</p>\n<p>cache:set_timeout(1000)</p>\n<p>local ok,err = cache:connect(&quot;134.32.28.134&quot;,11211)<br />\n–local ok,err = cache:connect(&quot;134.32.28.134&quot;,6379)<br />\nif not ok then<br />\nngx.say(&quot;failed to connect: &quot;,err)<br />\nreturn<br />\nend</p>\n<p>local res,flags,err = cache:get(key)<br />\nif err then<br />\nngx.say(&quot;failed to get &quot;,key,&quot; : &quot;,err)<br />\nreturn<br />\nend<br />\nif res and tostring(res) ~= sessionId then<br />\ncache:delete(key)<br />\ncache:set(key,sessionId,exptime,flags)<br />\nelse<br />\ncache:set(key,sessionId,exptime,flags)<br />\nend</p>\n<p>local ok, err = cache:close()<br />\nif not ok then<br />\nngx.say(&quot;failed to close:&quot;, err)<br />\nreturn<br />\nend</p>\n<p>local url = ngx.var.uri<br />\nlocal res = ngx.location.capture(&quot;/proxy&quot;)<br />\n</code></pre></div></div></p>\n<pre><code>                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;div class=&quot;row&quot;&gt;\n                        \n                        &lt;div class=&quot;col-lg-6 col-md-6 col-sm-12 col-xs-12&quot; style=&quot;font-weight: 600&quot;&gt;\n                            &lt;span&gt;上一篇:\n                                &lt;a href=&quot;/blog/2013/10/22/nginx-3.html&quot; title=&quot;Nginx配置及应用场景之高级配置&quot; style=&quot;text-decoration: underline;&quot;&gt;Nginx配置及应用场景之高级配置&lt;/a&gt;\n                            &lt;/span&gt;\n                        &lt;/div&gt;\n                        \n                        \n                        &lt;div class=&quot;col-lg-6 col-md-6 col-sm-12 col-xs-12&quot; style=&quot;font-weight: 600&quot;&gt;\n                            &lt;span class=&quot;pull-right hidden-sm hiden-xs visible-lg visible-md&quot;&gt;下一篇:\n                                &lt;a href=&quot;/blog/2014/01/15/apache-commons-beanutils.html&quot; title=&quot;Apache Commons 系列简介 之 BeanUtils&quot; style=&quot;text-decoration: underline;&quot;&gt;Apache Commons 系列简介 之 BeanUtils&lt;/a&gt;\n                            &lt;/span&gt;\n                            &lt;span class=&quot;hidden-lg hiden-md visible-sm visible-xs&quot;&gt;下一篇:\n                                &lt;a href=&quot;/blog/2014/01/15/apache-commons-beanutils.html&quot; title=&quot;Apache Commons 系列简介 之 BeanUtils&quot; style=&quot;text-decoration: underline;&quot;&gt;Apache Commons 系列简介 之 BeanUtils&lt;/a&gt;\n                            &lt;/span&gt;\n                        &lt;/div&gt;\n                        \n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;col-md-3 hidden-sm hidden-xs sidebar&quot;&gt;\n            &lt;div class=&quot;authorbar&quot;&gt;\n                &lt;div class=&quot;list-group&quot; id=&quot;post-author&quot;&gt;\n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    &lt;a href=&quot;/authors/tangshizhong/&quot; class=&quot;list-group-item&quot;&gt;\n                        &lt;span class=&quot;glyphicon glyphicon-user&quot;&gt;&lt;/span&gt; \n                        作者：\n                        汤仕忠\n                    &lt;/a&gt;\n                    \n                    \n                    &lt;a href=&quot;/authors/tangshizhong/&quot; class=&quot;list-group-item&quot;&gt;\n                        &lt;span class=&quot;glyphicon glyphicon-file&quot;&gt;&lt;/span&gt;\n                        文章\n                        &lt;span class=&quot;pull-right badge&quot;&gt;19&lt;/span&gt;\n                        &lt;div class=&quot;inset-line&quot;&gt;&lt;/div&gt;\n                    &lt;/a&gt;\n                    &lt;a class=&quot;list-group-item&quot;&gt;\n                        &lt;span class=&quot;glyphicon glyphicon-star&quot;&gt;&lt;/span&gt;\n                        浏览量\n                        &lt;span class=&quot;pull-right badge&quot;&gt;\n                            \n                       &lt;/span&gt;\n                        &lt;div class=&quot;inset-line&quot;&gt;&lt;/div&gt;\n                    &lt;/a&gt;\n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                        \n                    \n                &lt;/div&gt;\n            &lt;/div&gt;\n            \n                &lt;div class=&quot;list-group&quot; id=&quot;my-like&quot;&gt;\n                    &lt;a href=&quot;&quot; class=&quot;list-group-item&quot;&gt;\n                        &lt;span class=&quot;glyphicon glyphicon-user&quot;&gt;&lt;/span&gt; \n                        博文推荐\n                    &lt;/a&gt;\n                    \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                    &lt;a href=&quot;&quot; class=&quot;list-group-item&quot;&gt;\n                        &lt;object&gt;\n                            &lt;a href=&quot;/blog/2018/06/20/first-bolg.html&quot;&gt;\n                                &lt;span&gt;Blog介绍&lt;/span&gt;\n                            &lt;/a&gt;\n                        &lt;/object&gt;\n                        &lt;br/&gt;\n                        &lt;span class=&quot;glyphicon glyphicon-user&quot;&gt;\n                            &lt;object&gt;\n                                &lt;a href=&quot;/authors/wfhuang/&quot;&gt;黄文峰&lt;/a&gt;\n                            &lt;/object&gt;\n                        &lt;/span&gt;\n                        &lt;span class=&quot;glyphicon glyphicon-calendar pull-right&quot;&gt;2018.06.20&lt;/span&gt;\n                        &lt;div class=&quot;inset-line&quot;&gt;&lt;/div&gt;\n                    &lt;/a&gt;\n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                    \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                    &lt;a href=&quot;&quot; class=&quot;list-group-item&quot;&gt;\n                        &lt;object&gt;\n                            &lt;a href=&quot;/blog/2018/06/08/spark-basic.html&quot;&gt;\n                                &lt;span&gt;Spark基础简易教程(Scala)&lt;/span&gt;\n                            &lt;/a&gt;\n                        &lt;/object&gt;\n                        &lt;br/&gt;\n                        &lt;span class=&quot;glyphicon glyphicon-user&quot;&gt;\n                            &lt;object&gt;\n                                &lt;a href=&quot;/authors/shenbin/&quot;&gt;申斌&lt;/a&gt;\n                            &lt;/object&gt;\n                        &lt;/span&gt;\n                        &lt;span class=&quot;glyphicon glyphicon-calendar pull-right&quot;&gt;2018.06.08&lt;/span&gt;\n                        &lt;div class=&quot;inset-line&quot;&gt;&lt;/div&gt;\n                    &lt;/a&gt;\n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                    \n                        \n                            \n                    &lt;a href=&quot;&quot; class=&quot;list-group-item&quot;&gt;\n                        &lt;object&gt;\n                            &lt;a href=&quot;/blog/2018/06/08/%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E4%B8%8AElasticsearch%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8-%E4%B8%89.html&quot;&gt;\n                                &lt;span&gt;阿里云服务上Elasticsearch的安装及简单使用（三）&lt;/span&gt;\n                            &lt;/a&gt;\n                        &lt;/object&gt;\n                        &lt;br/&gt;\n                        &lt;span class=&quot;glyphicon glyphicon-user&quot;&gt;\n                            &lt;object&gt;\n                                &lt;a href=&quot;/authors/chenlong/&quot;&gt;陈龙&lt;/a&gt;\n                            &lt;/object&gt;\n                        &lt;/span&gt;\n                        &lt;span class=&quot;glyphicon glyphicon-calendar pull-right&quot;&gt;2018.06.08&lt;/span&gt;\n                        &lt;div class=&quot;inset-line&quot;&gt;&lt;/div&gt;\n                    &lt;/a&gt;\n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                    \n                        \n                            \n                    &lt;a href=&quot;&quot; class=&quot;list-group-item&quot;&gt;\n                        &lt;object&gt;\n                            &lt;a href=&quot;/blog/2018/06/06/%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E4%B8%8AElasticsearch%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8-%E4%BA%8C.html&quot;&gt;\n                                &lt;span&gt;阿里云服务上Elasticsearch的安装及简单使用（二）&lt;/span&gt;\n                            &lt;/a&gt;\n                        &lt;/object&gt;\n                        &lt;br/&gt;\n                        &lt;span class=&quot;glyphicon glyphicon-user&quot;&gt;\n                            &lt;object&gt;\n                                &lt;a href=&quot;/authors/chenlong/&quot;&gt;陈龙&lt;/a&gt;\n                            &lt;/object&gt;\n                        &lt;/span&gt;\n                        &lt;span class=&quot;glyphicon glyphicon-calendar pull-right&quot;&gt;2018.06.06&lt;/span&gt;\n                        &lt;div class=&quot;inset-line&quot;&gt;&lt;/div&gt;\n                    &lt;/a&gt;\n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                    \n                        \n                            \n                    &lt;a href=&quot;&quot; class=&quot;list-group-item&quot;&gt;\n                        &lt;object&gt;\n                            &lt;a href=&quot;/blog/2018/06/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E4%B8%8AElasticsearch%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8-%E4%B8%80.html&quot;&gt;\n                                &lt;span&gt;阿里云服务上Elasticsearch的安装及简单使用（一）&lt;/span&gt;\n                            &lt;/a&gt;\n                        &lt;/object&gt;\n                        &lt;br/&gt;\n                        &lt;span class=&quot;glyphicon glyphicon-user&quot;&gt;\n                            &lt;object&gt;\n                                &lt;a href=&quot;/authors/chenlong/&quot;&gt;陈龙&lt;/a&gt;\n                            &lt;/object&gt;\n                        &lt;/span&gt;\n                        &lt;span class=&quot;glyphicon glyphicon-calendar pull-right&quot;&gt;2018.06.05&lt;/span&gt;\n                        &lt;div class=&quot;inset-line&quot;&gt;&lt;/div&gt;\n                    &lt;/a&gt;\n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                            \n                        \n                    \n                &lt;/div&gt;\n            \n        &lt;/div&gt;\n</code></pre>\n","text":" &lt;/div&gt; &lt;div class=&quot;pt-article-main&quot;&gt; &lt;div class=&quot;panel panel-default&quot;&gt; &lt;div class=&quot;panel-body...","link":"","photos":[],"count_time":{"symbolsCount":"21k","symbolsTime":"19 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8Cngx_lua%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">二、ngx_lua介绍</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8E%9F%E7%90%86\"><span class=\"toc-text\">原理</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8Cngx_lua%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">二、ngx_lua安装</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%89ngx_lua%E7%94%A8%E6%B3%95\"><span class=\"toc-text\">三、ngx_lua用法</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E5%AE%9E%E9%99%85%E8%BF%90%E7%94%A8%E4%B8%AD%E9%80%9A%E8%BF%87lua%E7%BB%93%E5%90%88%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98%E5%AF%B9session%E7%9A%84%E5%A4%84%E7%90%86\"><span class=\"toc-text\">四、实际运用中通过lua结合分布式缓存对session的处理</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Lua用处及进行文件读写操作","uid":"1b2c81e7d80cc25fbbaee6bbdfcc8ab0","slug":"zl/2016-01-01-321_Lua用处及进行文件读写操作","date":"2024-04-03T03:47:35.604Z","updated":"2024-04-03T03:47:35.604Z","comments":true,"path":"api/articles/zl/2016-01-01-321_Lua用处及进行文件读写操作.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"1、作为第三方插件，集成到项目中，提供功能支持2、可以完全使用lua进行开发，如quick-cocos2d、coronaSDK3、更多时候，作为数据的配置集（即阵列） lua进行文件读写local function read_files( fileName ) -- r表示读取权...","link":"","photos":[],"count_time":{"symbolsCount":923,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Lua 学习 chapter9","uid":"7f4a597d301be5b2bdf987c7b634db42","slug":"zl/2016-01-01-320_Lua 学习 chapter9 ","date":"2024-04-03T03:47:35.603Z","updated":"2024-04-03T03:47:35.604Z","comments":true,"path":"api/articles/zl/2016-01-01-320_Lua 学习 chapter9 .json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"目录 函数是第一类值 高阶函数 Just be handsome. 函数是第一类值 语法糖： 1 2 3 4 5 6 7 function foo(x) return 2*x end fucction (x) body end --就是韩式的构造器 function deriva...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}