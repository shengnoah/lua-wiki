{"title":"Lua 学习 chapter9","uid":"7f4a597d301be5b2bdf987c7b634db42","slug":"zl/2016-01-01-320_Lua 学习 chapter9 ","date":"2024-04-03T03:47:35.603Z","updated":"2024-04-03T03:47:35.604Z","comments":true,"path":"api/articles/zl/2016-01-01-320_Lua 学习 chapter9 .json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h3 id=\"目录\">目录</h3>\n<ol>\n  <li>函数是第一类值</li>\n  <li>高阶函数</li>\n</ol>\n<blockquote>\n  <p>Just be handsome.</p>\n</blockquote>\n<h2 id=\"函数是第一类值\">函数是第一类值</h2>\n<p>语法糖：</p>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><table class=\"rouge-table\"><tbody><tr><td class=\"rouge-gutter gl\"><pre class=\"lineno\">1\n2\n3\n4\n5\n6\n7\n</pre></td><td class=\"rouge-code\"><pre><span class=\"k\">function</span> <span class=\"nf\">foo</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"k\">return</span> <span class=\"mi\">2</span><span class=\"o\">*</span><span class=\"n\">x</span> <span class=\"k\">end</span>\n<span class=\"n\">fucction</span> <span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"n\">body</span> <span class=\"k\">end</span> <span class=\"c1\">--就是韩式的构造器</span>\n<span class=\"k\">function</span> <span class=\"nf\">derivative</span> <span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">,</span> <span class=\"n\">delta</span><span class=\"p\">)</span>\n<span class=\"n\">delta</span> <span class=\"o\">=</span> <span class=\"n\">delta</span> <span class=\"ow\">or</span> <span class=\"mf\">1e-4</span>\n<span class=\"k\">return</span> <span class=\"k\">function</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n\t\t<span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"o\">+</span> <span class=\"n\">delta</span><span class=\"p\">)</span> <span class=\"o\">-</span> <span class=\"n\">f</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">))</span> <span class=\"o\">/</span> <span class=\"n\">delta</span><span class=\"p\">)</span>\n\t<span class=\"k\">end</span>\n</pre></td></tr></tbody></table></code></pre></div></div>\n<p>例如table.sort函数的第二个函数是以函数作为参数的，这种函数我们称之为高阶函数。</p>\n<p>在lua中所有的函数都是匿名的。当讨论函数名的时候，实际上是保存该函数的变量。\n如上面的derivative函数，求导函数。</p>\n<p>局部函数对于包而言尤其有用：由于lua语言将每个程序段作为一个函数处理，所以在一段程序中声明的函数就是局部函数，这些函数只在该程序段可见。词法定界保证了程序段中的其他函数可以使用这些局部函数。</p>\n<p>在使用局部函数的时候，注意递归，当在局部函数中递归自己的时候会导致未定义问题，所以应该先声明，再定义。</p>\n<h2 id=\"高阶函数\">高阶函数</h2>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><table class=\"rouge-table\"><tbody><tr><td class=\"rouge-gutter gl\"><pre class=\"lineno\">1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n</pre></td><td class=\"rouge-code\"><pre><span class=\"kd\">local</span> <span class=\"k\">function</span> <span class=\"nf\">disk</span><span class=\"p\">(</span><span class=\"n\">cx</span><span class=\"p\">,</span> <span class=\"n\">cy</span><span class=\"p\">,</span> <span class=\"n\">r</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"k\">function</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"o\">-</span> <span class=\"n\">cx</span><span class=\"p\">)</span> <span class=\"o\">^</span> <span class=\"mi\">2</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"n\">y</span> <span class=\"o\">-</span> <span class=\"n\">cy</span><span class=\"p\">)</span> <span class=\"o\">^</span> <span class=\"mi\">2</span> <span class=\"o\">&lt;=</span> <span class=\"n\">r</span> <span class=\"o\">^</span> <span class=\"mi\">2</span>\n    <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n<p><span class=\"kd\">local</span> <span class=\"k\">function</span> <span class=\"nf\">rect</span><span class=\"p\">(</span><span class=\"n\">left</span><span class=\"p\">,</span> <span class=\"n\">right</span><span class=\"p\">,</span> <span class=\"n\">top</span><span class=\"p\">,</span> <span class=\"n\">bottom</span><span class=\"p\">)</span><br />\n<span class=\"k\">return</span> <span class=\"k\">function</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span><br />\n<span class=\"k\">return</span> <span class=\"n\">x</span> <span class=\"o\">&lt;=</span> <span class=\"n\">right</span> <span class=\"ow\">and</span> <span class=\"n\">x</span> <span class=\"o\">&gt;=</span> <span class=\"n\">left</span> <span class=\"ow\">and</span> <span class=\"n\">y</span> <span class=\"o\">&lt;=</span> <span class=\"n\">top</span> <span class=\"ow\">and</span> <span class=\"n\">y</span> <span class=\"o\">&gt;=</span> <span class=\"n\">bottom</span><br />\n<span class=\"k\">end</span><br />\n<span class=\"k\">end</span></p>\n<p><span class=\"kd\">local</span> <span class=\"k\">function</span> <span class=\"nf\">union</span><span class=\"p\">(</span><span class=\"n\">r1</span><span class=\"p\">,</span> <span class=\"n\">r2</span><span class=\"p\">)</span><br />\n<span class=\"k\">return</span> <span class=\"k\">function</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span><br />\n<span class=\"k\">return</span> <span class=\"n\">r1</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"ow\">or</span> <span class=\"n\">r2</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span><br />\n<span class=\"k\">end</span><br />\n<span class=\"k\">end</span></p>\n<p><span class=\"kd\">local</span> <span class=\"k\">function</span> <span class=\"nf\">intersection</span><span class=\"p\">(</span><span class=\"n\">r1</span><span class=\"p\">,</span> <span class=\"n\">r2</span><span class=\"p\">)</span><br />\n<span class=\"k\">return</span> <span class=\"k\">function</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span><br />\n<span class=\"k\">return</span> <span class=\"n\">r1</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"ow\">and</span> <span class=\"n\">r2</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span><br />\n<span class=\"k\">end</span><br />\n<span class=\"k\">end</span></p>\n<p><span class=\"kd\">local</span> <span class=\"k\">function</span> <span class=\"nf\">difference</span><span class=\"p\">(</span><span class=\"n\">r1</span><span class=\"p\">,</span> <span class=\"n\">r2</span><span class=\"p\">)</span><br />\n<span class=\"k\">return</span> <span class=\"k\">function</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span><br />\n<span class=\"k\">return</span> <span class=\"n\">r1</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"ow\">and</span> <span class=\"ow\">not</span> <span class=\"n\">r2</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span><br />\n<span class=\"k\">end</span><br />\n<span class=\"k\">end</span></p>\n<p><span class=\"kd\">local</span> <span class=\"k\">function</span> <span class=\"nf\">trance</span><span class=\"p\">(</span><span class=\"n\">r</span><span class=\"p\">,</span> <span class=\"n\">dx</span><span class=\"p\">,</span> <span class=\"n\">dy</span><span class=\"p\">)</span><br />\n<span class=\"k\">return</span> <span class=\"k\">function</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span><br />\n<span class=\"k\">return</span> <span class=\"n\">r</span><span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"o\">-</span> <span class=\"n\">dx</span><span class=\"p\">,</span> <span class=\"n\">y</span> <span class=\"o\">-</span> <span class=\"n\">dy</span><span class=\"p\">)</span><br />\n<span class=\"k\">end</span><br />\n<span class=\"k\">end</span><br />\n</pre></td></tr></tbody></table></code></pre></div></div></p>\n<pre><code>            &lt;hr style=&quot;visibility: hidden;&quot;/&gt;\n            \n            &lt;hr style=&quot;visibility: hidden;&quot;/&gt;\n</code></pre>\n","text":"目录 函数是第一类值 高阶函数 Just be handsome. 函数是第一类值 语法糖： 1 2 3 4 5 6 7 function foo(x) return 2*x end fucction (x) body end --就是韩式的构造器 function deriva...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">目录</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%87%BD%E6%95%B0%E6%98%AF%E7%AC%AC%E4%B8%80%E7%B1%BB%E5%80%BC\"><span class=\"toc-text\">函数是第一类值</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">高阶函数</span></a>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Nginx配置及应用场景之lua","uid":"bd9c623429b10ab2e5ff69c94e6008e1","slug":"zl/2016-01-01-31_Nginx配置及应用场景之lua","date":"2024-04-03T03:47:35.603Z","updated":"2024-04-03T03:47:35.603Z","comments":true,"path":"api/articles/zl/2016-01-01-31_Nginx配置及应用场景之lua.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" &lt;/div&gt; &lt;div class=&quot;pt-article-main&quot;&gt; &lt;div class=&quot;panel panel-default&quot;&gt; &lt;div class=&quot;panel-body...","link":"","photos":[],"count_time":{"symbolsCount":"21k","symbolsTime":"19 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"基于AndroLua_Pro的Android开发笔记","uid":"fa8a6a5f27aae6005a6ca0b8e749bdc4","slug":"zl/2016-01-01-319_基于AndroLua_Pro的Android开发笔记","date":"2024-04-03T03:47:35.602Z","updated":"2024-04-03T03:47:35.603Z","comments":true,"path":"api/articles/zl/2016-01-01-319_基于AndroLua_Pro的Android开发笔记.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" 温馨提示:请使用电脑浏览器打开,以确保最佳的阅读体验,谢谢.(￣▽￣)” 骚年, 学海无涯, 编程你怕不怕? 啥,你说怕? 那么你还看个P啊. [0]英文大小写忽略[1]文章中的 alua 和 AndroLua的含义一样[2]文章中的 AndroLua_Pro 和 AndroL...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}