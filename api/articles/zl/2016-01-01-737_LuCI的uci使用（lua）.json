{"title":"LuCI的uci使用（lua）","uid":"307dd1de8967bd9b98bf15acd11e3afd","slug":"zl/2016-01-01-737_LuCI的uci使用（lua）","date":"2024-04-03T03:47:35.985Z","updated":"2024-04-03T03:47:35.985Z","comments":true,"path":"api/articles/zl/2016-01-01-737_LuCI的uci使用（lua）.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h2 id=\"add\"><a href=\"#add\" class=\"headerlink\" title=\"add\"></a>add</h2><figure class=\"highlight avrasm\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">local uci = require(<span class=\"string\">&#34;luci.model.uci&#34;</span>).cursor()</span><br/><span class=\"line\"><span class=\"symbol\">uci:</span><span class=\"keyword\">add</span>(<span class=\"string\">&#34;wireless&#34;</span>, <span class=\"string\">&#34;wifi-iface&#34;</span>)</span><br/><span class=\"line\"><span class=\"symbol\">uci:</span>commit(<span class=\"string\">&#34;wireless&#34;</span>)</span><br/></pre></td></tr></tbody></table></figure>\n<p>actual result：</p>\n<p><code>config wifi-iface</code> 一句会添加至 <code>/etc/config/wireless</code> 的末尾。</p>\n<h2 id=\"delete\"><a href=\"#delete\" class=\"headerlink\" title=\"delete\"></a>delete</h2><p>sample <code>cat /etc/config/network</code>:</p>\n<figure class=\"highlight vbnet\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">config <span class=\"keyword\">interface</span> </span><br/><span class=\"line\">    <span class=\"keyword\">option</span> ipaddr <span class=\"comment\">&#39;192.168.1.1&#39;</span></span><br/></pre></td></tr></tbody></table></figure>\n<p>codes:</p>\n<figure class=\"highlight vim\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">local uci = require(<span class=\"string\">&#34;luci.model.uci&#34;</span>).<span class=\"built_in\">cursor</span>()</span><br/><span class=\"line\">uci:<span class=\"keyword\">delete</span>(<span class=\"string\">&#34;network&#34;</span>, <span class=\"string\">&#34;lan&#34;</span>, <span class=\"string\">&#34;ipaddr&#34;</span>) -- 如果不加第三个参数（ipaddr），则会<span class=\"keyword\">delete</span>掉<span class=\"keyword\">lan</span>的所有<span class=\"keyword\">options</span>，包括config interface <span class=\"string\">&#39;lan&#39;</span>一句。</span><br/><span class=\"line\">uci:commit(<span class=\"string\">&#34;network&#34;</span>)</span><br/></pre></td></tr></tbody></table></figure>\n<h2 id=\"delete-all\"><a href=\"#delete-all\" class=\"headerlink\" title=\"delete_all\"></a>delete_all</h2><figure class=\"highlight avrasm\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">local uci = require(<span class=\"string\">&#34;luci.model.uci&#34;</span>).cursor()</span><br/><span class=\"line\"><span class=\"symbol\">uci:</span>delete_all(<span class=\"string\">&#34;firewall&#34;</span>, <span class=\"string\">&#34;redirect&#34;</span>)</span><br/><span class=\"line\"><span class=\"symbol\">uci:</span>commit(<span class=\"string\">&#34;firewall&#34;</span>)</span><br/></pre></td></tr></tbody></table></figure>\n<h2 id=\"foreach\"><a href=\"#foreach\" class=\"headerlink\" title=\"foreach\"></a>foreach</h2><p>sample <code>cat /etc/config/wireless</code>:</p>\n<figure class=\"highlight gams\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/><span class=\"line\">11</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">config wifi-device <span class=\"string\">&#39;radio0&#39;</span></span><br/><span class=\"line\">    <span class=\"keyword\">option</span> country <span class=\"string\">&#39;CN&#39;</span></span><br/><span class=\"line\">    <span class=\"keyword\">option</span> disabled <span class=\"string\">&#39;0&#39;</span></span><br/><span class=\"line\"></span><br/><span class=\"line\">config wifi-iface</span><br/><span class=\"line\">    <span class=\"keyword\">option</span> ssid <span class=\"string\">&#39;aaa&#39;</span></span><br/><span class=\"line\">    <span class=\"keyword\">option</span> hidden <span class=\"string\">&#39;0&#39;</span></span><br/><span class=\"line\"></span><br/><span class=\"line\">config wifi-iface</span><br/><span class=\"line\">    <span class=\"keyword\">option</span> ssid <span class=\"string\">&#39;bbb&#39;</span></span><br/><span class=\"line\">    <span class=\"keyword\">option</span> hidden <span class=\"string\">&#39;0&#39;</span></span><br/></pre></td></tr></tbody></table></figure>\n<p>codes:</p>\n<figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/><span class=\"line\">11</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">local</span> uci = <span class=\"built_in\">require</span>(<span class=\"string\">&#34;luci.model.uci&#34;</span>).cursor()</span><br/><span class=\"line\">uci:<span class=\"built_in\">foreach</span>(<span class=\"string\">&#34;wireless&#34;</span>, <span class=\"string\">&#34;wifi-iface&#34;</span>, <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(s)</span></span></span><br/><span class=\"line\">    <span class=\"built_in\">print</span>(s[<span class=\"string\">&#34;.type&#34;</span>], s[<span class=\"string\">&#34;.name&#34;</span>], s[<span class=\"string\">&#34;.index&#34;</span>]) <span class=\"comment\">-- 三个是默认自带有的</span></span><br/><span class=\"line\">    <span class=\"built_in\">print</span>(s.ssid)</span><br/><span class=\"line\"></span><br/><span class=\"line\">    <span class=\"comment\">-- 注意此处set之后不能commit，必须在遍历外面commit</span></span><br/><span class=\"line\">    uci:set(<span class=\"string\">&#34;wireless&#34;</span>, s[<span class=\"string\">&#34;.name&#34;</span>], <span class=\"string\">&#34;hidden&#34;</span>, <span class=\"string\">&#34;1&#34;</span>)</span><br/><span class=\"line\"><span class=\"keyword\">end</span>)</span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"comment\">-- 没有set则无需commit。</span></span><br/><span class=\"line\">uci:commit(<span class=\"string\">&#34;wireless&#34;</span>)</span><br/></pre></td></tr></tbody></table></figure>\n<h2 id=\"get\"><a href=\"#get\" class=\"headerlink\" title=\"get\"></a>get</h2><figure class=\"highlight stylus\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">local uci = require(<span class=\"string\">&#34;luci.model.uci&#34;</span>).<span class=\"attribute\">cursor</span>()</span><br/><span class=\"line\">local <span class=\"selector-tag\">p</span> = uci:get(<span class=\"string\">&#34;network&#34;</span>, <span class=\"string\">&#34;lan&#34;</span>, <span class=\"string\">&#34;ipaddr&#34;</span>)</span><br/><span class=\"line\"><span class=\"function\"><span class=\"params\">(p)</span></span></span><br/></pre></td></tr></tbody></table></figure>\n<h2 id=\"get-all\"><a href=\"#get-all\" class=\"headerlink\" title=\"get_all\"></a>get_all</h2><figure class=\"highlight lasso\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">local</span> LuciUtil = <span class=\"keyword\">require</span>(<span class=\"string\">&#34;luci.util&#34;</span>)</span><br/><span class=\"line\"><span class=\"built_in\">local</span> uci = <span class=\"keyword\">require</span>(<span class=\"string\">&#34;luci.model.uci&#34;</span>).cursor()</span><br/><span class=\"line\"><span class=\"built_in\">local</span> p = uci:get_all(<span class=\"string\">&#34;network&#34;</span>, <span class=\"string\">&#34;lan&#34;</span>)</span><br/><span class=\"line\">LuciUtil.dumptable(p)</span><br/></pre></td></tr></tbody></table></figure>\n<h2 id=\"get-list\"><a href=\"#get-list\" class=\"headerlink\" title=\"get_list\"></a>get_list</h2><p>sample <code>cat /etc/config/network</code>:</p>\n<figure class=\"highlight lsl\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">config interface &#39;wan&#39;</span><br/><span class=\"line\">    option proto &#39;static&#39;</span><br/><span class=\"line\">    option ipaddr &#39;<span class=\"number\">10.1</span><span class=\"number\">.1</span><span class=\"number\">.2</span>&#39;</span><br/><span class=\"line\">    option netmask &#39;<span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span>&#39;</span><br/><span class=\"line\">    option gateway &#39;<span class=\"number\">10.1</span><span class=\"number\">.1</span><span class=\"number\">.1</span>&#39;</span><br/><span class=\"line\">    <span class=\"type\">list</span> dns &#39;<span class=\"number\">2.2</span><span class=\"number\">.2</span><span class=\"number\">.2</span>&#39;</span><br/><span class=\"line\">    <span class=\"type\">list</span> dns &#39;<span class=\"number\">1.1</span><span class=\"number\">.1</span><span class=\"number\">.1</span>&#39;</span><br/></pre></td></tr></tbody></table></figure>\n<p>codes:</p>\n<figure class=\"highlight lasso\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">local</span> uci = <span class=\"keyword\">require</span>(<span class=\"string\">&#34;luci.model.uci&#34;</span>).cursor()</span><br/><span class=\"line\"><span class=\"built_in\">local</span> LuciUtil = <span class=\"keyword\">require</span>(<span class=\"string\">&#34;luci.util&#34;</span>)</span><br/><span class=\"line\"><span class=\"built_in\">local</span> p = uci:get_list(<span class=\"string\">&#34;network&#34;</span>, <span class=\"string\">&#34;wan&#34;</span>, <span class=\"string\">&#34;dns&#34;</span>)</span><br/><span class=\"line\">LuciUtil.dumptable(p)</span><br/></pre></td></tr></tbody></table></figure>\n<h2 id=\"section\"><a href=\"#section\" class=\"headerlink\" title=\"section\"></a>section</h2><figure class=\"highlight cs\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/><span class=\"line\">11</span><br/><span class=\"line\">12</span><br/><span class=\"line\">13</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">local uci = require(<span class=\"string\">&#34;luci.model.uci&#34;</span>).cursor()</span><br/><span class=\"line\">local options = {</span><br/><span class=\"line\">    []       = <span class=\"string\">&#34;wan&#34;</span>,</span><br/><span class=\"line\">    [<span class=\"meta\"><span class=\"meta-string\">&#34;src_dport&#34;</span></span>] = <span class=\"string\">&#34;8080&#34;</span>,</span><br/><span class=\"line\">    [<span class=\"meta\"><span class=\"meta-string\">&#34;proto&#34;</span></span>]     = <span class=\"string\">&#34;tcpudp&#34;</span>,</span><br/><span class=\"line\">    [<span class=\"meta\"><span class=\"meta-string\">&#34;target&#34;</span></span>]    = <span class=\"string\">&#34;DNAT&#34;</span>,</span><br/><span class=\"line\">    [<span class=\"meta\"><span class=\"meta-string\">&#34;dest&#34;</span></span>]      = <span class=\"string\">&#34;lan&#34;</span>,</span><br/><span class=\"line\">    [<span class=\"meta\"><span class=\"meta-string\">&#34;dest_port&#34;</span></span>] = <span class=\"string\">&#34;80&#34;</span>,</span><br/><span class=\"line\">    [<span class=\"meta\"><span class=\"meta-string\">&#34;dest_ip&#34;</span></span>]   = <span class=\"string\">&#34;192.168.1.100&#34;</span>,</span><br/><span class=\"line\">    [<span class=\"meta\"><span class=\"meta-string\">&#34;name&#34;</span></span>]      = <span class=\"string\">&#34;aaa&#34;</span></span><br/><span class=\"line\">}</span><br/><span class=\"line\">uci:section(<span class=\"string\">&#34;firewall&#34;</span>, <span class=\"string\">&#34;redirect&#34;</span>, sectionName, options)</span><br/><span class=\"line\">uci:commit(<span class=\"string\">&#34;firewall&#34;</span>)</span><br/></pre></td></tr></tbody></table></figure>\n<p>actual result（端口转发的例子）：</p>\n<figure class=\"highlight gams\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/><span class=\"line\">11</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"string\">&#39;abc&#39;</span>取决于sectionName，sectionName = nil则没有。</span><br/><span class=\"line\">config redirect <span class=\"string\">&#39;abc&#39;</span></span><br/><span class=\"line\">    # <span class=\"keyword\">options</span> = nil则下面部分都没有</span><br/><span class=\"line\">    <span class=\"keyword\">option</span> src <span class=\"string\">&#39;wan&#39;</span></span><br/><span class=\"line\">    <span class=\"keyword\">option</span> src_dport <span class=\"string\">&#39;8080&#39;</span></span><br/><span class=\"line\">    <span class=\"keyword\">option</span> proto <span class=\"string\">&#39;tcpudp&#39;</span></span><br/><span class=\"line\">    <span class=\"keyword\">option</span> target <span class=\"string\">&#39;DNAT&#39;</span></span><br/><span class=\"line\">    <span class=\"keyword\">option</span> dest <span class=\"string\">&#39;lan&#39;</span></span><br/><span class=\"line\">    <span class=\"keyword\">option</span> dest_port <span class=\"string\">&#39;80&#39;</span></span><br/><span class=\"line\">    <span class=\"keyword\">option</span> dest_ip <span class=\"string\">&#39;192.168.1.100&#39;</span></span><br/><span class=\"line\">    <span class=\"keyword\">option</span> name <span class=\"string\">&#39;aaa&#39;</span></span><br/></pre></td></tr></tbody></table></figure>\n<h2 id=\"set\"><a href=\"#set\" class=\"headerlink\" title=\"set\"></a>set</h2><figure class=\"highlight avrasm\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">local uci = require(<span class=\"string\">&#34;luci.model.uci&#34;</span>).cursor()</span><br/><span class=\"line\"><span class=\"symbol\">uci:</span><span class=\"keyword\">set</span>(<span class=\"string\">&#34;network&#34;</span>, <span class=\"string\">&#34;lan&#34;</span>, <span class=\"string\">&#34;ipaddr&#34;</span>, <span class=\"string\">&#34;value_u_wanna_set&#34;</span>)</span><br/><span class=\"line\"><span class=\"symbol\">uci:</span>commit(<span class=\"string\">&#34;network&#34;</span>)</span><br/></pre></td></tr></tbody></table></figure>\n<blockquote>\n<p>set有个特点，如果要设置的值跟目标文件中的值一样，则uci不会修改配置文件，相当于没改。<br/>可查看文件修改日期发现：<code>ls -le /etc/config/network</code></p>\n</blockquote>\n<h2 id=\"set-confdir\"><a href=\"#set-confdir\" class=\"headerlink\" title=\"set_confdir\"></a>set_confdir</h2><figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span><span class=\"params\">()</span></span></span><br/><span class=\"line\">    <span class=\"keyword\">local</span> uci = <span class=\"built_in\">require</span>(<span class=\"string\">&#34;luci.model.uci&#34;</span>).cursor()</span><br/><span class=\"line\">    uci:set_confdir(<span class=\"string\">&#34;/tmp/etc/config&#34;</span>)</span><br/><span class=\"line\">    <span class=\"comment\">-- set_confdir之后，此uci都会去操作/tmp/etc/config目录</span></span><br/><span class=\"line\">    <span class=\"comment\">-- 作用域为本函数内</span></span><br/><span class=\"line\"><span class=\"keyword\">end</span></span><br/></pre></td></tr></tbody></table></figure>\n<h2 id=\"set-list\"><a href=\"#set-list\" class=\"headerlink\" title=\"set_list\"></a>set_list</h2><figure class=\"highlight avrasm\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/><span class=\"line\">11</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">local uci = require(<span class=\"string\">&#34;luci.model.uci&#34;</span>).cursor()</span><br/><span class=\"line\">local tbl = {</span><br/><span class=\"line\">    [<span class=\"number\">1</span>] = <span class=\"string\">&#34;3.3.3.3&#34;</span>,</span><br/><span class=\"line\">    [<span class=\"number\">2</span>] = <span class=\"string\">&#34;4.4.4.4&#34;</span></span><br/><span class=\"line\">}</span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"symbol\">uci:</span>set_list(<span class=\"string\">&#34;network&#34;</span>, <span class=\"string\">&#34;wan&#34;</span>, <span class=\"string\">&#34;dns&#34;</span>, tbl)</span><br/><span class=\"line\">或者</span><br/><span class=\"line\"><span class=\"symbol\">uci:</span>set_list(<span class=\"string\">&#34;network&#34;</span>, <span class=\"string\">&#34;wan&#34;</span>, <span class=\"string\">&#34;dns&#34;</span>, <span class=\"string\">&#34;5.5.5.5&#34;</span>)</span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"symbol\">uci:</span>commit(<span class=\"string\">&#34;network&#34;</span>)</span><br/></pre></td></tr></tbody></table></figure>\n<blockquote>\n<p>注意<code>set_list</code>会先删掉文件中的list项再添加进去。</p>\n</blockquote>\n<p>更多LuCI API在此：<a href=\"https://github.com/openwrt/luci/tree/master/documentation/api\" title=\"https://github.com/openwrt/luci/tree/master/documentation/api\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/openwrt/luci/tree/master/documentation/api</a></p>","text":"add123local uci = require(&#34;luci.model.uci&#34;).cursor()uci:add(&#34;wireless&#34;, &#34;wifi-iface&#34;)uci:commit(&#34;wireless&#34;) ...","link":"","photos":[],"count_time":{"symbolsCount":"4k","symbolsTime":"4 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#add\"><span class=\"toc-text\">add</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#delete\"><span class=\"toc-text\">delete</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#delete-all\"><span class=\"toc-text\">delete_all</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#foreach\"><span class=\"toc-text\">foreach</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#get\"><span class=\"toc-text\">get</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#get-all\"><span class=\"toc-text\">get_all</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#get-list\"><span class=\"toc-text\">get_list</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#section\"><span class=\"toc-text\">section</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#set\"><span class=\"toc-text\">set</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#set-confdir\"><span class=\"toc-text\">set_confdir</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#set-list\"><span class=\"toc-text\">set_list</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Rstudio编译Rmd报错：the fontspec package requires either XeTeX or LuaTeX.","uid":"8321b0e56927292feb575cbffdd7f59e","slug":"zl/2016-01-01-736_Rstudio编译Rmd报错：the fontspec package requires eithe","date":"2024-04-03T03:47:35.985Z","updated":"2024-04-03T03:47:35.985Z","comments":true,"path":"api/articles/zl/2016-01-01-736_Rstudio编译Rmd报错：the fontspec package requires eithe.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" 对于一些常规的报告，我一般是会写一个脚本来自动运行、生成格式化的模板。然后通过 R 的软件包 knitr 来实现自动化报告效果。这样可以十分方便的把数据分析与数据报告结合在一起，如果在分析端的脚本有变化，我们只需要把主要精力放在修改 R 脚本就可以了，而在报告端，在每次生成报告...","link":"","photos":[],"count_time":{"symbolsCount":"4.8k","symbolsTime":"4 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Lua数据结构 — lua_State（六）","uid":"46bcada2c326dc8ce4bff264b9dd7b9e","slug":"zl/2016-01-01-738_Lua数据结构 — lua_State（六）","date":"2024-04-03T03:47:35.985Z","updated":"2024-04-03T03:47:35.985Z","comments":true,"path":"api/articles/zl/2016-01-01-738_Lua数据结构 — lua_State（六）.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"前面各种Lua的数据类型基本都说得差不多了，剩下最后一个数据类型：lua_State，我们可以认为是”脚本上下文”，主要是包括当前脚本环境的运行状态信息，还会有gc相关的信息。 Lua这门语言考虑了多线程的情况，在脚本空间中能够开多个线程相关脚本上下文，而大家会共用一个全局脚本状...","link":"","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}