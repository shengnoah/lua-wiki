{"title":"lua 从字符串获取指定第几位数到第几位数","uid":"bbca48466625c192c15bcdb37f0ea93d","slug":"zl/2016-01-01-763_[Lua] lua 从字符串获取指定第几位数到第几位数 ","date":"2024-04-03T03:47:36.006Z","updated":"2024-04-03T03:47:36.006Z","comments":true,"path":"api/articles/zl/2016-01-01-763_[Lua] lua 从字符串获取指定第几位数到第几位数 .json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<p>– 判断utf8字符byte长度<br/>\n– 0xxxxxxx - 1 byte<br/>\n– 110yxxxx - 192, 2 byte<br/>\n– 1110yyyy - 225, 3 byte<br/>\n– 11110zzz - 240, 4 byte<br/>\nlocal function chsize(char)<br/>\n\t\tif not char then<br/>\n\t\t    print(“not char”)<br/>\n\t\t    return 0<br/>\n\t\t    elseif char &gt; 240 then<br/>\n\t\t    return 4<br/>\n\t\t    elseif char &gt; 225 then<br/>\n\t\t    return 3<br/>\n\t\t    elseif char &gt; 192 then<br/>\n\t\t    return 2<br/>\n\t\t    else<br/>\n\t\t    return 1<br/>\n\t    end<br/>\nend</p>\n<pre><code>-- 计算utf8字符串字符数, 各种字符都按一个字符计算\n-- 例如utf8len(&#34;1你好&#34;) =&gt; 3\nfunction utf8len(str)\n    local len = 0\n    local currentIndex = 1\n    while currentIndex &lt;= #str do\n\t    local char = string.byte(str, currentIndex)\n\t    currentIndex = currentIndex + chsize(char)\n\t    len = len +1\n    end\n    return len\nend\n<p>– 截取utf8 字符串<br />\n– str: 要截取的字符串<br />\n– startChar:   开始字符下标,从1开始<br />\n– numChars:要截取的字符长度<br />\nfunction utf8sub(str, startChar, numChars)<br />\nlocal startIndex = 1<br />\nwhile startChar &gt; 1 do<br />\nlocal char = string.byte(str, startIndex)<br />\nstartIndex = startIndex + chsize(char)<br />\nstartChar = startChar - 1<br />\nend</p>\n<pre><code>local currentIndex = startIndex\n\nwhile numChars &amp;gt; 0 and currentIndex &amp;lt;= #str do\n    local char = string.byte(str, currentIndex)\n    currentIndex = currentIndex + chsize(char)\n    numChars = numChars -1\nend\nreturn str:sub(startIndex, currentIndex - 1)\n</code></pre>\n<p>end</p>\n<p>– 自测<br />\nfunction test()<br />\n– test utf8len<br />\nassert(utf8len(&quot;你好1世界哈哈&quot;) == 7)<br />\nassert(utf8len(&quot;你好世界1哈哈 &quot;) == 8)<br />\nassert(utf8len(&quot; 你好世 界1哈哈&quot;) == 9)<br />\nassert(utf8len(&quot;12345678&quot;) == 8)<br />\nassert(utf8len(&quot;øpø你好pix&quot;) == 8)</p>\n<pre><code>-- test utf8sub\nassert(utf8sub(&amp;#34;你好1世界哈哈&amp;#34;,2,5) == &amp;#34;好1世界哈&amp;#34;)\nassert(utf8sub(&amp;#34;1你好1世界哈哈&amp;#34;,2,5) == &amp;#34;你好1世界&amp;#34;)\nassert(utf8sub(&amp;#34; 你好1世界 哈哈&amp;#34;,2,6) == &amp;#34;你好1世界 &amp;#34;)\nassert(utf8sub(&amp;#34;你好世界1哈哈&amp;#34;,1,5) == &amp;#34;你好世界1&amp;#34;)\nassert(utf8sub(&amp;#34;12345678&amp;#34;,3,5) == &amp;#34;34567&amp;#34;)\nassert(utf8sub(&amp;#34;øpø你好pix&amp;#34;,2,5) == &amp;#34;pø你好p&amp;#34;)\n\nprint(&amp;#34;all test succ&amp;#34;)\n</code></pre>\n<p>end</p>\n<p>test()<br />\n</code></pre></p>\n<hr/>\n<script async=\"\" defer=\"\" src=\"https://buttons.github.io/buttons.js\"></script>\n<p>Please <a class=\"github-button\" href=\"https://github.com/tsangsi/hexo-theme-tsangsi\" data-icon=\"octicon-star\" aria-label=\"Star tsangsi/hexo-theme-tsangsi on GitHub\" target=\"_blank\" rel=\"noopener noreferrer\">Star</a> this Project if you like it! <a class=\"github-button\" href=\"https://github.com/tsangsi\" aria-label=\"Follow @tsangsi on GitHub\" target=\"_blank\" rel=\"noopener noreferrer\">Follow</a> would also be appreciated!<br/>\nPeace!</p>\n<pre><code>            &lt;hr/&gt;\n            \n            \n\n            &lt;br/&gt;\n\n            \n            \n            \n\n            &lt;br/&gt;\n            \n            \n                \n                \n                &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css&quot;/&gt;\n                &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js&quot;&gt;&lt;/script&gt;\n            \n            \n            &lt;br/&gt;\n</code></pre>\n","text":"– 判断utf8字符byte长度 – 0xxxxxxx - 1 byte – 110yxxxx - 192, 2 byte – 1110yyyy - 225, 3 byte – 11110zzz - 240, 4 byte local function chsize(char) ...","link":"","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"LuaTable函数库","uid":"cb60e27e762dec313375f2a4e70391a8","slug":"zl/2016-01-01-762_LuaTable函数库","date":"2024-04-03T03:47:36.006Z","updated":"2024-04-03T03:47:36.006Z","comments":true,"path":"api/articles/zl/2016-01-01-762_LuaTable函数库.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"1234567table.insert(table,[ pos,] value) table.remove(table[, pos]) table.concat(table[, sep[, i[, j]]]) table.sort(table[, comp]) // 见Lua排序...","link":"","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"LeetCode 399. Evaluate Division","uid":"c93abbebcc2158e4112e5ecf116ad7f6","slug":"zl/2016-01-01-760_LeetCode 399. Evaluate Division","date":"2024-04-03T03:47:36.005Z","updated":"2024-04-03T03:47:36.006Z","comments":true,"path":"api/articles/zl/2016-01-01-760_LeetCode 399. Evaluate Division.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"题目描述给出方程式 A / B = k, 其中 A 和 B 均为代表字符串的变量， k 是一个浮点型数字。根据已知方程式求解问题，并返回计算结果。如果结果不存在，则返回 -1.0。 输入总是有效的。你可以假设除法运算中不会出现除数为0的情况，且不存在任何矛盾的结果。 tagDFS...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}