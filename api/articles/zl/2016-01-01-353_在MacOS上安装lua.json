{"title":"在MacOS上安装lua","uid":"f1c48820db2d5816d36c57e4c6858d6e","slug":"zl/2016-01-01-353_在MacOS上安装lua","date":"2024-04-03T03:47:35.631Z","updated":"2024-04-03T03:47:35.632Z","comments":true,"path":"api/articles/zl/2016-01-01-353_在MacOS上安装lua.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<p>下午心血来潮，想在MacOS上安装lua，但使用brew install lua安装lua报错，于是使用源码安装。</p>\n<p>lua官网：<a href=\"http://www.lua.org/\" target=\"_blank\" rel=\"noopener noreferrer\">http://www.lua.org/</a></p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/><span class=\"line\">11</span><br/><span class=\"line\">12</span><br/><span class=\"line\">13</span><br/><span class=\"line\">14</span><br/><span class=\"line\">15</span><br/><span class=\"line\">16</span><br/><span class=\"line\">17</span><br/><span class=\"line\">18</span><br/><span class=\"line\">19</span><br/><span class=\"line\">20</span><br/><span class=\"line\">21</span><br/><span class=\"line\">22</span><br/><span class=\"line\">23</span><br/><span class=\"line\">24</span><br/><span class=\"line\">25</span><br/><span class=\"line\">26</span><br/><span class=\"line\">27</span><br/><span class=\"line\">28</span><br/><span class=\"line\">29</span><br/><span class=\"line\">30</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">xionglie@lie-mac:~ $ brew install lua</span><br/><span class=\"line\">==&gt; Downloading http://www.lua.org/ftp/lua-5.1.4.tar.gz</span><br/><span class=\"line\">Already downloaded: /Library/Caches/Homebrew/lua-5.1.4.tar.gz</span><br/><span class=\"line\">==&gt; Patching</span><br/><span class=\"line\">patching file Makefile</span><br/><span class=\"line\">patching file src/Makefile</span><br/><span class=\"line\"></span><br/><span class=\"line\">patching file lcode.c</span><br/><span class=\"line\">patching file ldblib.c</span><br/><span class=\"line\">patching file liolib.c</span><br/><span class=\"line\">patching file llex.c</span><br/><span class=\"line\">patching file loadlib.c</span><br/><span class=\"line\">patching file lstrlib.c</span><br/><span class=\"line\">patching file lvm.c</span><br/><span class=\"line\">Error: Permission denied - /usr/<span class=\"built_in\">local</span>/lib/lua</span><br/><span class=\"line\">xionglie@lie-mac:~ $ sudo brew install lua</span><br/><span class=\"line\">Password:</span><br/><span class=\"line\">Error: Cowardly refusing to `sudo brew install<span class=\"string\">&#39;</span></span><br/><span class=\"line\"><span class=\"string\">You can use brew with sudo, but only if the brew executable is owned by root.</span></span><br/><span class=\"line\"><span class=\"string\">However, this is both not recommended and completely unsupported so do so at</span></span><br/><span class=\"line\"><span class=\"string\">your own risk.</span></span><br/><span class=\"line\"><span class=\"string\"></span></span><br/><span class=\"line\"><span class=\"string\">xionglie@lie-mac:~ $ ls -ld /usr/local/lib</span></span><br/><span class=\"line\"><span class=\"string\">drwxr-xr-x  5 24561  wheel  170 Feb 18 17:27 /usr/local/lib</span></span><br/><span class=\"line\"><span class=\"string\">#用户是24561，难道用户已经删除？</span></span><br/><span class=\"line\"><span class=\"string\">#后面一查确实是权限问题，使用下面两条命令可以解决</span></span><br/><span class=\"line\"><span class=\"string\">#sudo chown -R xionglie /usr/local/include</span></span><br/><span class=\"line\"><span class=\"string\">#sudo chown -R xionglie /usr/local/lib/</span></span><br/><span class=\"line\"><span class=\"string\">xionglie@lie-mac:~ $ ls -ld /usr/local/lib/lua</span></span><br/><span class=\"line\"><span class=\"string\">ls: /usr/local/lib/lua: No such file or directory</span></span><br/></pre></td></tr></tbody></table></figure>\n<h1 id=\"使用源码安装命令\"><a href=\"#使用源码安装命令\" class=\"headerlink\" title=\"使用源码安装命令\"></a>使用源码安装命令</h1><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://www.lua.org/ftp/lua-5.2.1.tar.gz</span><br/><span class=\"line\">tar zxf lua-5.2.1.tar.gz </span><br/><span class=\"line\"><span class=\"built_in\">cd</span> lua-5.2.1/src</span><br/><span class=\"line\">make macosx</span><br/><span class=\"line\">sudo cp lua /usr/bin/lua</span><br/></pre></td></tr></tbody></table></figure>\n<h1 id=\"测试：\"><a href=\"#测试：\" class=\"headerlink\" title=\"测试：\"></a>测试：</h1><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">xionglie@lie-mac:~ $ lua -v</span><br/><span class=\"line\">Lua 5.2.1  Copyright (C) 1994-2012 Lua.org, PUC-Rio</span><br/><span class=\"line\"></span><br/><span class=\"line\">xionglie@lie-mac:/tmp $ cat test.lua </span><br/><span class=\"line\">-- just <span class=\"built_in\">test</span></span><br/><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#34;Hello World&#34;</span>)</span><br/><span class=\"line\"></span><br/><span class=\"line\">xionglie@lie-mac:/tmp $ lua test.lua </span><br/><span class=\"line\">Hello World</span><br/></pre></td></tr></tbody></table></figure>\n<p>-———————————————-</p>\n<h3 id=\"参考：How-Do-I-Install-Lua-on-MacOS\"><a href=\"#参考：How-Do-I-Install-Lua-on-MacOS\" class=\"headerlink\" title=\"参考：How Do I Install Lua on MacOS?\"></a>参考：How Do I Install Lua on MacOS?</h3><p>来源：<a href=\"http://stackoverflow.com/questions/5496003/how-do-i-install-lua-on-macos\" target=\"_blank\" rel=\"noopener noreferrer\">http://stackoverflow.com/questions/5496003/how-do-i-install-lua-on-macos</a> </p>\n<p>Compiling from source code is not that painful.<br/>Lua 5.1.4 here: <a href=\"http://www.lua.org/ftp/lua-5.1.4.tar.gz\" target=\"_blank\" rel=\"noopener noreferrer\">http://www.lua.org/ftp/lua-5.1.4.tar.gz</a> Lua 5.2 alpha here: <a href=\"http://www.lua.org/work/lua-5.2.0-alpha.tar.gz\" target=\"_blank\" rel=\"noopener noreferrer\">http://www.lua.org/work/lua-5.2.0-alpha.tar.gz</a></p>\n<p>Take Lua 5.2 as example:</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#Open your Terminal.app </span></span><br/><span class=\"line\">wget http://www.lua.org/work/lua-5.2.0-alpha.tar.gz    </span><br/><span class=\"line\">tar xvzf lua-5.2.0-alpha.tar.gz     </span><br/><span class=\"line\"><span class=\"built_in\">cd</span> lua-5.2.0-alpha/src    </span><br/><span class=\"line\">make macosx(I believe you have Xcode installed)      </span><br/><span class=\"line\"><span class=\"comment\">#After that, you can see &#39;lua&#39; binary under current dir.    </span></span><br/><span class=\"line\">sudo cp lua /usr/bin/lua</span><br/></pre></td></tr></tbody></table></figure>\n<p>Now you can enter lua to have a try. :)   </p>\n<pre><code>  &lt;script&gt;\n    window.disqusProxy=&#123;\n      shortname: 'quxionglie',\n      username: 'xionglieq',\n      server: 'disqus.quxionglie.com',\n      port: 443,\n      adminAvatar: '/avatars/admin-avatar.jpg',\n      identifier: '2013/02/18/install-lua-in-mac-os/',\n    &#125;;\n    window.disqus_config = function () &#123;\n      this.page.url = window.location.href;\n      this.page.identifier = window.disqusProxy.identifier;\n    &#125;;\n  &lt;/script&gt;\n</code></pre>\n","text":"下午心血来潮，想在MacOS上安装lua，但使用brew install lua安装lua报错，于是使用源码安装。 lua官网：http://www.lua.org/ 123456789101112131415161718192021222324252627282930xiong...","link":"","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">使用源码安装命令</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%B5%8B%E8%AF%95%EF%BC%9A\"><span class=\"toc-text\">测试：</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%EF%BC%9AHow-Do-I-Install-Lua-on-MacOS\"><span class=\"toc-text\">参考：How Do I Install Lua on MacOS?</span></a></li></ol></li></ol></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"lua gc分析","uid":"907fabdd67222b9ee3c6f8c656f559b7","slug":"zl/2016-01-01-352_lua gc分析","date":"2024-04-03T03:47:35.631Z","updated":"2024-04-03T03:47:35.631Z","comments":true,"path":"api/articles/zl/2016-01-01-352_lua gc分析.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"说明分析lua使用的gc算法，如何做到分步gc，以及测试结论 gc算法分析lua gc采用的是标记-清除算法，即一次gc分两步： 从根节点开始遍历gc对象，如果可达，则标记 遍历所有的gc对象，清除没有被标记的对象 二色标记法lua 5.1之前采用的算法，二色回收法是最简单的标记...","link":"","photos":[],"count_time":{"symbolsCount":"6.5k","symbolsTime":"6 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"xLua热更新1之C#调用Lua","uid":"2531aeaf829a20fea675fbd0715527b5","slug":"zl/2016-01-01-350_xLua热更新1之C#调用Lua","date":"2024-04-03T03:47:35.630Z","updated":"2024-04-03T03:47:35.630Z","comments":true,"path":"api/articles/zl/2016-01-01-350_xLua热更新1之C#调用Lua.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"思考并回答以下问题：1.如何创建一个空表？ 前面学习了lua编程，使用xLua热更新的时候，很多代码都是使用lua来编写的。但是到目前为止我们学习的内容都还很孤立，C#代码是C#代码，lua代码是lua代码，那么他们之间怎么联系在一起呢？ 有时候，需要在C#中访问Lua中的数据或...","link":"","photos":[],"count_time":{"symbolsCount":"4.7k","symbolsTime":"4 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}