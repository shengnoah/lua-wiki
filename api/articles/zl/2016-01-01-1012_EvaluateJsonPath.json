{"title":"EvaluateJsonPath","uid":"6ada5b16eb62f7135210cbcb788ea780","slug":"zl/2016-01-01-1012_EvaluateJsonPath","date":"2024-04-03T03:47:32.965Z","updated":"2024-04-03T03:47:32.965Z","comments":true,"path":"api/articles/zl/2016-01-01-1012_EvaluateJsonPath.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<hr/> <p>编辑人：<strong><strong>酷酷的诚</strong></strong>  邮箱：<strong>zhangchengk@foxmail.com</strong></p> <hr/> <p>内容：</p> <h2 id=\"描述\"><a href=\"#描述\" class=\"header-anchor\">#</a> 描述</h2> <p>该处理器根据流文件的内容计算一个或多个JsonPath表达式。这些表达式的结果被写入到FlowFile属性，或者写入到FlowFile本身的内容中，这取决于处理器的配置。通过添加用户自定义的属性来输入jsonpath，添加的属性的名称映射到输出流中的属性名称(如果目标是flowfile-attribute;否则，属性名将被忽略)。属性的值必须是有效的JsonPath表达式。“auto-detect”的返回类型将根据配置的目标进行确定。当“Destination”被设置为“flowfile-attribute”时，将使用“scalar”的返回类型。当“Destination”被设置为“flowfile-content”时，将使用“JSON”返回类型。如果JsonPath计算为JSON数组或JSON对象，并且返回类型设置为“scalar”，则流文件将不进行修改，并将路由到失败。如果所提供的JsonPath计算为指定的值，JSON的返回类型可以返回“scalar”。如果目标是“flowfile-content”，并且JsonPath没有计算到一个已定义的路径，那么流文件将被路由到“unmatched”，无需修改其内容。如果目标是“flowfile-attribute”，而表达式不匹配任何内容，那么将使用空字符串创建属性作为值，并且FlowFile将始终被路由到“matched”。</p> <h2 id=\"属性配置\"><a href=\"#属性配置\" class=\"header-anchor\">#</a> 属性配置</h2> <p>在下面的列表中，必需属性的名称以粗体显示。任何其他属性(不是粗体)都被认为是可选的，并且指出属性默认值（如果有默认值），以及属性是否支持表达式语言。</p> <table><thead><tr><th style=\"text-align:left\">属性名称</th> <th style=\"text-align:left\">默认值</th> <th style=\"text-align:left\">可选值</th> <th style=\"text-align:left\">描述</th></tr></thead> <tbody><tr><td style=\"text-align:left\"><strong>Destination</strong></td> <td style=\"text-align:left\">flowfile-content</td> <td style=\"text-align:left\"><li>flowfile-content</li><li>flowfile-content</li></td> <td style=\"text-align:left\">指示是否将JsonPath计算结果写入流文件内容或流文件属性;如果使用flowfile-attribute，则必须指定属性名称属性。如果设置为flowfile-content，则只能指定一个JsonPath，并且忽略属性名。</td></tr> <tr><td style=\"text-align:left\"><strong>Return Type</strong></td> <td style=\"text-align:left\">auto-detect</td> <td style=\"text-align:left\"><li>auto-detect</li><li>json</li><li>scalar</li></td> <td style=\"text-align:left\">指示JSON路径表达式的期望返回类型。选择“auto-detect”，“flowfile-content”的返回类型自动设置为“json”，“flowfile-attribute”的返回类型自动设置为“scalar”。</td></tr> <tr><td style=\"text-align:left\"><strong>Path Not Found Behavior</strong></td> <td style=\"text-align:left\">ignore</td> <td style=\"text-align:left\"><li>warn</li><li>ignore</li></td> <td style=\"text-align:left\">指示在将Destination设置为“flowfile-attribute”时如何处理丢失的JSON路径表达式。当没有找到JSON路径表达式时，选择“warn”将生成一个警告。</td></tr> <tr><td style=\"text-align:left\"><strong>Null Value Representation</strong></td> <td style=\"text-align:left\">empty string</td> <td style=\"text-align:left\"><li>empty string</li><li>empty string</li></td> <td style=\"text-align:left\">指示产生空值的JSON路径表达式的所需表示形式。</td></tr></tbody></table> <h2 id=\"动态属性：\"><a href=\"#动态属性：\" class=\"header-anchor\">#</a> 动态属性：</h2> <p>该处理器允许用户指定属性的名称和值。</p> <table><thead><tr><th style=\"text-align:left\">属性名称</th> <th style=\"text-align:left\">属性值</th> <th style=\"text-align:left\">描述</th></tr></thead> <tbody><tr><td style=\"text-align:left\">用户自由定义的属性名称</td> <td style=\"text-align:left\">用户自由定义的属性值</td> <td style=\"text-align:left\">在该处理器生成的文件流上添加用户自定义的属性。如果使用表达式语言，则每批生成的流文件只执行一次计算 .<br/>支持表达式语言:true(只使用变量注册表进行计算)</td></tr></tbody></table> <h2 id=\"连接关系\"><a href=\"#连接关系\" class=\"header-anchor\">#</a> 连接关系</h2> <table><thead><tr><th style=\"text-align:left\">名称</th> <th style=\"text-align:left\">描述</th></tr></thead> <tbody><tr><td style=\"text-align:left\">failure</td> <td style=\"text-align:left\">当不能根据流文件的内容计算JsonPath时，流文件被路由到这个关系;例如，如果流文件不是有效的JSON</td></tr> <tr><td style=\"text-align:left\">unmatched</td> <td style=\"text-align:left\">当JsonPath不匹配流文件的内容，并且目标被设置为流文件内容时，流文件被路由到这个关系</td></tr> <tr><td style=\"text-align:left\">matched</td> <td style=\"text-align:left\">当成功地计算了JsonPath并修改了流文件后，流文件将被路由到这个关系</td></tr></tbody></table> <h2 id=\"读取属性\"><a href=\"#读取属性\" class=\"header-anchor\">#</a> 读取属性</h2> <p>没有指定。</p> <h2 id=\"写属性\"><a href=\"#写属性\" class=\"header-anchor\">#</a> 写属性</h2> <p>没有指定。</p> <h2 id=\"状态管理\"><a href=\"#状态管理\" class=\"header-anchor\">#</a> 状态管理</h2> <p>此组件不存储状态。</p> <h2 id=\"限制\"><a href=\"#限制\" class=\"header-anchor\">#</a> 限制</h2> <p>此组件不受限制。</p> <h2 id=\"输入要求\"><a href=\"#输入要求\" class=\"header-anchor\">#</a> 输入要求</h2> <p>此组件需要传入关系。</p> <h2 id=\"系统资源方面的考虑\"><a href=\"#系统资源方面的考虑\" class=\"header-anchor\">#</a> 系统资源方面的考虑</h2> <p>没有指定。</p> <h2 id=\"应用场景\"><a href=\"#应用场景\" class=\"header-anchor\">#</a> 应用场景</h2> <p>通常当需要从流文件json中提取某些数据作为流属性时，使用此处理器；或者从流文件json内容中提取一部分内容作为下一个流文件内容，使用此处理器。</p> <h2 id=\"示例说明\"><a href=\"#示例说明\" class=\"header-anchor\">#</a> 示例说明</h2> <p>流程模板xml(1.9.2)</p> <a href=\"../template/EvaluateJsonPath.xml\" download=\"EvaluateJsonPath.xml\">EvaluateJsonPath.xml</a> <p>1：提取流文件json内容，作为输出流的属性。（注意：当输出选择flowfile-attribute时，及时jsonpath匹配不到值，流文件也会路由到matched）</p> <p><img src=\"https://nifichina.gitee.io/image/processors/EvaluateJsonPath/config.png\" alt=\"\"/></p> <p>输入json如下：</p> <p><img src=\"https://nifichina.gitee.io/image/processors/EvaluateJsonPath/input.png\" alt=\"\"/></p> <p>输出结果如下：</p> <p><img src=\"https://nifichina.gitee.io/image/processors/EvaluateJsonPath/result.png\" alt=\"\"/></p> <p>2：提取流文件json内容，作为输出流的内容。（注意：当选择flowfile-content时，用户只能自定义添加一个属性；如果jsonPath匹配不到，会路由到unmatched）</p> <p><img src=\"https://nifichina.gitee.io/image/processors/EvaluateJsonPath/config2.png\" alt=\"\"/></p> <p>输出流内容：</p> <p><img src=\"https://nifichina.gitee.io/image/processors/EvaluateJsonPath/result2.png\" alt=\"\"/></p>","text":" 编辑人：酷酷的诚 邮箱：zhangchengk@foxmail.com 内容： # 描述 该处理器根据流文件的内容计算一个或多个JsonPath表达式。这些表达式的结果被写入到FlowFile属性，或者写入到FlowFile本身的内容中，这取决于处理器的配置。通过添加用户自定义...","link":"","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%8F%8F%E8%BF%B0\"><span class=\"toc-text\"> 描述</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\"> 属性配置</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8A%A8%E6%80%81%E5%B1%9E%E6%80%A7%EF%BC%9A\"><span class=\"toc-text\"> 动态属性：</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%BF%9E%E6%8E%A5%E5%85%B3%E7%B3%BB\"><span class=\"toc-text\"> 连接关系</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AF%BB%E5%8F%96%E5%B1%9E%E6%80%A7\"><span class=\"toc-text\"> 读取属性</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%86%99%E5%B1%9E%E6%80%A7\"><span class=\"toc-text\"> 写属性</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86\"><span class=\"toc-text\"> 状态管理</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%99%90%E5%88%B6\"><span class=\"toc-text\"> 限制</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%BE%93%E5%85%A5%E8%A6%81%E6%B1%82\"><span class=\"toc-text\"> 输入要求</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90%E6%96%B9%E9%9D%A2%E7%9A%84%E8%80%83%E8%99%91\"><span class=\"toc-text\"> 系统资源方面的考虑</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\"> 应用场景</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%A4%BA%E4%BE%8B%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\"> 示例说明</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Leetcode 399. Evaluate Division","uid":"1300e83de63ca3d0070502fbe18c1926","slug":"zl/2016-01-01-1015_Leetcode 399. Evaluate Division","date":"2024-04-03T03:47:32.966Z","updated":"2024-04-03T03:47:32.966Z","comments":true,"path":"api/articles/zl/2016-01-01-1015_Leetcode 399. Evaluate Division.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"Equations are given in the format A / B = k, where A and B are variables represented as strings, and k is a real number (floating point numb...","link":"","photos":[],"count_time":{"symbolsCount":"4k","symbolsTime":"4 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"下载LuaPerfect","uid":"b77d75c0d82f24b7c62a31671d26ce11","slug":"zl/2016-01-01-1013_下载LuaPerfect","date":"2024-04-03T03:47:32.965Z","updated":"2024-04-03T03:47:32.966Z","comments":true,"path":"api/articles/zl/2016-01-01-1013_下载LuaPerfect.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"官方QQ群下载 LuaPerfect官方群(932801740)下载(速度快，推荐) GitHub下载 LuaPerfect GitHub仓库(https://github.com/jiangzheng1986/LuaPerfect)下载 腾讯云下载 腾讯云下载(http://1...","link":"","photos":[],"count_time":{"symbolsCount":740,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}