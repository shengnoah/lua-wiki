{"title":"安卓上为什么不能运行64位LuaJIT字节码","uid":"a2f44b7309ff4ebdd1c5a7616afc0344","slug":"zl/2016-01-01-828_安卓上为什么不能运行64位LuaJIT字节码","date":"2024-04-03T03:47:36.074Z","updated":"2024-04-03T03:47:36.075Z","comments":true,"path":"api/articles/zl/2016-01-01-828_安卓上为什么不能运行64位LuaJIT字节码.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<div class=\"entry\">\n<pre><code>    &lt;h3 id=&quot;安卓上为什么不能运行64位LuaJIT字节码&quot;&gt;&lt;a href=&quot;#安卓上为什么不能运行64位LuaJIT字节码&quot; class=&quot;headerlink&quot; title=&quot;安卓上为什么不能运行64位LuaJIT字节码&quot;&gt;&lt;/a&gt;安卓上为什么不能运行64位LuaJIT字节码&lt;/h3&gt;&lt;p&gt;今天在测试安卓下是否可以运行64位的LuaJIT字节码时出现了一个报错。错误说加载了错误格式的字节码，而32位的字节码可以正常运行。这就很纳闷了，为啥64位的安卓应用依然只能读取32位的字节码呢？&lt;/p&gt;\n</code></pre>\n<p>仔细查阅了一下以后发现，苹果在15年强制新提交的应用必须支持64位之后，Unity紧赶慢赶的在4.6.2以上的版本增加了对IOS64位的支持，但是Unity官方对于64位安卓应用的构建遥遥无期，一方面64位Android可以良好的兼容32位应用，再一个谷歌也没有强行的去推进这件事情，所以目前绝大多数的安卓应用还是32位的。</p>\n<p>那么Unity目前在安卓上是否支持64位的应用呢，在官方文档中，我没有找到直接的描述，只是在Android Build Setting中找到了一个Device filer字段，它可以控制构建应用所支持的CPU架构。Device filer 支持x86/armv7/FAT(x86+armv7)这三种选项（这可能也是为什么xLua构建安卓库的时候只会构建出x86和armabi-v7a两个架构的.so文件，因为Unity就只支持这两个目标架构，=。= 纯属猜测），从选项就可以看出来，在2017.4之前，Unity是不支持构建64位安卓应用的。</p>\n<p>不过在<a href=\"https://docs.unity3d.com/2017.3/Documentation/Manual/class-PlayerSettingsAndroid.html\" target=\"_blank\" rel=\"noopener noreferrer\">2017.4的官方文档</a>中,增加了Target Architectures这个属性配置，它增加了arm64的构建选项，不过在2017.4这个版本，该字段还处于实验性质。Target Architectures在Unity2018中已经可以正式使用了，这代表着我们终于可以在Unity中构建64位的安卓应用了。</p>\n<h4 id=\"拓展阅读：Unity-Android-Plugin-目录下为什么会有那么多文件夹-有空对这一部分的内容做整理\"><a href=\"#拓展阅读：Unity-Android-Plugin-目录下为什么会有那么多文件夹-有空对这一部分的内容做整理\" class=\"headerlink\" title=\"拓展阅读：Unity Android Plugin 目录下为什么会有那么多文件夹(有空对这一部分的内容做整理)\"></a>拓展阅读：Unity Android Plugin 目录下为什么会有那么多文件夹(有空对这一部分的内容做整理)</h4><p><a href=\"https://blog.csdn.net/nongminkouhao/article/details/81048857\" target=\"_blank\" rel=\"noopener noreferrer\">具体项目中如何适配安卓.so库的</a></p>\n<p>在不考虑包体的情况下，适配的CPU架构越多兼容性越好。（不用目录的.so库数量一定要一样，不然会出现找不到库的Bug，具体原因见–<a href=\"https://zhuanlan.zhihu.com/p/21359984\" target=\"_blank\" rel=\"noopener noreferrer\">与.so有关的大坑</a>）</p>\n<p>针对于安卓平台上7中cpu指令集，以及其各自的兼容性，参见<a href=\"https://www.jianshu.com/p/9532911ecc8b\" target=\"_blank\" rel=\"noopener noreferrer\">为何Twitter区别于微信、淘宝，只使用了armeabi-v7a？</a></p>\n<pre><code>&lt;/div&gt;\n</code></pre>\n","text":" &lt;h3 id=&quot;安卓上为什么不能运行64位LuaJIT字节码&quot;&gt;&lt;a href=&quot;#安卓上为什么不能运行64位LuaJIT字节码&quot; class=&quot;headerlink&quot; title=&quot;安卓上...","link":"","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8B%93%E5%B1%95%E9%98%85%E8%AF%BB%EF%BC%9AUnity-Android-Plugin-%E7%9B%AE%E5%BD%95%E4%B8%8B%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E6%9C%89%E9%82%A3%E4%B9%88%E5%A4%9A%E6%96%87%E4%BB%B6%E5%A4%B9-%E6%9C%89%E7%A9%BA%E5%AF%B9%E8%BF%99%E4%B8%80%E9%83%A8%E5%88%86%E7%9A%84%E5%86%85%E5%AE%B9%E5%81%9A%E6%95%B4%E7%90%86\"><span class=\"toc-text\">拓展阅读：Unity Android Plugin 目录下为什么会有那么多文件夹(有空对这一部分的内容做整理)</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"lua","uid":"df60e476b394b1dd4755ec96c53302ff","slug":"zl/2016-01-01-829_lua","date":"2024-04-03T03:47:36.075Z","updated":"2024-04-03T03:47:36.075Z","comments":true,"path":"api/articles/zl/2016-01-01-829_lua.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"lua-resty-lrucache深入解析lua-resty-lrucache是openresty里常用的缓存，是一个worker级别的缓存，也是一个最近最少使用的缓存，下面我们来具体分析它的实现过程。 使用示例123456789101112131415161718192021...","link":"","photos":[],"count_time":{"symbolsCount":"7.3k","symbolsTime":"7 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Lua 初步学习","uid":"0516f1c2b440e6827cf564d329f9637c","slug":"zl/2016-01-01-824_Lua 初步学习","date":"2024-04-03T03:47:36.073Z","updated":"2024-04-03T03:47:36.073Z","comments":true,"path":"api/articles/zl/2016-01-01-824_Lua 初步学习.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"1 所谓的“交互式编程” Lua提供了交互式编程模式,我们可以在命令行中输入程序并立即查看效果。 Lua 交互式编程模式可以通过命令 lua -i 或 lua 来启用 2 所谓的“脚本式编程” 我们将代码写入.lua文件，然后执行，就是脚本式编程。 eg: WangBingdeM...","link":"","photos":[],"count_time":{"symbolsCount":680,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}