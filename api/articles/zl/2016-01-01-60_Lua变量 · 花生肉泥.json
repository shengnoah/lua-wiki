{"title":"Lua变量 · 花生肉泥","uid":"cd4bff438f584938bc08bea4cb84a008","slug":"zl/2016-01-01-60_Lua变量 · 花生肉泥","date":"2024-04-03T03:47:35.838Z","updated":"2024-04-03T03:47:35.839Z","comments":true,"path":"api/articles/zl/2016-01-01-60_Lua变量 · 花生肉泥.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<p>lua中有三种变量：全局变量，局部变量，还有table的域</p>\n<p>在变量的首次赋值之前，变量的值均为nil</p>\n<h3 id=\"全局变量\"><a href=\"#全局变量\" class=\"headerlink\" title=\"全局变量\"></a>全局变量</h3><p>全局变量不需要声明，给一个变量赋值后即创建了这个全局变量，访问一个没有初始化的全局变量也不会出错，只不过得到的结果是：nil<br/></p><figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">print</span>(a)     </span><br/><span class=\"line\">a = <span class=\"number\">1</span></span><br/><span class=\"line\"><span class=\"built_in\">print</span>(a)     <span class=\"comment\">-- 1</span></span><br/></pre></td></tr></tbody></table></figure><p></p>\n<p>当你想删除一个全局变量，只需要将变量赋值为nil</p>\n<p>当且仅当一个变量不等于nil时，这个变量存在</p>\n<h3 id=\"局部变量\"><a href=\"#局部变量\" class=\"headerlink\" title=\"局部变量\"></a>局部变量</h3><p>局部变量有其作用范围，局部变量可以被定义在它作用范围中的函数自由使用，局部变量可以在语句块总任何地方申明，应该尽可能的使用局部变量，好处有两个</p>\n<p>1.避免命名冲突</p>\n<p>2.访问局部变量的速度比全局变量更快<br/></p><figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/><span class=\"line\">11</span><br/><span class=\"line\">12</span><br/><span class=\"line\">13</span><br/><span class=\"line\">14</span><br/><span class=\"line\">15</span><br/><span class=\"line\">16</span><br/><span class=\"line\">17</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">a = <span class=\"number\">5</span>     <span class=\"comment\">-- 全局变量</span></span><br/><span class=\"line\"><span class=\"keyword\">local</span> b = <span class=\"number\">5</span>     <span class=\"comment\">-- 局部变量</span></span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span></span></span><br/><span class=\"line\">     c = <span class=\"number\">5</span>     <span class=\"comment\">-- 全局变量</span></span><br/><span class=\"line\">     <span class=\"keyword\">local</span> d = <span class=\"number\">6</span>     <span class=\"comment\">-- 局部变量</span></span><br/><span class=\"line\"><span class=\"keyword\">end</span></span><br/><span class=\"line\"></span><br/><span class=\"line\">joke()</span><br/><span class=\"line\"><span class=\"built_in\">print</span>(c,d)     <span class=\"comment\">-- 5 nil</span></span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"keyword\">do</span></span><br/><span class=\"line\">     <span class=\"keyword\">local</span> a = <span class=\"number\">6</span>     <span class=\"comment\">-- 局部变量</span></span><br/><span class=\"line\">     b = <span class=\"number\">6</span>     <span class=\"comment\">--全局变量</span></span><br/><span class=\"line\">     <span class=\"built_in\">print</span>(a,b)     <span class=\"comment\">-- 6 6</span></span><br/><span class=\"line\"><span class=\"keyword\">end</span></span><br/><span class=\"line\"><span class=\"built_in\">print</span>(a,b)     <span class=\"comment\">-- 5 6</span></span><br/></pre></td></tr></tbody></table></figure><p></p>","text":"lua中有三种变量：全局变量，局部变量，还有table的域 在变量的首次赋值之前，变量的值均为nil 全局变量全局变量不需要声明，给一个变量赋值后即创建了这个全局变量，访问一个没有初始化的全局变量也不会出错，只不过得到的结果是：nil123print(a) a = 1print(...","link":"","photos":[],"count_time":{"symbolsCount":566,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">全局变量</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">局部变量</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"如何用 openresty + lua 快速搭建一个简单网站","uid":"8b44d23281c1aae6a8ca72eab735ba22","slug":"zl/2016-01-01-609_如何用 openresty + lua 快速搭建一个简单网站","date":"2024-04-03T03:47:35.838Z","updated":"2024-04-03T03:47:35.838Z","comments":true,"path":"api/articles/zl/2016-01-01-609_如何用 openresty + lua 快速搭建一个简单网站.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"最近在折腾 OpenResty，OpenResty 就不用多介绍了，这方面国内质量好的资料也不多，如果非要选一个入门级别的资料，自然是《OpenResty 最佳实践》。断断续续看了一些 Lua 的语法和 OpenResty 基础，就想做点什么练练手。碰巧某天。同事介绍了几个 Op...","link":"","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Lua数据结构 — Table（三）","uid":"66c23c3909eeebcdd70f5da0ee749c92","slug":"zl/2016-01-01-604_Lua数据结构 — Table（三）","date":"2024-04-03T03:47:35.837Z","updated":"2024-04-03T03:47:35.837Z","comments":true,"path":"api/articles/zl/2016-01-01-604_Lua数据结构 — Table（三）.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" 文章目录 &lt;/div&gt; &lt;p&gt;前面（一）、（二）里面其实已经把一些常用的数据类型（数值、布尔、字符串）说明了，这次要描述的是Table，Table在Lua里是一种常用的数据类型，是Lua里的精髓之一，其效率必须得到保证，而实现这种支持任意类型key和va...","link":"","photos":[],"count_time":{"symbolsCount":"3.9k","symbolsTime":"4 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}