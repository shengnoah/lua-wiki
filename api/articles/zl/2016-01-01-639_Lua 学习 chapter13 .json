{"title":"Lua 学习 chapter13","uid":"785c99c78bd1541228130f3215e26238","slug":"zl/2016-01-01-639_Lua 学习 chapter13 ","date":"2024-04-03T03:47:35.862Z","updated":"2024-04-03T03:47:35.862Z","comments":true,"path":"api/articles/zl/2016-01-01-639_Lua 学习 chapter13 .json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h3 id=\"目录\">目录</h3>\n<ol>\n  <li>位和字节</li>\n  <li>无符号的输出</li>\n  <li>打包和解包二进制数据</li>\n</ol>\n<blockquote>\n  <p>What is the cost of lies? It’s not that we’ll mistake them for the truth. The real danger is that if we hear enough lies, then we no longer recognize the truth at all. What can we do then? What else is left but to abandon even the hope of truth and content ourselves instaed with stories? In these stories, it doesn’t matter who the heroes are. All we want to know is: who is to blame? No friends. Or, at least, not important ones.</p>\n</blockquote>\n<h2 id=\"位和字节\">位和字节</h2>\n<p>在lua中位运算和其它语言基本一致，包含按位与、按位或、按位异或、按位取反、逻辑右移以及逻辑左移。</p>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><table class=\"rouge-table\"><tbody><tr><td class=\"rouge-gutter gl\"><pre class=\"lineno\">1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n</pre></td><td class=\"rouge-code\"><pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.format</span><span class=\"p\">(</span><span class=\"s2\">&#34;%x&#34;</span><span class=\"p\">,</span> <span class=\"mh\">0xff</span> <span class=\"err\">&amp;</span> <span class=\"mh\">0xabcd</span><span class=\"p\">))</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.format</span><span class=\"p\">(</span><span class=\"s2\">&#34;%x&#34;</span><span class=\"p\">,</span> <span class=\"mh\">0xff</span> <span class=\"err\">|</span> <span class=\"mh\">0xabcd</span><span class=\"p\">))</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.format</span><span class=\"p\">(</span><span class=\"s2\">&#34;%x&#34;</span><span class=\"p\">,</span> <span class=\"mh\">0xff</span> <span class=\"err\">~</span> <span class=\"mh\">0xabcd</span><span class=\"p\">))</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.format</span><span class=\"p\">(</span><span class=\"s2\">&#34;%x&#34;</span><span class=\"p\">,</span> <span class=\"err\">~</span><span class=\"mh\">0xff</span><span class=\"p\">))</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.format</span><span class=\"p\">(</span><span class=\"s2\">&#34;%x&#34;</span><span class=\"p\">,</span> <span class=\"mh\">0xff</span> <span class=\"o\">&gt;&gt;</span> <span class=\"o\">-</span><span class=\"mi\">12</span><span class=\"p\">))</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.format</span><span class=\"p\">(</span><span class=\"s2\">&#34;%x&#34;</span><span class=\"p\">,</span> <span class=\"mh\">0xff</span> <span class=\"o\">&lt;&lt;</span> <span class=\"mi\">12</span><span class=\"p\">))</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.format</span><span class=\"p\">(</span><span class=\"s2\">&#34;%x&#34;</span><span class=\"p\">,</span> <span class=\"mh\">0xff</span> <span class=\"o\">&lt;&lt;</span> <span class=\"mi\">80</span><span class=\"p\">))</span>\n<span class=\"cm\">--[[\ncd\nabff\nab32\nffffffffffffff00\nff000\nff000\n0\n--]]</span>\n<p></pre></td></tr></tbody></table></code></pre></div></div></p>\n<h2 id=\"无符号的输出\">无符号的输出</h2>\n<p>整形表示中使用一个比特来存储符号位，所以用来表示最大的整数就是2^63 - 1,而不是64次方。</p>\n<h2 id=\"打包和解包二进制数据\">打包和解包二进制数据</h2>\n<p>函数string.pack会把值打包为二进制字符串，而unpack则从中提取这些值。 \n在下面的例子里面，打包成什么格式的字符串取决于什么样的编码方式，不同的数据编码方式也不同。</p>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><table class=\"rouge-table\"><tbody><tr><td class=\"rouge-gutter gl\"><pre class=\"lineno\">1\n2\n</pre></td><td class=\"rouge-code\"><pre><span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"n\">string</span><span class=\"p\">.</span><span class=\"n\">pack</span><span class=\"p\">(</span><span class=\"s2\">&#34;iii&#34;</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">23</span><span class=\"p\">)</span>\n<span class=\"n\">string</span><span class=\"p\">.</span><span class=\"n\">unpack</span><span class=\"p\">(</span><span class=\"s2\">&#34;iii&#34;</span><span class=\"p\">,</span><span class=\"n\">s</span><span class=\"p\">)</span>\n</pre></td></tr></tbody></table></code></pre></div></div>\n<p>整形：</p>\n<ol>\n  <li>b(char)</li>\n  <li>h(short)</li>\n  <li>i(int)</li>\n  <li>l(long)</li>\n  <li>j(lua语言中整数的大小)</li>\n  <li>in(n代表大小，7会产生7个字节的整形数）</li>\n</ol>\n<p>字符串：</p>\n<ol>\n  <li>z(","text":"目录 位和字节 无符号的输出 打包和解包二进制数据 What is the cost of lies? It’s not that we’ll mistake them for the truth. The real danger is that if we hear enoug...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">目录</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BD%8D%E5%92%8C%E5%AD%97%E8%8A%82\"><span class=\"toc-text\">位和字节</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%97%A0%E7%AC%A6%E5%8F%B7%E7%9A%84%E8%BE%93%E5%87%BA\"><span class=\"toc-text\">无符号的输出</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%89%93%E5%8C%85%E5%92%8C%E8%A7%A3%E5%8C%85%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">打包和解包二进制数据</span></a>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Lua之面向对象个人总结","uid":"852c964e0ebf9776baeac392aedb9bd9","slug":"zl/2016-01-01-642_Lua之面向对象个人总结","date":"2024-04-03T03:47:35.863Z","updated":"2024-04-03T03:47:35.863Z","comments":true,"path":"api/articles/zl/2016-01-01-642_Lua之面向对象个人总结.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" 面向对象的三个特征：封装、继承和多态。Lua并没有类，没有直接实现面向对象的方法。不过Lua的Table，有内部对象和内部方法。Lua的面向对象主要是通过Table来模拟面向对象。 封装在Lua之Table学习中，曾以Computer为例子，介绍了Table 也是可以有自己内部...","link":"","photos":[],"count_time":{"symbolsCount":"7.5k","symbolsTime":"7 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"lua字符串类型","uid":"e9c8249153b2d6da8dc4410333e5d78b","slug":"zl/2016-01-01-63_lua字符串类型","date":"2024-04-03T03:47:35.862Z","updated":"2024-04-03T03:47:35.862Z","comments":true,"path":"api/articles/zl/2016-01-01-63_lua字符串类型.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"Lua中字符串结构体的定义是: typedef union TString &#123; L_Umaxalign dummy; /* ensures maximum alignment for strings */ struct &#123; CommonHeader; lu_b...","link":"","photos":[],"count_time":{"symbolsCount":"2.3k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}