{"title":"Lua","uid":"15b0cdc6d03f6c3f6bf8d3a7ff197317","slug":"zl/2016-01-01-784_Lua","date":"2024-04-03T03:47:36.023Z","updated":"2024-04-03T03:47:36.024Z","comments":true,"path":"api/articles/zl/2016-01-01-784_Lua.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h2 id=\"table-操作\"><a href=\"#table-操作\" class=\"headerlink\" title=\"table 操作\"></a>table 操作</h2>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">函数</th>\n<th style=\"text-align:left\">解释</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">table.concat (table [, step [, start [, end]]])</td>\n<td style=\"text-align:left\">函数列出参数中指定table的数组部分从start位置到end位置的所有元素, 元素间以指定的分隔符(step)隔开</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">table.insert (table, [pos,] value)</td>\n<td style=\"text-align:left\">在table的数组部分指定位置(pos)插入值为value的一个元素. pos参数可选, 默认为数组部分末尾</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">table.maxn(table)</td>\n<td style=\"text-align:left\">指定table中所有正数key值中最大的key值. 如果不存在key值为正数的元素, 则返回0。(Lua5.2之后该方法已经不存在了)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">table.remove (table [, pos])</td>\n<td style=\"text-align:left\">返回table数组部分位于pos位置的元素. 其后的元素会被前移. pos参数可选, 默认为table长度, 即从最后一个元素删起。</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">table.sort (table [, comp])</td>\n<td style=\"text-align:left\">对给定的table进行升序排序。</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">table.getn(tableName)</td>\n<td style=\"text-align:left\">获取表的长度</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h2 id=\"操作示例\"><a href=\"#操作示例\" class=\"headerlink\" title=\"操作示例\"></a>操作示例</h2><ol>\n<li>table.concat</li>\n</ol>\n<figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">fruits = {<span class=\"string\">&#34;banana&#34;</span>,<span class=\"string\">&#34;orange&#34;</span>,<span class=\"string\">&#34;apple&#34;</span>}</span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#34;连接后的字符串 &#34;</span>,<span class=\"built_in\">table</span>.<span class=\"built_in\">concat</span>(fruits))</span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"comment\">-- 指定连接字符</span></span><br/><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#34;连接后的字符串 &#34;</span>,<span class=\"built_in\">table</span>.<span class=\"built_in\">concat</span>(fruits,<span class=\"string\">&#34;, &#34;</span>))</span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"comment\">-- 指定索引来连接 table</span></span><br/><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#34;连接后的字符串 &#34;</span>,<span class=\"built_in\">table</span>.<span class=\"built_in\">concat</span>(fruits,<span class=\"string\">&#34;, &#34;</span>, <span class=\"number\">2</span>,<span class=\"number\">3</span>))</span><br/></pre></td></tr></tbody></table></figure>\n<p>执行以上代码输出结果为：</p>\n<figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">连接后的字符串 bananaorangeapple</span><br/><span class=\"line\">连接后的字符串 banana, orange, apple</span><br/><span class=\"line\">连接后的字符串 orange, apple</span><br/></pre></td></tr></tbody></table></figure>\n<ol>\n<li><p>table.insert、table.remove</p>\n<p> table.insert() 建议在数组形式的表使用，键值对形式的表直接键值对形式插入<br/> table.remove() 用于数组形式的表，键值对形式的表直接给键赋值nil</p>\n</li>\n</ol>\n<figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/><span class=\"line\">11</span><br/><span class=\"line\">12</span><br/><span class=\"line\">13</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">fruits = {<span class=\"string\">&#34;banana&#34;</span>,<span class=\"string\">&#34;orange&#34;</span>,<span class=\"string\">&#34;apple&#34;</span>}</span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"comment\">-- 在末尾插入</span></span><br/><span class=\"line\"><span class=\"built_in\">table</span>.<span class=\"built_in\">insert</span>(fruits,<span class=\"string\">&#34;mango&#34;</span>)</span><br/><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#34;索引为 4 的元素为 &#34;</span>,fruits[<span class=\"number\">4</span>])</span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"comment\">-- 在索引为 2 的键处插入</span></span><br/><span class=\"line\"><span class=\"built_in\">table</span>.<span class=\"built_in\">insert</span>(fruits,<span class=\"number\">2</span>,<span class=\"string\">&#34;grapes&#34;</span>)</span><br/><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#34;索引为 2 的元素为 &#34;</span>,fruits[<span class=\"number\">2</span>])</span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#34;最后一个元素为 &#34;</span>,fruits[<span class=\"number\">5</span>])</span><br/><span class=\"line\"><span class=\"built_in\">table</span>.<span class=\"built_in\">remove</span>(fruits)</span><br/><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#34;移除后最后一个元素为 &#34;</span>,fruits[<span class=\"number\">5</span>])</span><br/></pre></td></tr></tbody></table></figure>\n<ol>\n<li>table.sort</li>\n</ol>\n<figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/><span class=\"line\">11</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">fruits = {<span class=\"string\">&#34;banana&#34;</span>,<span class=\"string\">&#34;orange&#34;</span>,<span class=\"string\">&#34;apple&#34;</span>,<span class=\"string\">&#34;grapes&#34;</span>}</span><br/><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#34;排序前&#34;</span>)</span><br/><span class=\"line\"><span class=\"keyword\">for</span> k,v <span class=\"keyword\">in</span> <span class=\"built_in\">ipairs</span>(fruits) <span class=\"keyword\">do</span></span><br/><span class=\"line\">  <span class=\"built_in\">print</span>(k,v)</span><br/><span class=\"line\"><span class=\"keyword\">end</span></span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"built_in\">table</span>.<span class=\"built_in\">sort</span>(fruits)</span><br/><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#34;排序后&#34;</span>)</span><br/><span class=\"line\"><span class=\"keyword\">for</span> k,v <span class=\"keyword\">in</span> <span class=\"built_in\">ipairs</span>(fruits) <span class=\"keyword\">do</span></span><br/><span class=\"line\">   <span class=\"built_in\">print</span>(k,v)</span><br/><span class=\"line\"><span class=\"keyword\">end</span></span><br/></pre></td></tr></tbody></table></figure>\n<p>执行以上代码输出结果为：</p>\n<figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">排序前</span><br/><span class=\"line\"><span class=\"number\">1</span>   banana</span><br/><span class=\"line\"><span class=\"number\">2</span>   orange</span><br/><span class=\"line\"><span class=\"number\">3</span>   apple</span><br/><span class=\"line\"><span class=\"number\">4</span>   grapes</span><br/><span class=\"line\">排序后</span><br/><span class=\"line\"><span class=\"number\">1</span>   apple</span><br/><span class=\"line\"><span class=\"number\">2</span>   banana</span><br/><span class=\"line\"><span class=\"number\">3</span>   grapes</span><br/><span class=\"line\"><span class=\"number\">4</span>   orange</span><br/></pre></td></tr></tbody></table></figure>\n<ol>\n<li>Table中最大的正数key值</li>\n</ol>\n<p>table.maxn 在 Lua5.2 之后该方法已经不存在了，自定义table_maxn方法来实现。<br/>以下实例演示了如何获取 table 中的最大值：</p>\n<figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/><span class=\"line\">11</span><br/><span class=\"line\">12</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(t)</span></span></span><br/><span class=\"line\">    <span class=\"keyword\">local</span> mn = <span class=\"number\">0</span></span><br/><span class=\"line\">    <span class=\"keyword\">for</span> k, v <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(t) <span class=\"keyword\">do</span></span><br/><span class=\"line\">        <span class=\"keyword\">if</span> mn &lt; k <span class=\"keyword\">then</span></span><br/><span class=\"line\">            mn = k</span><br/><span class=\"line\">        <span class=\"keyword\">end</span></span><br/><span class=\"line\">    <span class=\"keyword\">end</span></span><br/><span class=\"line\">    <span class=\"keyword\">return</span> mn</span><br/><span class=\"line\"><span class=\"keyword\">end</span></span><br/><span class=\"line\">tbl = {[<span class=\"number\">1</span>] = <span class=\"string\">&#34;a&#34;</span>, [<span class=\"number\">2</span>] = <span class=\"string\">&#34;b&#34;</span>, [<span class=\"number\">3</span>] = <span class=\"string\">&#34;c&#34;</span>, [<span class=\"number\">26</span>] = <span class=\"string\">&#34;z&#34;</span>}</span><br/><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#34;tbl 长度 &#34;</span>, #tbl)</span><br/><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#34;tbl 最大值 &#34;</span>, table_maxn(tbl))</span><br/></pre></td></tr></tbody></table></figure>\n<p>执行以上代码输出结果为：</p>\n<figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">tbl 长度    <span class=\"number\">3</span></span><br/><span class=\"line\">tbl 最大值  <span class=\"number\">26</span></span><br/></pre></td></tr></tbody></table></figure>\n<ol>\n<li>table.getn</li>\n</ol>\n<p>获取数组形式表的元素个数，键值对表使用遍历</p>\n<figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br/><span class=\"line\">2</span><br/><span class=\"line\">3</span><br/><span class=\"line\">4</span><br/><span class=\"line\">5</span><br/><span class=\"line\">6</span><br/><span class=\"line\">7</span><br/><span class=\"line\">8</span><br/><span class=\"line\">9</span><br/><span class=\"line\">10</span><br/><span class=\"line\">11</span><br/><span class=\"line\">12</span><br/><span class=\"line\">13</span><br/><span class=\"line\">14</span><br/><span class=\"line\">15</span><br/><span class=\"line\">16</span><br/><span class=\"line\">17</span><br/><span class=\"line\">18</span><br/><span class=\"line\">19</span><br/></pre></td><td class=\"code\"><pre><span class=\"line\">myTable = {}</span><br/><span class=\"line\">myTable[<span class=\"number\">1</span>] = <span class=\"string\">&#34;1&#34;</span></span><br/><span class=\"line\">myTable[<span class=\"number\">2</span>] = <span class=\"string\">&#34;2&#34;</span></span><br/><span class=\"line\">myTable[<span class=\"number\">3</span>] = <span class=\"string\">&#34;3&#34;</span></span><br/><span class=\"line\">myTable[<span class=\"string\">&#34;r&#34;</span>] = <span class=\"string\">&#34;Red&#34;</span></span><br/><span class=\"line\">myTable[<span class=\"string\">&#34;g&#34;</span>] = <span class=\"string\">&#34;Green&#34;</span></span><br/><span class=\"line\">myTable[<span class=\"string\">&#34;b&#34;</span>] = <span class=\"string\">&#34;Blue&#34;</span></span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"built_in\">table</span>.<span class=\"built_in\">getn</span>(myTable))</span><br/><span class=\"line\"></span><br/><span class=\"line\">length = <span class=\"number\">0</span></span><br/><span class=\"line\"><span class=\"keyword\">for</span> index, value <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(myTable) <span class=\"keyword\">do</span></span><br/><span class=\"line\">    length = length + <span class=\"number\">1</span></span><br/><span class=\"line\"><span class=\"keyword\">end</span></span><br/><span class=\"line\"><span class=\"built_in\">print</span>(length)</span><br/><span class=\"line\"></span><br/><span class=\"line\"><span class=\"comment\">-- 输出</span></span><br/><span class=\"line\"><span class=\"comment\">-- 3</span></span><br/><span class=\"line\"><span class=\"comment\">-- 6</span></span><br/></pre></td></tr></tbody></table></figure>","text":"table 操作 函数 解释 table.concat (table [, step [, start [, end]]]) 函数列出参数中指定table的数组部分从start位置到end位置的所有元素, 元素间以指定的分隔符(step)隔开 table.insert (tabl...","link":"","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#table-%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">table 操作</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%93%8D%E4%BD%9C%E7%A4%BA%E4%BE%8B\"><span class=\"toc-text\">操作示例</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"tolua++安装","uid":"0f6d71b477132b063b4c2ff5fbac2c35","slug":"zl/2016-01-01-786_tolua安装","date":"2024-04-03T03:47:36.024Z","updated":"2024-04-03T03:47:36.025Z","comments":true,"path":"api/articles/zl/2016-01-01-786_tolua安装.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" &lt;a href=&quot;/2015/11/11/lua_cpp_bind/&quot; rel=&quot;next&quot; title=&quot;C++与Lua本质原始交互API&quot;&gt; &lt;i class=&quot;fa fa-chevro...","link":"","photos":[],"count_time":{"symbolsCount":"3.6k","symbolsTime":"3 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Lua 学习 chapter22","uid":"4a87df76c39f3f8150fdb435e35555f2","slug":"zl/2016-01-01-783_Lua 学习 chapter22 ","date":"2024-04-03T03:47:36.019Z","updated":"2024-04-03T03:47:36.023Z","comments":true,"path":"api/articles/zl/2016-01-01-783_Lua 学习 chapter22 .json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"目录 具有动态名称的全局变量 非全局环境 环境和模块 _ENV和load 只有疯狂过，你才知道自己究竟能不能成功。 具有动态名称的全局变量 在lua中，所有的全局变量都被存在_G中，通过_G[name]可以访问到任意一个全局变量。在lua中，全局变量不需要声明就可以直接使用，但是...","link":"","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}