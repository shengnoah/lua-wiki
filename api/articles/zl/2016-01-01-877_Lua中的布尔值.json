{"title":"Lua中的布尔值","uid":"f38ed677d715d2ba631245c469d43a4a","slug":"zl/2016-01-01-877_Lua中的布尔值","date":"2024-04-03T03:47:36.150Z","updated":"2024-04-03T03:47:36.150Z","comments":true,"path":"api/articles/zl/2016-01-01-877_Lua中的布尔值.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h2 id=\"Lua中的真值和假值\"><a href=\"#Lua中的真值和假值\" class=\"headerlink\" title=\"Lua中的真值和假值\"></a>Lua中的真值和假值</h2><p><strong>除了nil和false为假, 其它都为真.</strong> </p>\n<p>这意味着包括0, 空字符串, 空表都为真.</p>\n<h2 id=\"源码中关于布尔值的代码\"><a href=\"#源码中关于布尔值的代码\" class=\"headerlink\" title=\"源码中关于布尔值的代码\"></a>源码中关于布尔值的代码</h2><pre><code class=\"c\">#define l_isfalse(o)    (ttisnil(o) || (ttisboolean(o) &amp;&amp; bvalue(o) == 0))\n</code></pre>\n<p>说明:</p>\n<ul>\n<li><code>ttisnil(o)</code> : 判断对象o是否为nil值</li>\n<li><code>ttisboolean(o)</code> : 判断对象的tag是否为 <code>LUA_TBOOLEAN</code></li>\n<li><code>bvalue(o)</code> : 判断对象的联合体 <code>value_</code> 中的变量<code>b</code>是否为0</li>\n</ul>\n<h2 id=\"布尔值的应用\"><a href=\"#布尔值的应用\" class=\"headerlink\" title=\"布尔值的应用\"></a>布尔值的应用</h2><h3 id=\"传参时的「nil」和「false」的�\"><a href=\"#传参时的「nil」和「false」的�\" class=\"headerlink\" title=\"传参时的「nil」和「false」的�\"></a>传参时的「nil」和「false」的�</h3><p>Lua中经常给参数设置默认值的代码是 <code>input = input or value</code>, 当input为空时, 我们赋予它默认值value. 但是这个并不适用于布尔值. </p>\n<p>如果我们的参数类型为false时, 执行<code>input = input or value</code>之后它被改成默认值, 所以input被改成了true!<code></code></p>\n<h3 id=\"逻辑运算符\"><a href=\"#逻辑运算符\" class=\"headerlink\" title=\"逻辑运算符\"></a>逻辑运算符</h3><p>Lua中的逻辑运算符是 and, or, not, 其中逻辑运算规则下</p>\n<pre><code>A and B -- 如果A为false，则返回A，否则返回B\nA or B -- 如果A为true，则返回A，否则返回B\n</code></pre><h3 id=\"三元运算符\"><a href=\"#三元运算符\" class=\"headerlink\" title=\"三元运算符\"></a>三元运算符</h3><p>Lua中并没有三元运算符, 但是利用运算 <code>ret = A and B or C</code> 可以实现其效果.</p>\n<p>但是需要注意的是, <strong>如果B为false, 则ret永远为C</strong>, 达不到”当A为真时, ret为B; 否则为C”的效果, 因为<code>A and false</code> 永远为false,  <code>false or C</code>永远为C</p>\n<p>式子<code>ret = A and true or false</code>可以用在判断A是否存在(即为nil)</p>","text":"Lua中的真值和假值除了nil和false为假, 其它都为真. 这意味着包括0, 空字符串, 空表都为真. 源码中关于布尔值的代码#define l_isfalse(o) (ttisnil(o) || (ttisboolean(o) &amp;&amp; bvalue(o) ==...","link":"","photos":[],"count_time":{"symbolsCount":742,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Lua%E4%B8%AD%E7%9A%84%E7%9C%9F%E5%80%BC%E5%92%8C%E5%81%87%E5%80%BC\"><span class=\"toc-text\">Lua中的真值和假值</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%BA%90%E7%A0%81%E4%B8%AD%E5%85%B3%E4%BA%8E%E5%B8%83%E5%B0%94%E5%80%BC%E7%9A%84%E4%BB%A3%E7%A0%81\"><span class=\"toc-text\">源码中关于布尔值的代码</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B8%83%E5%B0%94%E5%80%BC%E7%9A%84%E5%BA%94%E7%94%A8\"><span class=\"toc-text\">布尔值的应用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BC%A0%E5%8F%82%E6%97%B6%E7%9A%84%E3%80%8Cnil%E3%80%8D%E5%92%8C%E3%80%8Cfalse%E3%80%8D%E7%9A%84%EF%BF%BD\"><span class=\"toc-text\">传参时的「nil」和「false」的�</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6\"><span class=\"toc-text\">逻辑运算符</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%89%E5%85%83%E8%BF%90%E7%AE%97%E7%AC%A6\"><span class=\"toc-text\">三元运算符</span></a></li></ol></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"lua脚本解析webhooks实现自动部署","uid":"fbe4509147239e385948192a32ab2b36","slug":"zl/2016-01-01-880_lua脚本解析webhooks实现自动部署","date":"2024-04-03T03:47:36.151Z","updated":"2024-04-03T03:47:36.152Z","comments":true,"path":"api/articles/zl/2016-01-01-880_lua脚本解析webhooks实现自动部署.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"码云配置webhooks实现自动部署的方式有很多，可以把项目放在github用github的webhooks，但是github只能创建公开项目私有项目是要钱的。也可以使用一种相对麻烦的方式，可以在vps上建一个git仓库每次提交到vps上之后触发hook去更新blog，这种方法相...","link":"","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Lua 学习 chapter10","uid":"6dd173d5288df05b5ec75744db2e59c2","slug":"zl/2016-01-01-878_Lua 学习 chapter10 ","date":"2024-04-03T03:47:36.150Z","updated":"2024-04-03T03:47:36.150Z","comments":true,"path":"api/articles/zl/2016-01-01-878_Lua 学习 chapter10 .json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"目录 正则表达式 模式匹配相关的函数 URL编码 制表符的展开 诀窍 模式 Just be handsome. 正则表达式 . 任意字符 %a 字母 %c 控制字符 %d 数字 %g 除空格外的可打印字符 %l 小写字母 %p标点符号 %s 空白字符 %u 大写字母 %w 字母和...","link":"","photos":[],"count_time":{"symbolsCount":"3.8k","symbolsTime":"3 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}