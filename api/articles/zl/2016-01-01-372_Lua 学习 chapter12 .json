{"title":"Lua 学习 chapter12","uid":"016af6701d235d2151d781003668fbfe","slug":"zl/2016-01-01-372_Lua 学习 chapter12 ","date":"2024-04-03T03:47:35.655Z","updated":"2024-04-03T03:47:35.655Z","comments":true,"path":"api/articles/zl/2016-01-01-372_Lua 学习 chapter12 .json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h3 id=\"目录\">目录</h3>\n<ol>\n  <li>日期和时间</li>\n  <li>日期和时间的处理</li>\n</ol>\n<blockquote>\n  <p>What is the cost of lies? It’s not that we’ll mistake them for the truth. The real danger is that if we hear enough lies, then we no longer recognize the truth at all. What can we do then? What else is left but to abandon even the hope of truth and content ourselves instaed with stories? In these stories, it doesn’t matter who the heroes are. All we want to know is: who is to blame? No friends. Or, at least, not important ones.</p>\n</blockquote>\n<h2 id=\"日期和时间\">日期和时间</h2>\n<p>在lua中日期的表示分为两种方式，一种是一个整数，从1970年以来一共多少秒，另一种是日期表，包含以下重要的字段：\nyear,month,day,hour,min,sec,wday,yday以及isdat,其中wday是这周的第几天，yday是今年的第几天，isdat是否是夏时令。日期表中不包含时区，程序需要结相应的时区对其正确解析。\nos.date(“*t”, os.time()) 生成一个日期表，同样不带第二个参数也可以获取到当前时间的日期表。</p>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><table class=\"rouge-table\"><tbody><tr><td class=\"rouge-gutter gl\"><pre class=\"lineno\">1\n2\n3\n4\n5\n6\n7\n</pre></td><td class=\"rouge-code\"><pre><span class=\"nb\">os.time</span><span class=\"p\">()</span> <span class=\"c1\">-- 当前的时间，秒数</span>\n<span class=\"nb\">os.time</span><span class=\"p\">(&#123;</span><span class=\"n\">year</span> <span class=\"o\">=</span> <span class=\"mi\">2019</span><span class=\"p\">,</span><span class=\"n\">month</span> <span class=\"o\">=</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"n\">day</span> <span class=\"o\">=</span> <span class=\"mi\">13</span><span class=\"p\">&#125;)</span> <span class=\"c1\">--输出秒数</span>\n<span class=\"nb\">os.date</span><span class=\"p\">(</span><span class=\"s2\">&#34;*t&#34;</span><span class=\"p\">,</span> <span class=\"mi\">906000490</span><span class=\"p\">))</span> <span class=\"c1\">--&#123;year = 1998, month = 9, day = 16, yday = 259, wday = 4, hour = 23, min = 48, sec = 10, isdst = false&#125;</span>\n<span class=\"c1\">--os.date() 在一定程度上是函数os.time()的反函数</span>\n<span class=\"n\">t</span> <span class=\"o\">=</span> <span class=\"mi\">906000490</span>\n<span class=\"nb\">os.time</span><span class=\"p\">(</span><span class=\"nb\">os.date</span><span class=\"p\">(</span><span class=\"s2\">&#34;*t&#34;</span><span class=\"p\">,</span><span class=\"n\">t</span><span class=\"p\">))</span> <span class=\"o\">==</span> <span class=\"n\">t</span>\n<p></pre></td></tr></tbody></table></code></pre></div></div></p>\n<p>os.date会将日期格式化为一个字符串</p>\n<ol>\n  <li>%a 星期</li>\n  <li>%A 星期几全称</li>\n  <li>%b 月份简称</li>\n  <li>%B 月份全称</li>\n  <li>%c 日期和时间（09/16/98 23:48:10）</li>\n  <li>%d 一个月中的第几天</li>\n  <li>%H 24小时制小时数</li>\n  <li>%I 12小时制小时数</li>\n  <li>%j 一年中的第几天</li>\n  <li>%m 月份</li>\n  <li>%M 分钟</li>\n  <li>%p am or pm</li>\n  <li>%S 秒数 00-60</li>\n  <li>%w 星期几（0-6） 0 is sunday</li>\n  <li>%W 一年中的第几周</li>\n  <li>%x 日期（09/16/98）</li>\n  <li>%X 时间（23:48:10）</li>\n  <li>%y 两位数年份（88）</li>\n  <li>%Y 完整的年份（1988）</li>\n  <li>%z 时区（例如：-0300）</li>\n  <li>%% 百分号</li>\n</ol>\n<h2 id=\"日期和时间的处理\">日期和时间的处理</h2>\n<p>os.difftime用来计算两个时间之间的差值，该函数以秒为单位返回差值。它的参数可以是两个日期表。\nos.clock也是获取时间，但是其精度更高，返回值是一个浮点数。</p>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><table class=\"rouge-table\"><tbody><tr><td class=\"rouge-gutter gl\"><pre class=\"lineno\">1\n2\n3\n4\n</pre></td><td class=\"rouge-code\"><pre><span class=\"n\">t</span> <span class=\"o\">=</span> <span class=\"nb\">os.date</span><span class=\"p\">(</span><span class=\"s2\">&#34;*t&#34;</span><span class=\"p\">)</span>\n<span class=\"n\">t</span><span class=\"p\">.</span><span class=\"n\">day</span> <span class=\"o\">=</span> <span class=\"n\">t</span><span class=\"p\">.</span><span class=\"n\">day</span> <span class=\"o\">+</span> <span class=\"mi\">40</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">os.date</span><span class=\"p\">(</span><span class=\"s2\">&#34;%Y/%m/%d&#34;</span><span class=\"p\">,</span><span class=\"nb\">os.time</span><span class=\"p\">(</span><span class=\"n\">t</span><span class=\"p\">))</span> <span class=\"c1\">--40天后的时间</span>\n<p></pre></td></tr></tbody></table></code></pre></div></div></p>\n<pre><code>            &lt;hr style=&quot;visibility: hidden;&quot;/&gt;\n            \n            &lt;hr style=&quot;visibility: hidden;&quot;/&gt;\n</code></pre>\n","text":"目录 日期和时间 日期和时间的处理 What is the cost of lies? It’s not that we’ll mistake them for the truth. The real danger is that if we hear enough lies, ...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">目录</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4\"><span class=\"toc-text\">日期和时间</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E7%9A%84%E5%A4%84%E7%90%86\"><span class=\"toc-text\">日期和时间的处理</span></a>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"结合Fluentd实现ngx_lua_waf页面展示","uid":"d818020fe9b5ded46e6f72a0b4292602","slug":"zl/2016-01-01-373_结合Fluentd实现ngx_lua_waf页面展示","date":"2024-04-03T03:47:35.655Z","updated":"2024-04-03T03:47:35.659Z","comments":true,"path":"api/articles/zl/2016-01-01-373_结合Fluentd实现ngx_lua_waf页面展示.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"0x00 概述最近在看lua_waf,看看怎么搞个web界面出来，于是有了这篇笔记。 上图是大佬分享的waf日志处理流程，不过我这篇文章讲的就简单多了，如下, 纯属搞着玩儿： ngx_lua_waf简介 ngx_lua_waf，是一个轻量级、高性能的WAF模块。 防止sql注入，...","link":"","photos":[],"count_time":{"symbolsCount":"8.8k","symbolsTime":"8 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Sol2实现Cpp和Lua绑定","uid":"a0aa244da9b5db84b7a7c09b4e0b028c","slug":"zl/2016-01-01-371_Sol2实现Cpp和Lua绑定","date":"2024-04-03T03:47:35.654Z","updated":"2024-04-03T03:47:35.654Z","comments":true,"path":"api/articles/zl/2016-01-01-371_Sol2实现Cpp和Lua绑定.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" &lt;a href=&quot;/2018/06/17/cpp11_raw_string/&quot; rel=&quot;next&quot; title=&quot;C++11的Raw String Literals&quot;&gt; &lt;i class=&quot...","link":"","photos":[],"count_time":{"symbolsCount":"4.8k","symbolsTime":"4 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}