{"title":"evaluate division","uid":"73a2f21f043f75ef573965973c2c64cb","slug":"zl/2016-01-01-1098_evaluate division","date":"2024-04-03T03:47:33.000Z","updated":"2024-04-03T03:47:33.000Z","comments":true,"path":"api/articles/zl/2016-01-01-1098_evaluate division.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h2 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h2><p>巧妙的方法，化为双向图，例如等式a / b = 2.0，可以转化为两条边：<a, b=\"\">，<b, a=\"\">，其长度分别为2.0，0.5。<br/>对queries的每一项，先判断2个点是否都出现，然后判断是不是自己到自己，最后用dfs进行搜索，然后用递归进行每条边权重的相乘，如果最后找不到路径，则返回-1.0。<br/></b,></a,></p><figure class=\"highlight c\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span>  {</span></div><div class=\"line\"><span class=\"keyword\">public</span>:</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">double</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"built_in\">string</span> from, <span class=\"built_in\">string</span> to, <span class=\"built_in\">map</span>&lt;<span class=\"built_in\">string</span>, <span class=\"built_in\">map</span>&lt;<span class=\"built_in\">string</span>, <span class=\"keyword\">double</span>&gt;&gt; &amp;mp, <span class=\"built_in\">set</span>&lt;<span class=\"built_in\">string</span>&gt; &amp; visited, <span class=\"keyword\">double</span> val)</span></span></div><div class=\"line\"><span class=\"function\"></span>{</div><div class=\"line\">    <span class=\"keyword\">if</span> (mp[from].count(to)) {</div><div class=\"line\">        <span class=\"keyword\">return</span> mp[from][to] * val;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> (pair&lt;<span class=\"built_in\">string</span>, <span class=\"keyword\">double</span>&gt;p : mp[from]) {</div><div class=\"line\">        <span class=\"built_in\">string</span> str = p.first;</div><div class=\"line\">        <span class=\"keyword\">if</span> (visited.count(str) == <span class=\"number\">0</span>) {</div><div class=\"line\">            visited.insert(str);</div><div class=\"line\">            <span class=\"keyword\">double</span> cur = dfs(str, to, mp, visited, p.second * val);</div><div class=\"line\">            <span class=\"keyword\">if</span> (cur != <span class=\"number\">-1.0</span>) <span class=\"keyword\">return</span> cur;</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1.0</span>;</div><div class=\"line\">}</div><div class=\"line\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">double</span>&gt; calcEquation(<span class=\"built_in\">vector</span>&lt;pair&lt;<span class=\"built_in\">string</span>, <span class=\"built_in\">string</span>&gt;&gt; equations, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">double</span>&gt;&amp; values, <span class=\"built_in\">vector</span>&lt;pair&lt;<span class=\"built_in\">string</span>, <span class=\"built_in\">string</span>&gt;&gt; queries) {</div><div class=\"line\">    <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">double</span>&gt; result;</div><div class=\"line\">    <span class=\"built_in\">map</span>&lt;<span class=\"built_in\">string</span>, <span class=\"built_in\">map</span>&lt;<span class=\"built_in\">string</span>, <span class=\"keyword\">double</span>&gt;&gt; mp;</div><div class=\"line\">    <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (pair&lt;<span class=\"built_in\">string</span>, <span class=\"built_in\">string</span>&gt; p : equations) {</div><div class=\"line\">        mp[p.first][p.second] = values[i];</div><div class=\"line\">        mp[p.second][p.first] = <span class=\"number\">1.0</span> / values[i];</div><div class=\"line\">        i++;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> (pair&lt;<span class=\"built_in\">string</span>, <span class=\"built_in\">string</span>&gt; p : queries) {</div><div class=\"line\">        <span class=\"keyword\">if</span> (mp.count(p.first) &amp;&amp; mp.count(p.second)) {</div><div class=\"line\">            <span class=\"keyword\">if</span> (p.first == p.second) {</div><div class=\"line\">                result.push_back(<span class=\"number\">1.0</span>);</div><div class=\"line\">                <span class=\"keyword\">continue</span>;</div><div class=\"line\">            }</div><div class=\"line\">            <span class=\"keyword\">else</span> {</div><div class=\"line\">                <span class=\"built_in\">set</span>&lt;<span class=\"built_in\">string</span>&gt; visited;</div><div class=\"line\">                result.push_back(dfs(p.first, p.second, mp, visited, <span class=\"number\">1.0</span>));</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">        <span class=\"keyword\">else</span> {</div><div class=\"line\">            result.push_back(<span class=\"number\">-1.0</span>);</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">};</div></pre></td></tr></tbody></table></figure><p></p>","text":"思路巧妙的方法，化为双向图，例如等式a / b = 2.0，可以转化为两条边：，，其长度分别为2.0，0.5。对queries的每一项，先判断2个点是否都出现，然后判断是不是自己到自己，最后用dfs进行搜索，然后用递归进行每条边权重的相乘，如果最后找不到路径，则返回-1.0。12...","link":"","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%80%9D%E8%B7%AF\"><span class=\"toc-text\">思路</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"lua中执行shell","uid":"9bfba4a10873f31bc1439db844ebceb7","slug":"zl/2016-01-01-1097_lua中执行shell","date":"2024-04-03T03:47:33.000Z","updated":"2024-04-03T03:47:33.000Z","comments":true,"path":"api/articles/zl/2016-01-01-1097_lua中执行shell.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" 文章目录 &lt;/div&gt; &lt;h3 id=&quot;直接执行Shell&quot;&gt;&lt;a href=&quot;#直接执行Shell&quot; class=&quot;headerlink&quot; title=&quot;直接执行Shell&q...","link":"","photos":[],"count_time":{"symbolsCount":561,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"lua 连接 mysql","uid":"37537d2afe4044af11eeb8af87372de3","slug":"zl/2016-01-01-1099_lua 连接 mysql","date":"2024-04-03T03:47:33.000Z","updated":"2024-04-03T03:47:33.001Z","comments":true,"path":"api/articles/zl/2016-01-01-1099_lua 连接 mysql.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"12345678910111213141516171819require &#34;luasql.mysql&#34;env = luasql.mysql()-- 连接数据库conn = env:connect(&#34;数据库名&#34;, &#34;用户名&#34;, &#3...","link":"","photos":[],"count_time":{"symbolsCount":394,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}