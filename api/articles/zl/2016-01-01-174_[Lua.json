{"title":"Lua","uid":"15b0cdc6d03f6c3f6bf8d3a7ff197317","slug":"zl/2016-01-01-174_[Lua","date":"2024-04-03T03:47:33.062Z","updated":"2024-04-03T03:47:33.062Z","comments":true,"path":"api/articles/zl/2016-01-01-174_[Lua.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<p>读书笔记： Programming in Lua, 4th Edition.</p>\n<h3 id=\"替换字符串\">替换字符串</h3>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"s2\">&#34;one string&#34;</span>\n<span class=\"o\">&gt;</span> <span class=\"n\">b</span> <span class=\"o\">=</span> <span class=\"nb\">string.gsub</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"s2\">&#34;one&#34;</span><span class=\"p\">,</span> <span class=\"s2\">&#34;another&#34;</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">)</span>\n<span class=\"n\">one</span> <span class=\"n\">string</span>      <span class=\"n\">another</span> <span class=\"n\">string</span>\n<span class=\"o\">&gt;</span>\n</code></pre></div></div>\n<h3 id=\"计算字符串长度\">计算字符串长度</h3>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"s2\">&#34;hello&#34;</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">#</span><span class=\"n\">a</span><span class=\"p\">)</span>\n<span class=\"mi\">5</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">#</span><span class=\"s2\">&#34;good bye&#34;</span><span class=\"p\">)</span>\n<span class=\"mi\">8</span>\n</code></pre></div></div>\n<h3 id=\"连接字符串\">连接字符串</h3>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"s2\">&#34;Hello &#34;</span> <span class=\"o\">..</span> <span class=\"s2\">&#34;World&#34;</span>\n<span class=\"n\">Hello</span> <span class=\"n\">World</span>\n<span class=\"o\">&gt;</span> <span class=\"s2\">&#34;result is &#34;</span> <span class=\"o\">..</span> <span class=\"mi\">3</span>\n<span class=\"n\">result</span> <span class=\"n\">is</span> <span class=\"mi\">3</span>\n</code></pre></div></div>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"s2\">&#34;Hello&#34;</span>\n<span class=\"o\">&gt;</span> <span class=\"n\">a</span> <span class=\"o\">..</span> <span class=\"s2\">&#34; World&#34;</span>\n<span class=\"n\">Hello</span> <span class=\"n\">World</span>\n</code></pre></div></div>\n<h3 id=\"字符串表示\">字符串表示</h3>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"s2\">&#34;a line&#34;</span>\n<span class=\"n\">b</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;another line&#39;</span>\n</code></pre></div></div>\n<p>They are equivalent; the only difference is that inside each kind of quote we can use the other quote without\nescapes.</p>\n<h3 id=\"多行字符串\">多行字符串</h3>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"n\">page</span> <span class=\"o\">=</span> <span class=\"s\">[[\n&gt;&gt; &lt;html&gt;\n&gt;&gt; &lt;head&gt;\n&gt;&gt; &lt;title&gt;An HTML Page&lt;/title&gt;\n&gt;&gt; &lt;/head&gt;\n&gt;&gt; &lt;body&gt;\n&gt;&gt; &lt;a href=&#34;http://www.lua.org&#34;&gt;Lua&lt;/a&gt;\n&gt;&gt; &lt;/body&gt;\n&gt;&gt; &lt;/html&gt;\n&gt;&gt; ]]</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">page</span><span class=\"p\">)</span>\n<span class=\"o\">&lt;</span><span class=\"n\">html</span><span class=\"o\">&gt;</span>\n<span class=\"o\">&lt;</span><span class=\"n\">head</span><span class=\"o\">&gt;</span>\n<span class=\"o\">&lt;</span><span class=\"n\">title</span><span class=\"o\">&gt;</span><span class=\"n\">An</span> <span class=\"n\">HTML</span> <span class=\"n\">Page</span><span class=\"o\">&lt;/</span><span class=\"n\">title</span><span class=\"o\">&gt;</span>\n<span class=\"o\">&lt;/</span><span class=\"n\">head</span><span class=\"o\">&gt;</span>\n<span class=\"o\">&lt;</span><span class=\"n\">body</span><span class=\"o\">&gt;</span>\n<span class=\"o\">&lt;</span><span class=\"n\">a</span> <span class=\"n\">href</span><span class=\"o\">=</span><span class=\"s2\">&#34;http://www.lua.org&#34;</span><span class=\"o\">&gt;</span><span class=\"n\">Lua</span><span class=\"o\">&lt;/</span><span class=\"n\">a</span><span class=\"o\">&gt;</span>\n<span class=\"o\">&lt;/</span><span class=\"n\">body</span><span class=\"o\">&gt;</span>\n<span class=\"o\">&lt;/</span><span class=\"n\">html</span><span class=\"o\">&gt;</span>\n</code></pre></div></div>\n<h3 id=\"数字和字符串的转换\">数字和字符串的转换</h3>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"mi\">10</span> <span class=\"o\">..</span> <span class=\"mi\">20</span><span class=\"p\">)</span>\n<span class=\"mi\">1020</span>\n</code></pre></div></div>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"s2\">&#34;10&#34;</span> <span class=\"o\">+</span> <span class=\"mi\">1</span>\n<span class=\"mi\">11</span><span class=\"p\">.</span><span class=\"mi\">0</span>\n</code></pre></div></div>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"nb\">tonumber</span><span class=\"p\">(</span><span class=\"s2\">&#34;  -3  &#34;</span><span class=\"p\">)</span>\n<span class=\"o\">-</span><span class=\"mi\">3</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">tonumber</span><span class=\"p\">(</span><span class=\"s2\">&#34; 10e4 &#34;</span><span class=\"p\">)</span>\n<span class=\"mi\">100000</span><span class=\"p\">.</span><span class=\"mi\">0</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">tonumber</span><span class=\"p\">(</span><span class=\"s2\">&#34;10e&#34;</span><span class=\"p\">)</span>\n<span class=\"kc\">nil</span>\n</code></pre></div></div>\n<p>By default, tonumber assumes decimal notation, but we can specify any base between 2 and 36 for the\nconversion</p>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"nb\">tonumber</span><span class=\"p\">(</span><span class=\"s2\">&#34;100101&#34;</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"mi\">37</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">tonumber</span><span class=\"p\">(</span><span class=\"s2\">&#34;fff&#34;</span><span class=\"p\">,</span> <span class=\"mi\">16</span><span class=\"p\">)</span>\n<span class=\"mi\">4095</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">tonumber</span><span class=\"p\">(</span><span class=\"s2\">&#34;-ZZ&#34;</span><span class=\"p\">,</span> <span class=\"mi\">36</span><span class=\"p\">)</span>\n<span class=\"o\">-</span><span class=\"mi\">1295</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">tonumber</span><span class=\"p\">(</span><span class=\"s2\">&#34;987&#34;</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">)</span>\n<span class=\"kc\">nil</span>\n</code></pre></div></div>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">tostring</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"s2\">&#34;10&#34;</span><span class=\"p\">)</span>\n<span class=\"kc\">true</span>\n</code></pre></div></div>\n<h2 id=\"string-库\">string 库</h2>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"nb\">string.len</span><span class=\"p\">(</span><span class=\"s2\">&#34;abc&#34;</span><span class=\"p\">)</span>\n<span class=\"mi\">3</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.rep</span><span class=\"p\">(</span><span class=\"s2\">&#34;abc&#34;</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"n\">abcabcabc</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.reverse</span><span class=\"p\">(</span><span class=\"s2\">&#34;A Long Line!&#34;</span><span class=\"p\">)</span>\n<span class=\"err\">!</span><span class=\"n\">eniL</span> <span class=\"n\">gnoL</span> <span class=\"n\">A</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.lower</span><span class=\"p\">(</span><span class=\"s2\">&#34;A Long Line!&#34;</span><span class=\"p\">)</span>\n<span class=\"n\">a</span> <span class=\"n\">long</span> <span class=\"n\">line</span><span class=\"err\">!</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.upper</span><span class=\"p\">(</span><span class=\"s2\">&#34;A Long Line!&#34;</span><span class=\"p\">)</span>\n<span class=\"n\">A</span> <span class=\"n\">LONG</span> <span class=\"n\">LINE</span><span class=\"err\">!</span>\n</code></pre></div></div>\n<h3 id=\"字符串比较\">字符串比较</h3>\n<p>As a typical use, if we want to compare two strings regardless of case, we can write something like this:</p>\n<p><strong>string.lower(a) &lt; string.lower(b)</strong></p>\n<h3 id=\"截取字符串\">截取字符串</h3>\n<p>The call string.sub(s, i, j) extracts a piece of the string s, from the i-th to the j-th character\ninclusive. (The first character of a string has index 1.) We can also use negative indices, which count from\nthe end of the string: index -1 refers to the last character, -2 to the previous one, and so on. Therefore, the\ncall string.sub(s, 1, j) gets a prefix of the string s with length j; string.sub(s, j, -1)\ngets a suffix of the string, starting at the j-th character; and string.sub(s, 2, -2) returns a copy\nof the string s with the first and last characters removed:</p>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"s2\">&#34;[in brackets]&#34;</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.sub</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"k\">in</span> <span class=\"n\">brackets</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.sub</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"k\">in</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.sub</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"p\">]</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.sub</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"n\">s</span><span class=\"p\">]</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"k\">in</span> <span class=\"n\">brackets</span><span class=\"p\">]</span>\n<span class=\"o\">&gt;</span> <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"nb\">string.sub</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span>\n<span class=\"k\">in</span> <span class=\"n\">brackets</span>\n</code></pre></div></div>\n<h3 id=\"ascii转换\">ASCII转换</h3>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.char</span><span class=\"p\">(</span><span class=\"mi\">97</span><span class=\"p\">))</span>\n<span class=\"n\">a</span>\n<span class=\"o\">&gt;</span> <span class=\"n\">i</span> <span class=\"o\">=</span> <span class=\"mi\">99</span><span class=\"p\">;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.char</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">,</span> <span class=\"n\">i</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">i</span><span class=\"o\">+</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n<span class=\"n\">cde</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.byte</span><span class=\"p\">(</span><span class=\"s2\">&#34;abc&#34;</span><span class=\"p\">))</span>\n<span class=\"mi\">97</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.byte</span><span class=\"p\">(</span><span class=\"s2\">&#34;abc&#34;</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">))</span>\n<span class=\"mi\">98</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.byte</span><span class=\"p\">(</span><span class=\"s2\">&#34;abc&#34;</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">))</span>\n<span class=\"mi\">99</span>\n</code></pre></div></div>\n<p>A call like string.byte(s, i, j) returns multiple values with the numeric representation of all\ncharacters between indices i and j (inclusive):</p>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.byte</span><span class=\"p\">(</span><span class=\"s2\">&#34;abc&#34;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">))</span>\n<span class=\"mi\">97</span>      <span class=\"mi\">98</span>\n</code></pre></div></div>\n<p>A nice idiom is {string.byte(s, 1, -1)}, which creates a list with the codes of all characters in s.</p>\n<h3 id=\"stringformat\">string.format</h3>\n<p>和C语言的printf是一样的。</p>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"nb\">string.format</span><span class=\"p\">(</span><span class=\"s2\">&#34;x = %d y = %d&#34;</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">20</span><span class=\"p\">)</span>\n<span class=\"n\">x</span> <span class=\"o\">=</span> <span class=\"mi\">10</span> <span class=\"n\">y</span> <span class=\"o\">=</span> <span class=\"mi\">20</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.format</span><span class=\"p\">(</span><span class=\"s2\">&#34;x = %x&#34;</span><span class=\"p\">,</span> <span class=\"mi\">200</span><span class=\"p\">)</span>\n<span class=\"n\">x</span> <span class=\"o\">=</span> <span class=\"n\">c8</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.format</span><span class=\"p\">(</span><span class=\"s2\">&#34;x = 0x%X&#34;</span><span class=\"p\">,</span> <span class=\"mi\">200</span><span class=\"p\">)</span>\n<span class=\"n\">x</span> <span class=\"o\">=</span> <span class=\"mh\">0xC8</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.format</span><span class=\"p\">(</span><span class=\"s2\">&#34;x = %f&#34;</span><span class=\"p\">,</span> <span class=\"mi\">200</span><span class=\"p\">)</span>\n<span class=\"n\">x</span> <span class=\"o\">=</span> <span class=\"mi\">200</span><span class=\"p\">.</span><span class=\"mi\">000000</span>\n<span class=\"o\">&gt;</span> <span class=\"n\">tag</span><span class=\"p\">,</span> <span class=\"n\">title</span> <span class=\"o\">=</span> <span class=\"s2\">&#34;h1&#34;</span><span class=\"p\">,</span> <span class=\"s2\">&#34;a title&#34;</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.format</span><span class=\"p\">(</span><span class=\"s2\">&#34;&lt;%s&gt;%s&lt;%s&gt;&#34;</span><span class=\"p\">,</span> <span class=\"n\">tag</span><span class=\"p\">,</span> <span class=\"n\">title</span><span class=\"p\">,</span> <span class=\"n\">tag</span><span class=\"p\">)</span>\n<span class=\"o\">&lt;</span><span class=\"n\">h1</span><span class=\"o\">&gt;</span><span class=\"n\">a</span> <span class=\"n\">title</span><span class=\"o\">&lt;</span><span class=\"n\">h1</span><span class=\"o\">&gt;</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.format</span><span class=\"p\">(</span><span class=\"s2\">&#34;pi = %.4f&#34;</span><span class=\"p\">,</span> <span class=\"nb\">math.pi</span><span class=\"p\">))</span>\n<span class=\"n\">pi</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">.</span><span class=\"mi\">1416</span>\n<span class=\"o\">&gt;</span> <span class=\"n\">d</span> <span class=\"o\">=</span> <span class=\"mi\">5</span><span class=\"p\">;</span> <span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"mi\">11</span><span class=\"p\">;</span> <span class=\"n\">y</span> <span class=\"o\">=</span> <span class=\"mi\">1990</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">string.format</span><span class=\"p\">(</span><span class=\"s2\">&#34;%02d/%02d/%04d&#34;</span><span class=\"p\">,</span> <span class=\"n\">d</span><span class=\"p\">,</span> <span class=\"n\">m</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">))</span>\n<span class=\"mi\">05</span><span class=\"o\">/</span><span class=\"mi\">11</span><span class=\"o\">/</span><span class=\"mi\">1990</span>\n</code></pre></div></div>\n<h3 id=\"字符串查找\">字符串查找</h3>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"nb\">string.find</span><span class=\"p\">(</span><span class=\"s2\">&#34;hello world&#34;</span><span class=\"p\">,</span> <span class=\"s2\">&#34;wor&#34;</span><span class=\"p\">)</span>\n<span class=\"mi\">7</span>       <span class=\"mi\">9</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.find</span><span class=\"p\">(</span><span class=\"s2\">&#34;hello world&#34;</span><span class=\"p\">,</span> <span class=\"s2\">&#34;war&#34;</span><span class=\"p\">)</span>\n<span class=\"kc\">nil</span>\n</code></pre></div></div>\n<h3 id=\"字符串替换\">字符串替换</h3>\n<div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&gt;</span> <span class=\"nb\">string.gsub</span><span class=\"p\">(</span><span class=\"s2\">&#34;hello world&#34;</span><span class=\"p\">,</span> <span class=\"s2\">&#34;l&#34;</span><span class=\"p\">,</span> <span class=\"s2\">&#34;.&#34;</span><span class=\"p\">)</span>\n<span class=\"n\">he</span><span class=\"o\">..</span><span class=\"n\">o</span> <span class=\"n\">wor</span><span class=\"p\">.</span><span class=\"n\">d</span>     <span class=\"mi\">3</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.gsub</span><span class=\"p\">(</span><span class=\"s2\">&#34;hello world&#34;</span><span class=\"p\">,</span> <span class=\"s2\">&#34;ll&#34;</span><span class=\"p\">,</span> <span class=\"s2\">&#34;..&#34;</span><span class=\"p\">)</span>\n<span class=\"n\">he</span><span class=\"o\">..</span><span class=\"n\">o</span> <span class=\"n\">world</span>     <span class=\"mi\">1</span>\n<span class=\"o\">&gt;</span> <span class=\"nb\">string.gsub</span><span class=\"p\">(</span><span class=\"s2\">&#34;hello world&#34;</span><span class=\"p\">,</span> <span class=\"s2\">&#34;a&#34;</span><span class=\"p\">,</span> <span class=\"s2\">&#34;.&#34;</span><span class=\"p\">)</span>\n<span class=\"n\">hello</span> <span class=\"n\">world</span>     <span class=\"mi\">0</span>\n</code></pre></div></div>","text":"读书笔记： Programming in Lua, 4th Edition. 替换字符串 &gt; a = &#34;one string&#34; &gt; b = string.gsub(a, &#34;one&#34;, &#34;another&#34;) &gt; pr...","link":"","photos":[],"count_time":{"symbolsCount":"4.3k","symbolsTime":"4 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9B%BF%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2\"><span class=\"toc-text\">替换字符串</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%AE%A1%E7%AE%97%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6\"><span class=\"toc-text\">计算字符串长度</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BF%9E%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2\"><span class=\"toc-text\">连接字符串</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%A1%A8%E7%A4%BA\"><span class=\"toc-text\">字符串表示</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A4%9A%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2\"><span class=\"toc-text\">多行字符串</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E5%AD%97%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E8%BD%AC%E6%8D%A2\"><span class=\"toc-text\">数字和字符串的转换</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#string-%E5%BA%93\"><span class=\"toc-text\">string 库</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83\"><span class=\"toc-text\">字符串比较</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%88%AA%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2\"><span class=\"toc-text\">截取字符串</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#ascii%E8%BD%AC%E6%8D%A2\"><span class=\"toc-text\">ASCII转换</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#stringformat\"><span class=\"toc-text\">string.format</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9F%A5%E6%89%BE\"><span class=\"toc-text\">字符串查找</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9B%BF%E6%8D%A2\"><span class=\"toc-text\">字符串替换</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Lua程序设计（1）","uid":"f7204e4c768f3914953c0add1a30be01","slug":"zl/2016-01-01-173_Lua程序设计（1）","date":"2024-04-03T03:47:33.062Z","updated":"2024-04-03T03:47:33.062Z","comments":true,"path":"api/articles/zl/2016-01-01-173_Lua程序设计（1）.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"Lua中的字符串。 字符串Lua语言中的字符串是一串字节组成的序列，Lua核心并不关心这些字节究竟以何种方式编码文本。 在Lua语言中，字符使用8个比特位来存储。 Lua语言中的字符串是不可变值。 像Lua语言中的其他对象（表、函数等）一样，Lua语言中的字符串也是自动内存管理的...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Lua面向对象程序设计 · 花生肉泥","uid":"a08477f26237ca96269b3d0e18271099","slug":"zl/2016-01-01-172_Lua面向对象程序设计 · 花生肉泥","date":"2024-04-03T03:47:33.061Z","updated":"2024-04-03T03:47:33.061Z","comments":true,"path":"api/articles/zl/2016-01-01-172_Lua面向对象程序设计 · 花生肉泥.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"类lua不存在类的概念，每个对象定义他自己的行为并拥有自己的形状（shape）。然而，依据基于原型的语言，在lua中仿效类的概念并不难。 在lua中，使用继承的思想，很容易实现prototype（原型），如果我们有两个对象a和b，我们想让b作为a的原型，只需要1setmetata...","link":"","photos":[],"count_time":{"symbolsCount":585,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}