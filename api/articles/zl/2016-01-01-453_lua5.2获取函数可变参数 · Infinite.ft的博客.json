{"title":"lua5.2获取函数可变参数 · Infinite.ft的博客","uid":"c68d8d6dd098c8b971c3068fdbae1469","slug":"zl/2016-01-01-453_lua5.2获取函数可变参数 · Infinite.ft的博客","date":"2024-04-03T03:47:35.735Z","updated":"2024-04-03T03:47:35.735Z","comments":true,"path":"api/articles/zl/2016-01-01-453_lua5.2获取函数可变参数 · Infinite.ft的博客.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<p>在Lua5.2之前，函数的可变参数在函数调用的时候自动获取并放在<strong>arg</strong>变量(table)中，要访问每一可变参数只需要通过<strong>arg[0]</strong>, <strong>arg[1]</strong>,…..<strong>arg[m]</strong>来获取，并且arg中还有一个域<strong>n</strong>负责记录可变参数的个数，示例代码如下所示：</p>\n<figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(a, b, ...)</span></span></div><div class=\"line\">  <span class=\"keyword\">local</span> sum = a + b</div><div class=\"line\">  <span class=\"keyword\">for</span> i = <span class=\"number\">1</span>,<span class=\"built_in\">arg</span>.n <span class=\"keyword\">do</span></div><div class=\"line\">    sum = sum + <span class=\"built_in\">arg</span>[n]</div><div class=\"line\">  <span class=\"keyword\">end</span></div><div class=\"line\">  <span class=\"keyword\">return</span> sum</div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></tbody></table></figure>\n<p>在Lua5.2之后，需要自己手动获取可变参数，也没有了记录可变参数个数的域<strong>n</strong>，但可以通过长度运算符<strong>#</strong>获取参数个数，我想这也是为什么会去掉域<strong>n</strong>的原因，示例代码如下所示：</p>\n<figure class=\"highlight lua\"><table><tbody><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(a, b, ...)</span></span></div><div class=\"line\">  <span class=\"keyword\">local</span> <span class=\"built_in\">arg</span> = {...}</div><div class=\"line\">  <span class=\"keyword\">local</span> sum = a + b</div><div class=\"line\">  <span class=\"keyword\">for</span> i = <span class=\"number\">1</span>, #<span class=\"built_in\">arg</span> <span class=\"keyword\">do</span></div><div class=\"line\">    sum = sum + <span class=\"built_in\">arg</span>[i]</div><div class=\"line\">  <span class=\"keyword\">end</span></div><div class=\"line\">  <span class=\"keyword\">return</span> sum</div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></tbody></table></figure>","text":"在Lua5.2之前，函数的可变参数在函数调用的时候自动获取并放在arg变量(table)中，要访问每一可变参数只需要通过arg[0], arg[1],…..arg[m]来获取，并且arg中还有一个域n负责记录可变参数的个数，示例代码如下所示： 1234567function (a...","link":"","photos":[],"count_time":{"symbolsCount":443,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Lua学习笔记","uid":"d112c00bf05f368c0020529ea6c8efaf","slug":"zl/2016-01-01-456_Lua学习笔记","date":"2024-04-03T03:47:35.736Z","updated":"2024-04-03T03:47:35.740Z","comments":true,"path":"api/articles/zl/2016-01-01-456_Lua学习笔记.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" 学习资料地址：http://www.runoob.com/lua/lua-tutorial.html 安装环境 在Windows环境下，使用SciTE来运行Lua程序。 项目GitHub地址：https://github.com/rjpcomputing/luaforwindo...","link":"","photos":[],"count_time":{"symbolsCount":"6.8k","symbolsTime":"6 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"learn lua","uid":"1ad84e93752c74baba8feec458fe68be","slug":"zl/2016-01-01-455_learn lua","date":"2024-04-03T03:47:35.735Z","updated":"2024-04-03T03:47:35.736Z","comments":true,"path":"api/articles/zl/2016-01-01-455_learn lua.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747...","link":"","photos":[],"count_time":{"symbolsCount":"5.5k","symbolsTime":"5 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}