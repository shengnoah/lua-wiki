{"title":"Lua编程","uid":"126596b376cfeb845620aa16e8a50d64","slug":"zl/2016-01-01-53_Lua编程","date":"2024-04-03T03:47:35.810Z","updated":"2024-04-03T03:47:35.810Z","comments":true,"path":"api/articles/zl/2016-01-01-53_Lua编程.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h4 id=\"1-将字符串分割成一个一个单元存在表中\">1. 将字符串分割成一个一个单元，存在表中</h4>\n<ul>\n  <li>代码如下：\n    <div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>  <span class=\"kd\">local</span> <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"s2\">&#34;sofgs啊等级高5584撒旦法规&#34;</span>\n  <span class=\"kd\">local</span> <span class=\"n\">tb</span> <span class=\"o\">=</span> <span class=\"p\">&#123;&#125;</span>\n  <span class=\"k\">for</span> <span class=\"n\">utfChar</span> <span class=\"k\">in</span> <span class=\"nb\">string.gmatch</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"s2\">&#34;[%z1-127194-244][128-191]*&#34;</span><span class=\"p\">)</span> <span class=\"k\">do</span>  \n      <span class=\"nb\">table.insert</span><span class=\"p\">(</span><span class=\"n\">tb</span><span class=\"p\">,</span> <span class=\"n\">utfChar</span><span class=\"p\">)</span>  \n  <span class=\"k\">end</span>\n<p><span class=\"c1\">– 如果要提取出字符串中的数字</span><br />\n<span class=\"kd\">local</span> <span class=\"n\">s1</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;&quot;</span><br />\n<span class=\"kd\">local</span> <span class=\"n\">s2</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;&quot;</span><br />\n<span class=\"k\">for</span> <span class=\"n\">k</span><span class=\"p\">,</span><span class=\"n\">v</span> <span class=\"k\">in</span> <span class=\"nb\">pairs</span><span class=\"p\">(</span><span class=\"n\">tb</span><span class=\"p\">)</span> <span class=\"k\">do</span><br />\n<span class=\"kd\">local</span> <span class=\"n\">n</span> <span class=\"o\">=</span> <span class=\"nb\">tonumber</span><span class=\"p\">(</span><span class=\"n\">v</span><span class=\"p\">)</span><br />\n<span class=\"k\">if</span> <span class=\"n\">n</span> <span class=\"k\">then</span><br />\n<span class=\"n\">s1</span> <span class=\"o\">=</span> <span class=\"n\">s1</span><span class=\"o\">…</span><span class=\"n\">v</span><br />\n<span class=\"k\">else</span><br />\n<span class=\"n\">s2</span> <span class=\"o\">=</span> <span class=\"n\">s2</span><span class=\"o\">…</span><span class=\"n\">v</span><br />\n<span class=\"k\">end</span><br />\n<span class=\"k\">end</span><br />\n</code></pre></div>    </div></p>\n  </li>\n</ul>\n<hr/>\n<h4 id=\"2-删除table中重复的值\">2. 删除table中重复的值</h4>\n<ul>\n  <li>代码如下：\n    <div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>  <span class=\"k\">function</span> <span class=\"nf\">unique</span><span class=\"p\">(</span><span class=\"n\">t</span><span class=\"p\">,</span> <span class=\"n\">bArray</span><span class=\"p\">)</span>  \n      <span class=\"kd\">local</span> <span class=\"n\">check</span> <span class=\"o\">=</span> <span class=\"p\">&#123;&#125;</span>  \n      <span class=\"kd\">local</span> <span class=\"n\">n</span> <span class=\"o\">=</span> <span class=\"p\">&#123;&#125;</span>  \n      <span class=\"kd\">local</span> <span class=\"n\">idx</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>  \n      <span class=\"k\">for</span> <span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"n\">v</span> <span class=\"k\">in</span> <span class=\"nb\">pairs</span><span class=\"p\">(</span><span class=\"n\">t</span><span class=\"p\">)</span> <span class=\"k\">do</span>  \n          <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">check</span><span class=\"p\">[</span><span class=\"n\">v</span><span class=\"p\">]</span> <span class=\"k\">then</span>  \n              <span class=\"k\">if</span> <span class=\"n\">bArray</span> <span class=\"k\">then</span>  \n                  <span class=\"n\">n</span><span class=\"p\">[</span><span class=\"n\">idx</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">v</span>  \n                  <span class=\"n\">idx</span> <span class=\"o\">=</span> <span class=\"n\">idx</span> <span class=\"o\">+</span> <span class=\"mi\">1</span>  \n              <span class=\"k\">else</span>  \n                  <span class=\"n\">n</span><span class=\"p\">[</span><span class=\"n\">k</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">v</span>  \n              <span class=\"k\">end</span>  \n              <span class=\"n\">check</span><span class=\"p\">[</span><span class=\"n\">v</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>  \n          <span class=\"k\">end</span>  \n      <span class=\"k\">end</span>  \n      <span class=\"k\">return</span> <span class=\"n\">n</span>  \n  <span class=\"k\">end</span> \n</code></pre></div>    </div>\n  </li>\n</ul>\n<hr/>\n<h4 id=\"3-判断一个table是否是另一个table的子集或相同\">3. 判断一个table是否是另一个table的子集或相同</h4>\n<ul>\n  <li>代码如下：\n    <div class=\"language-lua highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>  <span class=\"kd\">local</span> <span class=\"n\">A</span> <span class=\"o\">=</span> <span class=\"p\">&#123;</span><span class=\"mi\">33</span><span class=\"p\">,</span><span class=\"mi\">24</span><span class=\"p\">,</span><span class=\"mi\">11</span><span class=\"p\">&#125;</span>\n  <span class=\"kd\">local</span> <span class=\"n\">B</span> <span class=\"o\">=</span> <span class=\"p\">&#123;</span><span class=\"mi\">24</span><span class=\"p\">,</span><span class=\"mi\">50</span><span class=\"p\">,</span><span class=\"mi\">33</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">,</span><span class=\"mi\">11</span><span class=\"p\">&#125;</span>\n  <span class=\"kd\">local</span> <span class=\"n\">C</span> <span class=\"o\">=</span><span class=\"p\">&#123;&#125;</span>\n  <span class=\"kd\">local</span> <span class=\"n\">isExistTable</span> <span class=\"o\">=</span> <span class=\"p\">&#123;&#125;</span>\n  <span class=\"k\">for</span> <span class=\"n\">i</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"o\">#</span><span class=\"n\">A</span> <span class=\"k\">do</span>\n      <span class=\"nb\">table.insert</span><span class=\"p\">(</span><span class=\"n\">isExistTable</span><span class=\"p\">,</span><span class=\"kc\">false</span><span class=\"p\">)</span>\n  <span class=\"k\">end</span>\n  <span class=\"k\">for</span> <span class=\"n\">k1</span><span class=\"p\">,</span><span class=\"n\">v1</span> <span class=\"k\">in</span> <span class=\"nb\">pairs</span><span class=\"p\">(</span><span class=\"n\">A</span><span class=\"p\">)</span> <span class=\"k\">do</span>\n      <span class=\"k\">for</span> <span class=\"n\">k2</span><span class=\"p\">,</span><span class=\"n\">v2</span> <span class=\"k\">in</span> <span class=\"nb\">pairs</span><span class=\"p\">(</span><span class=\"n\">B</span><span class=\"p\">)</span> <span class=\"k\">do</span>\n          <span class=\"k\">if</span> <span class=\"n\">v1</span> <span class=\"o\">==</span> <span class=\"n\">v2</span> <span class=\"k\">then</span>\n              <span class=\"n\">isExistTable</span><span class=\"p\">[</span><span class=\"n\">k1</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>                       \n          <span class=\"k\">end</span>\n      <span class=\"k\">end</span>\n  <span class=\"k\">end</span>\n  <span class=\"kd\">local</span> <span class=\"n\">isAdd</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>\n  <span class=\"k\">for</span> <span class=\"n\">i</span><span class=\"p\">,</span><span class=\"n\">v</span> <span class=\"k\">in</span> <span class=\"nb\">ipairs</span><span class=\"p\">(</span><span class=\"n\">isExistTable</span><span class=\"p\">)</span> <span class=\"k\">do</span>\n      <span class=\"k\">if</span> <span class=\"n\">v</span> <span class=\"o\">==</span> <span class=\"kc\">false</span> <span class=\"k\">then</span>\n          <span class=\"n\">isAdd</span> <span class=\"o\">=</span> <span class=\"kc\">false</span>\n      <span class=\"k\">end</span>\n  <span class=\"k\">end</span>\n  <span class=\"k\">if</span> <span class=\"n\">isAdd</span> <span class=\"k\">then</span>\n      <span class=\"nb\">table.insert</span><span class=\"p\">(</span><span class=\"n\">C</span><span class=\"p\">,</span><span class=\"n\">B</span><span class=\"p\">)</span>\n  <span class=\"k\">end</span>\n</code></pre></div>    </div>\n  </li>\n</ul>\n<hr/>","text":"1. 将字符串分割成一个一个单元，存在表中 代码如下： local s = &#34;sofgs啊等级高5584撒旦法规&#34; local tb = &#123;&#125; for utfChar in string.gmatch(s, &#34;[%z1-127194-2...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E5%B0%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%86%E5%89%B2%E6%88%90%E4%B8%80%E4%B8%AA%E4%B8%80%E4%B8%AA%E5%8D%95%E5%85%83%E5%AD%98%E5%9C%A8%E8%A1%A8%E4%B8%AD\"><span class=\"toc-text\">1. 将字符串分割成一个一个单元，存在表中</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E5%88%A0%E9%99%A4table%E4%B8%AD%E9%87%8D%E5%A4%8D%E7%9A%84%E5%80%BC\"><span class=\"toc-text\">2. 删除table中重复的值</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AAtable%E6%98%AF%E5%90%A6%E6%98%AF%E5%8F%A6%E4%B8%80%E4%B8%AAtable%E7%9A%84%E5%AD%90%E9%9B%86%E6%88%96%E7%9B%B8%E5%90%8C\"><span class=\"toc-text\">3. 判断一个table是否是另一个table的子集或相同</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Nginx Lua Redis防CC攻击","uid":"f2b4e762beb1c911253675c112b44934","slug":"zl/2016-01-01-543_Nginx Lua Redis防CC攻击","date":"2024-04-03T03:47:35.811Z","updated":"2024-04-03T03:47:35.812Z","comments":true,"path":"api/articles/zl/2016-01-01-543_Nginx Lua Redis防CC攻击.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" web安全 原理Nginx Lua Redis防止CC攻击实现原理： 同一个外网IP、同一个网址(ngx.var.request_uri)、同一个客户端(http_user_agent)在某一段时间(CCseconds)内访问某个网址(ngx.var.request_uri)超...","link":"","photos":[],"count_time":{"symbolsCount":"3.7k","symbolsTime":"3 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"1.1 lua 简介","uid":"a36097e33cfd418ea134e8f4a3bfede6","slug":"zl/2016-01-01-540_1.1 lua 简介","date":"2024-04-03T03:47:35.810Z","updated":"2024-04-03T03:47:35.810Z","comments":true,"path":"api/articles/zl/2016-01-01-540_1.1 lua 简介.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"简介Lua（发音： /ˈluːə/）程序设计语言是一个简洁、轻量、可扩展的脚本语言，Lua在葡萄牙语中的意思是月亮。Lua 是巴西里约热内卢天主教大学（Pontifical Catholic University of Rio de Janeiro）里的一个研究小组，由Rober...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua文章","slug":"lua文章","count":1133,"path":"api/tags/lua文章.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}