{"title":"windump与graylog","uid":"a97a619732554d0e595f9f947fc0b0aa","slug":"old_topic/2016-09-17-391","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.230Z","comments":true,"path":"api/articles/old_topic/2016-09-17-391.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<p>抓取流量最流行的工具就是Wireshark,在Windows上Wireshark的GUI界面很酷，但对于在linux和mac用惯了tcpdump用户来说，用命令行的tcpdump更直接便捷。Windows上有没有类似tcpdump的抓包工具呢？答案是有的，就是windump，底层是基于winpcap库的命令行工具。</p>\n<p>大体的背景是这样的，有一台Windows服务器运行了一个较定制化的闭源的radius服务，因为这是一个很老的服务，并没以完备的日志输出机制，我们无法从现有的日志统计出用户流量数据，在服务压力大到什么程度会出现问题，我们现掌握的数据中无法更好的识别民常，统计出流量分布，估算出预警的峰值，也无法可视化当前服务的状态。本身认证服务，随着外部的关联服务变的压力不段加大。</p>\n<p>根据目前的现状整个出几个需求：</p>\n<p>1.可在不入侵代码的前题下，量化监听流量。<br />\n2.可将流量日志数据传到大数据平台，进行非实时的统计，找出预警的阀值。<br />\n3.用基于winpcap自主开发的监听工具代替windump，做实时的数据分析，阀值预警、可视化负载状态。</p>\n<p>本文侧生点是用windump和大数据graylog配合，做到前2点，第3点后继做介绍。</p>\n<p>所以，下面开始我们要接触几个软件，但不会触及到太多代码问题，软件分别是<br />\nwindump,sidercar,nxlog,而graylog的安装使用不做具体介绍。</p>\n<p>安装这些工具后，我们就可以来监控流量了，并在graylog端做简单的可视化分析。</p>\n<p>1.运行windump，监听指定IP的测试流量。</p>\n<p>windump.exe -i 1 udp port 1812 and 192.168.0.6</p>\n<p>2.将windump输出的日志文件，重定向到指定文件目录。</p>\n<p>3.启运流量分析脚本。</p>\n<p>4.停制监控，查看graylog日志结果，做分析。</p>\n<p>关于graylog的部分，pcap库的定制使用后在后期出。</p>\n","text":"抓取流量最流行的工具就是Wireshark,在Windows上Wireshark的GUI界面很酷，但对于在linux和mac用惯了tcpdump用户来说，用命令行的tcpdump更直接便捷。Windows上有没有类似tcpdump的抓包工具呢？答案是有的，就是windump，底层...","link":"","photos":[],"count_time":{"symbolsCount":805,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua","slug":"lua","count":124,"path":"api/tags/lua.json"}],"toc":"","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"libpcap监听网络端口数据","uid":"1da6405cfff3883466e411939e823d07","slug":"old_topic/2016-09-17-392","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.162Z","comments":true,"path":"api/articles/old_topic/2016-09-17-392.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"下面的代码是监听本机源80地址流出的数据， 并以字符的形式打印出来。 代码： #include &lt;pcap.h> #include &lt;time.h> #include &lt;stdlib.h> #include &lt;stdio.h> void getPacket...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua","slug":"lua","count":124,"path":"api/tags/lua.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"基于PyQt的微博客户端（一）","uid":"865669acba81f78ac004d912a3c001a5","slug":"old_topic/2016-09-17-41","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.186Z","comments":true,"path":"api/articles/old_topic/2016-09-17-41.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"【概要】 用PyQt作为Windows下的GUI客户端开发工具，结合廖雪峰老师的weibo python SDK，实现一个windows与Linux平台通用的微博客户端应用。 过程中使用新浪云上架设的RPC服务，与客户端交换数据。 【环境准备】 I.Windows平台 1.Pyt...","link":"","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[{"name":"lua","slug":"lua","count":124,"path":"api/tags/lua.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}