{"title":"MoonScript与Simple.http","uid":"df2fd49163891cc3e511275bc9921624","slug":"old_topic/2016-09-17-343","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.218Z","comments":true,"path":"api/articles/old_topic/2016-09-17-343.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<p>MoonScript调用Lapis的Simple.http，其实调用的就是OpenResty的http的接口。</p>\n<p>candylab.moon</p>\n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">http <span class=\"token operator\">=</span> require <span class=\"token string\">\"lapis.nginx.http\"</span>\nbody<span class=\"token punctuation\">,</span> status_code<span class=\"token punctuation\">,</span> headers <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">simple</span> <span class=\"token punctuation\">&#123;</span>\n    url<span class=\"token punctuation\">:</span> <span class=\"token string\">'http://moonscript.cn'</span> \n    method<span class=\"token punctuation\">:</span> <span class=\"token string\">\"GET\"</span>\n    headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span> \n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>candylab.lua</p>\n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\"><span class=\"token keyword\">local</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"lapis.nginx.http\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">local</span> body<span class=\"token punctuation\">,</span> status_code<span class=\"token punctuation\">,</span> headers <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">simple</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n    url <span class=\"token operator\">=</span> <span class=\"token string\">'http://moonscript.cn'</span><span class=\"token punctuation\">,</span>\n    method <span class=\"token operator\">=</span> <span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">,</span>\n    headers <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","text":"MoonScript调用Lapis的Simple.http，其实调用的就是OpenResty的http的接口。 candylab.moon http = require \"lapis.nginx.http\" body, status_code, headers = http.si...","link":"","photos":[],"count_time":{"symbolsCount":434,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"toc":"","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"从实现角度看Openresty + LUA = WAF","uid":"4b277b3bf21c49d9a15db633f740d15e","slug":"old_topic/2016-09-17-347","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.211Z","comments":true,"path":"api/articles/old_topic/2016-09-17-347.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"作者：糖果 1.WAF存在形态 WAF就是WEB防火墙，Nginx Lua和Openresty的出现，让基于LUA开发的WAF更有可能。对所有 会造成安全威胁的HTTP请求数据，都应该成为安全检查策略应该关注的内容，笼统上来讲OR WAF的式样要求的输入数据，就是可以在WEB服务...","link":"","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"ENV的C语言实现","uid":"03eb1b6e42f3161910ec1f1a5c8f6a96","slug":"old_topic/2016-09-17-341","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.154Z","comments":true,"path":"api/articles/old_topic/2016-09-17-341.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"env的实现，就是下面一小段的C语言实现。 #include &lt;stdio.h> extern char**environ; int main () &#123; char**var; char *str; for (var =environ;*var !=NULL;++v...","link":"","photos":[],"count_time":{"symbolsCount":218,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}