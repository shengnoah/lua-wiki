{"title":"Moonscript的循环结构","uid":"b8a0477ffed33bd6d0efdb938e9ec4db","slug":"old_topic/2016-09-17-187","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.229Z","comments":true,"path":"api/articles/old_topic/2016-09-17-187.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<p>除了使用迭代器，某些应用场合，我们还需要使用固定次数的循环结构，Moonscript提供While风格<br />\n的固定循环控制。</p>\n<p>Moonscript</p>\n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">class extends lapis<span class=\"token punctuation\">.</span>Application\n  <span class=\"token punctuation\">[</span>loop<span class=\"token punctuation\">:</span> <span class=\"token string\">\"/loop\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n    @html <span class=\"token operator\">-</span><span class=\"token operator\">></span>\n      i <span class=\"token operator\">=</span>  <span class=\"token number\">10</span>\n      <span class=\"token keyword\">while</span> i <span class=\"token operator\">></span> <span class=\"token number\">0</span>\n        div text <span class=\"token string\">\"Moonscript\"</span>\n        i <span class=\"token operator\">-</span><span class=\"token operator\">=</span> <span class=\"token number\">1</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>我们把纯循环的代码，从Moonscript Lapis框架代码独立出来：</p>\n<p>Moonscript</p>\n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">i <span class=\"token operator\">=</span> <span class=\"token number\">100</span>\nmy_func <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span>\n  i <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n  <span class=\"token keyword\">while</span> i <span class=\"token operator\">></span> <span class=\"token number\">0</span>\n    print i\n    i <span class=\"token operator\">-</span><span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\nmy_func!\n\nprint i<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>Lua</p>\n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\"><span class=\"token keyword\">local</span> i <span class=\"token operator\">=</span> <span class=\"token number\">100</span>\n<span class=\"token keyword\">local</span> my_func\nmy_func <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  i <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n  <span class=\"token keyword\">while</span> i <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token keyword\">do</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n    i <span class=\"token operator\">=</span> i <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n<span class=\"token function\">my_func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">return</span> <span class=\"token function\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>为什么这个？用这种循环样式在Moonscript直接控制HTML标签应该能比较便捷一些。</p>\n<p>把静态文档的目录用些控制，配合sitegen生成静态网页很好。</p>\n<p>作者：糖果</p>\n<p>PS:转载到其它平台请注明作者姓名及原文链接，请勿用于商业用途。</p>\n","text":"除了使用迭代器，某些应用场合，我们还需要使用固定次数的循环结构，Moonscript提供While风格 的固定循环控制。 Moonscript class extends lapis.Application [loop: \"/loop\"]:=> @html -> i = 10 w...","link":"","photos":[],"count_time":{"symbolsCount":607,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"toc":"","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"老衲，这代码不能要！","uid":"e5306b1f99d6e83b5a21496ff6f51752","slug":"old_topic/2016-09-17-186","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.207Z","comments":true,"path":"api/articles/old_topic/2016-09-17-186.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"Christ people. This is just sh*t. The conflict I get is due to stupid new gcc header file crap. But what makes me upset is that the crap is ...","link":"","photos":[],"count_time":{"symbolsCount":"3.2k","symbolsTime":"3 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Moonscript的Busted单体测试","uid":"43450fb948daac9a77b252ddeba99506","slug":"old_topic/2016-09-17-189","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.199Z","comments":true,"path":"api/articles/old_topic/2016-09-17-189.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"作者：糖果 Busted是Lua的单体测试工具。 去官网Github看一下，也支持Moonscript的单体测试。 moonunit.moon describe 'moonscript tests', -> it 'works', -> assert.are.equal true...","link":"","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}