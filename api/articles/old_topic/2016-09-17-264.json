{"title":"爬虫小工具BeautifulSoup","uid":"916d00d5ac3386eee42a586e5f38ef7d","slug":"old_topic/2016-09-17-264","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.157Z","comments":true,"path":"api/articles/old_topic/2016-09-17-264.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<p>BeautifulSoup是一种用于分析网页HTML内容元素的工具，还有类似的Request也可完成相关工作。</p>\n<p>下面是一小段程序，翻出来：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> urllib2 <span class=\"token keyword\">import</span> urlopen<span class=\"token punctuation\">,</span> URLError\n<span class=\"token keyword\">from</span> bs4 <span class=\"token keyword\">import</span> BeautifulSoup\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        baseUrl <span class=\"token operator\">=</span> <span class=\"token string\">'http://house.focus.cn/msglist/7906/'</span>\n        hd <span class=\"token operator\">=</span> urlopen<span class=\"token punctuation\">(</span>baseUrl<span class=\"token punctuation\">,</span> timeout <span class=\"token operator\">=</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\n        content <span class=\"token operator\">=</span> hd<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        content <span class=\"token operator\">=</span> content<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'gb2312'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ignore'</span><span class=\"token punctuation\">)</span>\n        soup <span class=\"token operator\">=</span> BeautifulSoup<span class=\"token punctuation\">(</span>content<span class=\"token punctuation\">)</span>\n        p <span class=\"token operator\">=</span> soup<span class=\"token punctuation\">.</span>findAll<span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> p<span class=\"token punctuation\">:</span>\n                val <span class=\"token operator\">=</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">and</span> <span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">and</span> <span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'font'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token keyword\">print</span> item<span class=\"token punctuation\">.</span>text\n                        tmpurl <span class=\"token operator\">=</span>  <span class=\"token string\">'http://house.focus.cn'</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">[</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                        <span class=\"token keyword\">print</span> tmpurl\n\nfetch<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>Beautiful最本质完成一个作内容，是把HTML的元素标签&quot;对像:化，item化。如果不喜欢那种，直接通过正则表达式在HTML内容中匹配数据，或是不是所有的都用正则，Beautiful是一个不错的选择。</p>\n<p>scrapy生成爬虫生成，更工程化，至少会自动生成一个目录构成，自动生成脚本脚架代码。没有非常大的爬取量，这些python工具可以完成任务的。</p>\n","text":"BeautifulSoup是一种用于分析网页HTML内容元素的工具，还有类似的Request也可完成相关工作。 下面是一小段程序，翻出来： from urllib2 import urlopen, URLError from bs4 import BeautifulSoup de...","link":"","photos":[],"count_time":{"symbolsCount":901,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"toc":"","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Lapis快速分页查询","uid":"e7519b56d8be6d962f5762cfa924baa8","slug":"old_topic/2016-09-17-265","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.181Z","comments":true,"path":"api/articles/old_topic/2016-09-17-265.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"作者：糖果 Lapis分页查询和一般的Django分页查询有明显的分别： lapis分页器对象的创建和查询条件的指定是同时的。 local lapis = require \"lapis\" local app = lapis.Application() local config =...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"地理位置信息库PyGeoIP","uid":"0c2b4d50783b3962d80c6ee9ac8f9c11","slug":"old_topic/2016-09-17-266","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.219Z","comments":true,"path":"api/articles/old_topic/2016-09-17-266.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"地理位置信息库PyGeoIP wget http:&#x2F;&#x2F;geolite.maxmind.com&#x2F;download&#x2F;geoip&#x2F;database&#x2F;GeoLiteCity.dat.gz &amp;&amp; gzip -d G...","link":"","photos":[],"count_time":{"symbolsCount":627,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}