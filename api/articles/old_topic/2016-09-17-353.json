{"title":"MoonScript实现Map按值排序","uid":"8df307659316a77ab2a33659c2147085","slug":"old_topic/2016-09-17-353","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T06:15:59.752Z","comments":true,"path":"api/articles/old_topic/2016-09-17-353.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"content":"<p>作者：糖果</p>\n<h3 id=\"MoonScript代码：\"><a href=\"#MoonScript代码：\" class=\"headerlink\" title=\"MoonScript代码：\"></a>MoonScript代码：</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">board = &#123; </span><br><span class=\"line\">  [<span class=\"string\">&#x27;0.0.0.1&#x27;</span>]:<span class=\"number\">1</span>,</span><br><span class=\"line\">  [<span class=\"string\">&#x27;0.0.0.5&#x27;</span>]:<span class=\"number\">5</span>,</span><br><span class=\"line\">  [<span class=\"string\">&#x27;0.0.0.3&#x27;</span>]:<span class=\"number\">3</span>,</span><br><span class=\"line\">  [<span class=\"string\">&#x27;0.0.0.2&#x27;</span>]:<span class=\"number\">2</span>,</span><br><span class=\"line\">  [<span class=\"string\">&#x27;0.0.0.9&#x27;</span>]:<span class=\"number\">9</span>,</span><br><span class=\"line\">  [<span class=\"string\">&#x27;0.0.3.3&#x27;</span>]:<span class=\"number\">3</span>,</span><br><span class=\"line\">  [<span class=\"string\">&#x27;0.0.0.6&#x27;</span>]:<span class=\"number\">6</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">mapsort = (board)-&gt;</span><br><span class=\"line\">  b_len = <span class=\"number\">0</span> </span><br><span class=\"line\">  <span class=\"keyword\">for</span> k,v <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(board)</span><br><span class=\"line\">    b_len = b_len + <span class=\"number\">1</span> </span><br><span class=\"line\">  </span><br><span class=\"line\">  a1 = &#123;&#125;</span><br><span class=\"line\">  a2 = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  i = <span class=\"number\">0</span> </span><br><span class=\"line\">  <span class=\"keyword\">for</span> k,v <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(board)</span><br><span class=\"line\">    i = i + <span class=\"number\">1</span> </span><br><span class=\"line\">    a1[i] = k </span><br><span class=\"line\">    a2[i] = v </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> i = <span class=\"number\">1</span>, b_len</span><br><span class=\"line\">     <span class=\"built_in\">max</span> = a2[i]</span><br><span class=\"line\">     <span class=\"keyword\">for</span> j = i + <span class=\"number\">1</span>, b_len </span><br><span class=\"line\">       <span class=\"keyword\">if</span> a2[j] &gt; <span class=\"built_in\">max</span> </span><br><span class=\"line\">         tmp = a2[j]</span><br><span class=\"line\">         a2[j] = <span class=\"built_in\">max</span></span><br><span class=\"line\">         a2[i] = tmp</span><br><span class=\"line\">         <span class=\"built_in\">max</span> = tmp</span><br><span class=\"line\"></span><br><span class=\"line\">         tmp1 = a1[j]</span><br><span class=\"line\">         a1[j]  = a1[i]</span><br><span class=\"line\">         a1[i] = tmp1</span><br><span class=\"line\"></span><br><span class=\"line\">  ret = &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> k,v <span class=\"keyword\">in</span> <span class=\"built_in\">ipairs</span>(a1) </span><br><span class=\"line\">    ret[k] = &#123;a1[k], a2[k]&#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ret</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;########&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">ret = mapsort board</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> k,v <span class=\"keyword\">in</span> <span class=\"built_in\">ipairs</span>(ret) </span><br><span class=\"line\">  <span class=\"built_in\">print</span>(ret[k][<span class=\"number\">1</span>], ret[k][<span class=\"number\">2</span>])</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"LUA代码：\"><a href=\"#LUA代码：\" class=\"headerlink\" title=\"LUA代码：\"></a>LUA代码：</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">local</span> board = &#123; </span><br><span class=\"line\">  [<span class=\"string\">&#x27;0.0.0.1&#x27;</span>] = <span class=\"number\">1</span>,</span><br><span class=\"line\">  [<span class=\"string\">&#x27;0.0.0.5&#x27;</span>] = <span class=\"number\">5</span>,</span><br><span class=\"line\">  [<span class=\"string\">&#x27;0.0.0.3&#x27;</span>] = <span class=\"number\">3</span>,</span><br><span class=\"line\">  [<span class=\"string\">&#x27;0.0.0.2&#x27;</span>] = <span class=\"number\">2</span>,</span><br><span class=\"line\">  [<span class=\"string\">&#x27;0.0.0.9&#x27;</span>] = <span class=\"number\">9</span>,</span><br><span class=\"line\">  [<span class=\"string\">&#x27;0.0.0.3&#x27;</span>] = <span class=\"number\">3</span>,</span><br><span class=\"line\">  [<span class=\"string\">&#x27;0.0.0.6&#x27;</span>] = <span class=\"number\">6</span> </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">local</span> mapsort</span><br><span class=\"line\">mapsort = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(board)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">local</span> b_len = <span class=\"number\">0</span> </span><br><span class=\"line\">  <span class=\"keyword\">for</span> k, v <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(board) <span class=\"keyword\">do</span></span><br><span class=\"line\">    b_len = b_len + <span class=\"number\">1</span> </span><br><span class=\"line\">  <span class=\"keyword\">end</span> </span><br><span class=\"line\">  <span class=\"keyword\">local</span> a1 = &#123; &#125; </span><br><span class=\"line\">  <span class=\"keyword\">local</span> a2 = &#123; &#125; </span><br><span class=\"line\">  <span class=\"keyword\">local</span> i = <span class=\"number\">0</span> </span><br><span class=\"line\">  <span class=\"keyword\">for</span> k, v <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(board) <span class=\"keyword\">do</span></span><br><span class=\"line\">    i = i + <span class=\"number\">1</span> </span><br><span class=\"line\">    a1[i] = k </span><br><span class=\"line\">    a2[i] = v </span><br><span class=\"line\">  <span class=\"keyword\">end</span> </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> i = <span class=\"number\">1</span>, b_len <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"keyword\">local</span> <span class=\"built_in\">max</span> = a2[i]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> j = i + <span class=\"number\">1</span>, b_len <span class=\"keyword\">do</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> a2[j] &gt; <span class=\"built_in\">max</span> <span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"keyword\">local</span> tmp = a2[j]</span><br><span class=\"line\">        a2[j] = <span class=\"built_in\">max</span> </span><br><span class=\"line\">        a2[i] = tmp</span><br><span class=\"line\">        <span class=\"built_in\">max</span> = tmp</span><br><span class=\"line\">        <span class=\"keyword\">local</span> tmp1 = a1[j]</span><br><span class=\"line\">        a1[j] = a1[i]</span><br><span class=\"line\">        a1[i] = tmp1</span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">local</span> ret = &#123; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> k, v <span class=\"keyword\">in</span> <span class=\"built_in\">ipairs</span>(a1) <span class=\"keyword\">do</span></span><br><span class=\"line\">    ret[k] = &#123;</span><br><span class=\"line\">      a1[k],</span><br><span class=\"line\">      a2[k]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> ret</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;########&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">local</span> ret = mapsort(board)</span><br><span class=\"line\"><span class=\"keyword\">for</span> k, v <span class=\"keyword\">in</span> <span class=\"built_in\">ipairs</span>(ret) <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"built_in\">print</span>(ret[k][<span class=\"number\">1</span>], ret[k][<span class=\"number\">2</span>])</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>","text":"作者：糖果 MoonScript代码：123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051board = &#123; [&#x27;0.0.0....","link":"","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#MoonScript%E4%BB%A3%E7%A0%81%EF%BC%9A\"><span class=\"toc-text\">MoonScript代码：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#LUA%E4%BB%A3%E7%A0%81%EF%BC%9A\"><span class=\"toc-text\">LUA代码：</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"MoonScript实现选择排序","uid":"bde2d986b961652c5b4dbeefb6342f0a","slug":"old_topic/2016-09-17-354","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T06:15:59.752Z","comments":true,"path":"api/articles/old_topic/2016-09-17-354.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"作者：糖果 LUA代码：1234567891011121314list = &#123;1,5,3,2,9,3,6&#125;len=#listfor i=1,len max = list[i] for j=i+1, len do if list[j]&gt;max then t...","link":"","photos":[],"count_time":{"symbolsCount":638,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"关于Lua的LazyTable的实现","uid":"a345db901c4262d0d7e3998d536c82d4","slug":"old_topic/2016-09-17-357","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T06:15:59.752Z","comments":true,"path":"api/articles/old_topic/2016-09-17-357.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"作者：糖果 LazyTable源码1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465lo...","link":"","photos":[],"count_time":{"symbolsCount":"4.4k","symbolsTime":"4 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}