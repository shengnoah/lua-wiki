{"title":"Ubuntu 平台安装","uid":"eddb21444824ae593031f4e574f2f2f6","slug":"old_topic/2016-09-17-321","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T06:15:59.749Z","comments":true,"path":"api/articles/old_topic/2016-09-17-321.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"content":"<h1 id=\"Ubuntu-平台安装\"><a href=\"#Ubuntu-平台安装\" class=\"headerlink\" title=\"Ubuntu 平台安装\"></a>Ubuntu 平台安装</h1><h4 id=\"源码包准备\"><a href=\"#源码包准备\" class=\"headerlink\" title=\"源码包准备\"></a>源码包准备</h4><p>我们首先要在<a href=\"http://openresty.org/\">官网</a>下载 OpenResty 的源码包。官网上会提供很多的版本，各个版本有什么不同也会有说明，我们可以按需选择下载。<br>笔者选择下载的源码包为 ngx_openresty-1.9.7.1.tar.gz。</p>\n<h4 id=\"相关依赖包的安装\"><a href=\"#相关依赖包的安装\" class=\"headerlink\" title=\"相关依赖包的安装\"></a>相关依赖包的安装</h4><p>首先你要安装 OpenResty 需要的多个库<br>请先配置好你的apt源，配置源的过程在这就不阐述了，然后执行以下命令安装OpenResty编译或运行时所需要的软件包。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">apt-get install libreadline-dev libncurses5-dev libpcre3-dev \\</span></span><br><span class=\"line\"><span class=\"language-bash\">    libssl-dev perl make build-essential</span></span><br></pre></td></tr></table></figure>\n\n<p>如果你只是想测试一下OpenResty，并不想实际使用，那么你也可以不必去配置源和安装这些依赖库，请直接往下看。</p>\n<h4 id=\"OpenResty-安装\"><a href=\"#OpenResty-安装\" class=\"headerlink\" title=\"OpenResty 安装\"></a>OpenResty 安装</h4><ol>\n<li><p>在命令行中切换到源码包所在目录。</p>\n</li>\n<li><p>解压源码包，<code>tar xzvf ngx_openresty-1.9.7.1.tar.gz</code>。若你下载的源码包版本不一样，将相应的版本号改为你所下载的即可。</p>\n</li>\n<li><p>切换工作目录到 <code>cd ngx_openresty-1.9.7.1</code>。</p>\n</li>\n<li><p>了解默认激活的组件。<a href=\"http://openresty.org/\">OpenResty 官网</a>有组件列表,我们可以参考，列表中大部分组件默认激活，也有部分默认不激活。<br>默认不激活的组件，我们可以在编译的时激活，后面步骤详说明。</p>\n</li>\n<li><p>配置安装目录及需要激活的组件。使用选项 –prefix=install_path，指定安装目录（默认为/usr/local/openresty）。</p>\n<p> 使用选项 –with-Components 激活组件，–without 则是禁止组件。<br> 你可以根据自己实际需要选择 with 或 without。如下命令，OpenResty 将配置安装在 /opt/openresty 目录下（注意使用 root 用户）,并激活<code>luajit</code>、<code>http_iconv_module</code> 并禁止 <code>http_redis2_module</code> 组件。</p>\n <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">./configure --prefix=/opt/openresty\\</span></span><br><span class=\"line\"><span class=\"language-bash\">            --with-luajit\\</span></span><br><span class=\"line\"><span class=\"language-bash\">            --without-http_redis2_module \\</span></span><br><span class=\"line\"><span class=\"language-bash\">            --with-http_iconv_module</span></span><br></pre></td></tr></table></figure></li>\n<li><p>在上一步中，最后没有什么 error 的提示就是最好的。若有错误，最后会显示<br>具体原因可以看源码包目录下的 <code>build/nginx-VERSION/objs/autoconf.err</code>文件查看。若没有错误，则会出现如下信息：</p>\n <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Type the following commands to build and install:</span><br><span class=\"line\">    gmake</span><br><span class=\"line\">    gmake install</span><br></pre></td></tr></table></figure></li>\n<li><p>编译：根据上一步命令提示，输入<code>gmake</code>。</p>\n</li>\n<li><p>安装：输入<code>gmake install</code>。</p>\n</li>\n<li><p>上面的步骤顺利完成之后，安装已经完成。可以在你指定的安装目录下看到一些相关目录及文件。</p>\n</li>\n</ol>\n<h4 id=\"设置环境变量\"><a href=\"#设置环境变量\" class=\"headerlink\" title=\"设置环境变量\"></a>设置环境变量</h4><p>为了后面启动 OpenResty 的命令简单一些，不用在 OpenResty 的安装目录下进行启动，我们设置环境变量来简化操作。<br>将 nginx 目录添加到 PATH 中。打开文件 /etc/profile，<br>在文件末尾加入<code>export PATH=$PATH:/opt/openresty/nginx/sbin</code>，若你的安装目录不一样，则做相应修改。<br>注意：这一步操作需要重新加载环境变量才会生效，可通过命令<code>source /etc/profile</code>或者重启服务器等方式实现。</p>\n<p>接下来，我们就可以进入到后面的章节 <a href=\"helloworld.md\">HelloWorld</a> 学习。</p>\n","text":"Ubuntu 平台安装源码包准备我们首先要在官网下载 OpenResty 的源码包。官网上会提供很多的版本，各个版本有什么不同也会有说明，我们可以按需选择下载。笔者选择下载的源码包为 ngx_openresty-1.9.7.1.tar.gz。 相关依赖包的安装首先你要安装 Ope...","link":"","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Ubuntu-%E5%B9%B3%E5%8F%B0%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">Ubuntu 平台安装</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%BA%90%E7%A0%81%E5%8C%85%E5%87%86%E5%A4%87\"><span class=\"toc-text\">源码包准备</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96%E5%8C%85%E7%9A%84%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">相关依赖包的安装</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#OpenResty-%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">OpenResty 安装</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">设置环境变量</span></a></li></ol></li></ol></li></ol></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"CentOS 平台安装","uid":"9c6306013a86b8a64bcd14635d2ba068","slug":"old_topic/2016-09-17-320","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T06:15:59.749Z","comments":true,"path":"api/articles/old_topic/2016-09-17-320.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"CentOS 平台安装源码包准备我们首先要在官网下载 OpenResty 的源码包。官网上会提供很多的版本，各个版本有什么不同也会有说明，我们可以按需选择下载。笔者选择下载的源码包为 ngx_openresty-1.9.7.1.tar.gz（请大家跟进使用最新版本，这里只是个例子...","link":"","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"环境搭建","uid":"4180c84379ce1a0a588121e5cfa4f15f","slug":"old_topic/2016-09-17-319","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T06:15:59.748Z","comments":true,"path":"api/articles/old_topic/2016-09-17-319.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"环境搭建实践的前提是搭建环境，本节的几个小节将介绍在几种常见操作平台上 OpenResty 的安装。 为了降低用户安装门槛，对于不同系统安装，部分章节存在比较大的重复内容。读者只需要选择自己需要的平台并尝试安装即可。除了 windows 版本是以二进制发行，其他平台由于系统自身的...","link":"","photos":[],"count_time":{"symbolsCount":237,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}