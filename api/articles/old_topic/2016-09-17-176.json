{"title":"Vanilla框架静态的路由使用","uid":"1d32e6a3ca5529481390baf7789466f8","slug":"old_topic/2016-09-17-176","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T06:15:59.737Z","comments":true,"path":"api/articles/old_topic/2016-09-17-176.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"content":"<p>作者：糖果</p>\n<p>这次我们来看一下，如何在Vanilla下，追加新的路由。</p>\n<p>在Vanilla中追加一个新的路由，需要添加两个文件即可完成。</p>\n<p>我们进入工程根目录下的application目录，分别在controllers文件夹、views文件夹下肯创建两个文件。</p>\n<p>1.创建controllers文件。</p>\n<p>waf.lua</p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">local</span> WafController = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">WafController:waf</span><span class=\"params\">()</span></span></span><br><span class=\"line\">    <span class=\"keyword\">local</span> view = <span class=\"built_in\">self</span>:getView()</span><br><span class=\"line\">    <span class=\"keyword\">local</span> p = &#123;&#125;</span><br><span class=\"line\">    p[<span class=\"string\">&#x27;vanilla&#x27;</span>] = <span class=\"string\">&#x27;WAF&#x27;</span></span><br><span class=\"line\">    p[<span class=\"string\">&#x27;zhoujing&#x27;</span>] = <span class=\"string\">&#x27;Power by Openresty&#x27;</span></span><br><span class=\"line\">    view:assign(p)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> view:display()</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">return</span> WafController</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>2.创建views文件。</p>\n<p>waf.html</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;http://m1.sinaimg.cn/maxwidth.300/m1.sinaimg.cn/120d7329960e19cf073f264751e8d959_2043_2241.png&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span> = <span class=\"string\">&#x27;https://github.com/idevz/vanilla&#x27;</span>&gt;</span>&#123;&#123;vanilla&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">h5</span>&gt;</span>&#123;&#123;zhoujing&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>3.创建后的目录结构 。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">./controllers</span><br><span class=\"line\">./controllers/index.lua</span><br><span class=\"line\">./controllers/error.lua</span><br><span class=\"line\">./controllers/waf.lua</span><br><span class=\"line\">./views</span><br><span class=\"line\">./views/error</span><br><span class=\"line\">./views/error/error.html</span><br><span class=\"line\">./views/waf</span><br><span class=\"line\">./views/waf/waf.html</span><br><span class=\"line\">./views/index</span><br><span class=\"line\">./views/index/index.html</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>最后我们在浏览器中输入路由到新网页的地址：</p>\n<p><a href=\"http://www.vanilla.ren:7200/waf/waf\">http://www.vanilla.ren:7200/waf/waf</a></p>\n<p>下一篇介绍，如何配置vanilla中的WAF。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://vanilla.ren:7200/waf.php?key=../</span><br></pre></td></tr></table></figure>\n\n\n\n\n<p>PS:转载到其它平台请注明作者姓名及原文链接，请勿用于商业用途。</p>\n","text":"作者：糖果 这次我们来看一下，如何在Vanilla下，追加新的路由。 在Vanilla中追加一个新的路由，需要添加两个文件即可完成。 我们进入工程根目录下的application目录，分别在controllers文件夹、views文件夹下肯创建两个文件。 1.创建controll...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"toc":"","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"WebSockets with OpenResty","uid":"5dd63397e730372ad714df83ebd3c1b7","slug":"old_topic/2016-09-17-175","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T06:15:59.737Z","comments":true,"path":"api/articles/old_topic/2016-09-17-175.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"WebSockets with OpenResty Lua WebSocket Implementation Installation This blog post is updated for OpenResty 1.4.2.9. 本文适用于OpenResty 1.4.2.9 ...","link":"","photos":[],"count_time":{"symbolsCount":"5.2k","symbolsTime":"5 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"闲置域名出售","uid":"3d42be7f67c57899442ba0d89e7757b9","slug":"old_topic/2016-09-17-174","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T06:15:59.737Z","comments":true,"path":"api/articles/old_topic/2016-09-17-174.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"手上有一些闲置的域名，有需要的同学可以卖走。 www.openresty.win openresty.win 8元出售 www.vanilla.ren www.errcode.xyz 2元出售 www.errorcode.xyz 1元出售 www.108086.xyz5元出售 w...","link":"","photos":[],"count_time":{"symbolsCount":208,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}