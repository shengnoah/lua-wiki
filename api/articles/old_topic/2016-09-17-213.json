{"title":"ConcurrentLua","uid":"8f06b9deb34ffdfee8f8030a216bc228","slug":"old_topic/2016-09-17-213","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.216Z","comments":true,"path":"api/articles/old_topic/2016-09-17-213.json","keywords":"AIGC,LLM,ç³–æœAIGCå®éªŒå®¤","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h3>ä»‹ç»</h3> \n<p>ConcurrentLua æ˜¯ä¸€ä¸ªæ— å…±äº«å¼‚æ­¥æ¶ˆæ¯ä¼ é€’æ¨¡å‹çš„å®ç°.è¯¥æ¨¡å‹æ¥è‡ªErlangè¯­è¨€.<br />\nå¥¹æ”¹ç¼–äº†Erlangçš„å¹¶å‘å…ƒç´ å¹¶æ•´åˆè¿›Luaé‡Œ.</p>\n<p>ConcurrentLuaçš„ä¸€ä¸ªæ ¸å¿ƒå…ƒç´ æ˜¯ process(è¿›ç¨‹).ä¸€ä¸ªè¿›ç¨‹æ˜¯ä¸€ä¸ªè½»é‡çº§<br />\nè™šæ‹Ÿæœº</p>\n<p>çº¿ç¨‹,æ‰®æ¼”å’Œæ“ä½œç³»ç»Ÿçš„è¿›ç¨‹åŒæ ·çš„è§’è‰²;ä»–ä»¬ä¸å…±äº«å†…å­˜è€Œæ˜¯ä½¿ç”¨æŸè¿™è¿›ç¨‹é—´é€šè®¯<br />\næœºåˆ¶.è¿™äº›è¿›ç¨‹èƒ½å¤Ÿæ ¹æ®éœ€è¦è¢«åˆ›å»ºå’Œé”€æ¯,å¹¶é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¯ç½—å®¾(è½®è®­)ç®—æ³•æ¥<br />\nè°ƒåº¦ä»–ä»¬.</p>\n<p>æ¯ä¸€ä¸ªè¿›ç¨‹å…³è”åˆ°ä¸€ä¸ªé‚®ç®±(ä¸´æ—¶å­˜å‚¨æ¶ˆæ¯çš„é˜Ÿåˆ—),é€šè¿‡é‚®ç®±æ¥æ¥å—åˆ«çš„è¿›ç¨‹å‘æ¥<br />\nçš„æ¶ˆæ¯.è¿›ç¨‹å¯ä»¥åœ¨ä»»ä½•æ—¶å€™æ£€æŸ¥è‡ªå·±çš„é‚®ç®±æœ‰æ²¡æœ‰æ–°æ¶ˆæ¯æŠµè¾¾,å¦‚æœæœ‰,è¿›ç¨‹å¯ä»¥<br />\næŒ‰ç…§æŠµè¾¾çš„é¡ºåºä¾æ¬¡è¯»å–.</p>\n<p>æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ•°å­—ä½œä¸ºè¿›ç¨‹æ ‡è¯†,å« PID(process identifier).ä¹Ÿå¯ä»¥<br />\nç»™è¿›ç¨‹å–ä¸€ä¸ªåå­—,å¹¶ç”¨åå­—æ¥æŒ‡ä»£è¿›ç¨‹.è¿›ç¨‹åå’Œè¿›ç¨‹çš„å¯¹åº”å…³ç³»è¢«ä¿å­˜åˆ°ä¸€ä¸ª<br />\nä¸­å¿ƒå‚¨è—å®¤â€“registry(æ³¨å†Œè¡¨).è¿›ç¨‹å¯ä»¥ç¼–è¾‘æ³¨å†Œè¡¨,æ·»åŠ æˆ–è€…åˆ é™¤è¡¨é¡¹.</p>\n<p>é”™è¯¯æ•æ‰æœºåˆ¶ä¹Ÿè¢«å®ç°æˆ monitors å’Œ links .é€šè¿‡ monitors è¿›ç¨‹èƒ½å¤Ÿç›‘è§†å…¶ä»–<br />\nè¿›ç¨‹,å¹¶åœ¨è¢«ç›‘è§†è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢çš„æ—¶å€™è·å¾—é€šçŸ¥.é€šè¿‡ linker è¿›ç¨‹ç»‘å®šè¿›ç¨‹åˆ°ä¸€èµ·,<br />\nå½“ä¸€ä¸ªè¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢çš„æ—¶å€™,å…¶ä»–è¿›ç¨‹ä¹Ÿè¢«é€šçŸ¥å¹¶ç»ˆæ­¢.</p>\n<p>æœ¬ç³»ç»Ÿè¿˜æ”¯æŒåˆ†å¸ƒå¼ç¼–ç¨‹å’Œæ‰€æœ‰ç›¸å…³çš„ç»„ä»¶.åˆ†å¸ƒå¼çš„è¿›ç¨‹é€šè¿‡å’Œæœ¬åœ°è¿›ç¨‹ä¸€æ ·çš„<br />\næ–¹å¼æ¥é€šè®¯.</p>\n<p>åˆ†å¸ƒæ˜¯åŸºäº node(èŠ‚ç‚¹) ç»„ä»¶çš„.ä¸€ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªè¿è¡Œç€å¾ˆå¤šè¿›ç¨‹çš„è¿è¡Œæ—¶ç¯å¢ƒ.<br />\nèŠ‚ç‚¹ä»¬å¯ä»¥ç›¸äº’è¿æ¥å’Œé€šè®¯,äºæ˜¯å»ºç«‹äº†ä¸€ä¸ªè™šæ‹Ÿç½‘ç»œ.åˆ†å¸ƒçš„è¿›ç¨‹ä½¿ç”¨è¿™ä¸ªç½‘ç»œæ¥<br />\né¡ºåºäº¤æ¢ä¿¡æ¯.</p>\n<p>æ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸ªåå­—.å…¶ä»–çš„èŠ‚ç‚¹å¯ä»¥é€šè¿‡è¿™ä¸ªåå­—æ¥è¿æ¥.ä¸€ä¸ªç«¯å£æ˜ å°„å™¨ç²¾çµè¿›ç¨‹<br />\n(è¯‘æ³¨:å°±æ˜¯æœåŠ¡è¿›ç¨‹,ç±»ä¼¼Erlangæä¾›çš„åå­—æœåŠ¡)æä¾›äº†åå­—è§£ææœåŠ¡.ç«¯å£æ˜ å°„å™¨<br />\nçŸ¥æ™“è™šæ‹Ÿç½‘ç»œä¸­æ‰€æœ‰çš„èŠ‚ç‚¹çš„ä¿¡æ¯.</p>\n<p>æ­£å¦‚è¿›ç¨‹å¯ä»¥åœ¨æœ¬åœ°åˆ›å»º,è¿›ç¨‹å·²å¯ä»¥åœ¨è¿œç«¯èŠ‚ç‚¹è¢«åˆ›å»º.ä¸€ä¸ªè¿œç¨‹è¿›ç¨‹èƒ½å¤Ÿè¢«è§†åŒ<br />\nä¸ºä¸€ä¸ªæœ¬åœ°è¿›ç¨‹æ¥æ“ä½œ.</p>\n<p>å¦‚æœè™šæ‹Ÿç½‘ç»œä¸­çš„èŠ‚ç‚¹æ˜¯å…¨äº’è”çš„(æ¯ä¸€ä¸ªèŠ‚ç‚¹åŒå‘è¿æ¥å…¶ä»–çš„èŠ‚ç‚¹),é‚£ä¹ˆå¯ä»¥ä½¿ç”¨<br />\nå…¨å±€è¿›ç¨‹å.èŠ‚ç‚¹ä»¬ç›¸äº’äº¤æµå’Œä¿å…»è™šæ‹Ÿå…¨å±€æ³¨å†Œè¡¨å¹¶ä¿æŒè‡ªå·±æœ¬åœ°çš„æ³¨å†Œè¡¨æ—¶æ—¶<br />\næ›´æ–°.</p>\n<p>monitors å’Œ links ä»¥åŒæ ·çš„è¯­ä¹‰æ”¯æŒåˆ†å¸ƒè¿›ç¨‹å’Œæœ¬åœ°è¿›ç¨‹.èŠ‚ç‚¹å¯ä»¥é€æ˜çš„å¤„ç†<br />\nåˆ†å¸ƒè¿›ç¨‹çš„é”™è¯¯.å¦å¤–,è¿›ç¨‹å¯ä»¥åƒç›‘è§†æ•´ä¸ªèŠ‚ç‚¹.</p>\n<p>èŠ‚ç‚¹å¯ä»¥åœ¨é€šè®¯å‰è¿›è¡Œé‰´æƒ.ä¸€ä¸ªå·²é‰´æƒçš„èŠ‚ç‚¹æ‰å¯ä»¥æˆä¸ºè™šæ‹Ÿç½‘ç»œçš„ä¸€éƒ¨åˆ†.è¿™äº›<br />\nç­–ç•¥é€šè¿‡ä¸€ä¸ªç®€å•å®‰å…¨æœºåˆ¶æ¥ä¿è¯.</p>\n<h3>å®ç°</h3> \n<p>ConcurrentLuaçš„å®ç°æ˜¯åŸºäºLuaç»„ä»¶ç³»ç»Ÿå®ç°çš„.è¿™ä¸ªç³»ç»Ÿè´Ÿè´£ç»„ç»‡å’Œç®¡ç†Luaçš„æ¨¡å—å’Œå­æ¨¡å—.ä¸»æ¨¡å—æœ‰ä¸¤ä¸ª,åˆ†åˆ«æä¾›äº†å¹¶å‘åŠŸèƒ½å’Œåˆ†å¸ƒå¼ç¼–ç¨‹åŠŸèƒ½.å¹¶å‘æ¨¡å—å¯ä»¥å•ç‹¬åŠ è½½,æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥é€‰æ‹©æ€§åŠ è½½éœ€è¦ä½¿ç”¨çš„å­æ¨¡å—.ç‹¬ç«‹çš„ç«¯å£æ˜ å°„å™¨ç²¾çµè¿›ç¨‹ä¹Ÿæ˜¯å®ç°çš„ä¸€éƒ¨åˆ†.<br />\nç³»ç»Ÿä¸­çš„è¿›ç¨‹æ˜¯é€šè¿‡Luaçš„åç¨‹æœºåˆ¶æ¥å®ç°çš„.ä¸€ä¸ªè¿›ç¨‹å…¶å®å°±æ˜¯ä¸€ä¸ªLuaåç¨‹,<br />\né€šè¿‡ yield æ¥æŒ‚èµ·ä¸€ä¸ªè¿›ç¨‹,é€šè¿‡ resume æ¥ç»§ç»­æ‰§è¡Œä¸€ä¸ªè¿›ç¨‹.</p>\n<p>è¿›ç¨‹çš„è°ƒåº¦æœºåˆ¶ä»ç„¶æ˜¯åŸºäºLuaä½¿ç”¨çš„ åä½œå¼å¤šçº¿ç¨‹æ¨¡å‹. è¿›ç¨‹è‡ªæ„¿æŒ‚èµ·è‡ªå·±,<br />\nä»è€Œè®©å…¶å®ƒçš„è¿›ç¨‹è·å¾—è¿è¡Œçš„æœºä¼š.ç„¶è€Œ,æŒ‚èµ·å’Œæ¢å¤è¿›ç¨‹è¢«éƒ¨åˆ†éšè—äºé«˜å±‚æœºåˆ¶<br />\nä¹‹ä¸‹;å½“ä¸€ä¸ªè¿›ç¨‹å»ç­‰å¾…æ¶ˆæ¯æŠµè¾¾çš„æ—¶å€™æŒ‚èµ·,è€Œåœ¨æ¶ˆæ¯æŠµè¾¾è¿›ç¨‹é‚®ç®±åå‡†å¤‡æ¢å¤.<br />\nä¸€ä¸ªç®€å•çš„ç¯ç½—å®¾(è½®è®­)è°ƒåº¦å™¨ç”¨æ¥æ¢å¤è¿›ç¨‹çš„æ‰§è¡Œ.</p>\n<p>ä»»ä½•ç±»å‹çš„Luaæ•°æ®,é™¤äº†å†…å­˜å¼•ç”¨å¤–,éƒ½å¯ä»¥é€šè¿‡æ¶ˆæ¯æ¥å‘é€.æ¶ˆæ¯å¯ä»¥æ˜¯å¸ƒå°”å€¼,<br />\næ•°å­—,å­—ç¬¦ä¸²,è¡¨æˆ–è€…å‡½æ•°,æˆ–è€…ä»–ä»¬çš„æ··åˆ.æ•°æ®è‡ªåŠ¨åœ¨å‘é€æ—¶è¢«åºåˆ—åŒ–,å¹¶åœ¨æ¥å—<br />\næ—¶ååºåˆ—åŒ–,æ‰€ä»¥çš„æ•°æ®éƒ½æ˜¯å€¼ä¼ é€’.</p>\n<p>èŠ‚ç‚¹é—´çš„åˆ†å¸ƒå¼è¿›ç¨‹é—´é€šè®¯æœºåˆ¶æ˜¯åŸºäºå¼‚æ­¥socketçš„.æ˜ å°„åˆ°ç½‘ç»œå±‚æ˜¯éé˜»å¡<br />\nsocketå’Œå®šæ—¶è½®è®­.è¿™æ˜¯å¦‚ä»Šå¤§éƒ¨åˆ†Luaæ¨¡å—é‡‡ç”¨çš„æ–¹æ³•,éé˜»å¡è¯­ä¹‰ä¹Ÿåº”è¯¥è¢«ç”¨<br />\nåœ¨ä¾‹å¦‚æ–‡ä»¶å’Œç®¡é“çš„IOæ“ä½œä¸Š.</p>\n<h3>ç”¨æ³•</h3> \n<p>ä¸€äº›ä¾‹å­æä¾›äº†ç³»ç»Ÿä¸è¦ç»„ä»¶çš„ç”¨æ³•,ä¾‹å¦‚,åˆ›å»ºè¿›ç¨‹,åˆ†å¸ƒå¼è¿›ç¨‹çš„æ¶ˆæ¯ä¼ é€’å’Œé”™è¯¯æ•è·.<br />\nåˆ›å»ºè¿›ç¨‹</p>\n<p>spawn()å‡½æ•°å¯ä»¥åˆ›å»ºè¿›ç¨‹.spawn()å‡½æ•°æ¥å—è‡³å°‘ä¸€ä¸ªå‚æ•°,è¯¥å‚æ•°æ ‡å¿—è¿›ç¨‹çš„å…¥å£å‡½æ•°.å…¶å®ƒé™„åŠ å‚æ•°åˆ™è¢«ç›´æ¥è½¬äº¤ç»™å…¥å£å‡½æ•°.<br />\nä¸‹é¢çš„ä¾‹å­ç¤ºèŒƒåˆ›å»ºä¸€ä¸ªè¿›ç¨‹.è¯¥è¿›ç¨‹è¾“å‡ºæŒ‡å®šæ¬¡æ•°çš„æ¶ˆæ¯:</p>\n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">require <span class=\"token string\">'concurrent'</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">hello_world</span><span class=\"token punctuation\">(</span>times<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> times <span class=\"token keyword\">do</span> <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello world'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">end</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'done'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>hello_world<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>è¾“å‡ºåº”è¯¥æ˜¯:</h4> \n<pre class=\"line-numbers language-none\"><code class=\"language-none\">hello world\nhello world\nhello world\ndone<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>é¦–å…ˆåŠ è½½ç³»ç»Ÿ:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">require <span class=\"token string\">'concurrent'</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h4>è¿›ç¨‹å…¥å£å‡½æ•°:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\"><span class=\"token keyword\">function</span> <span class=\"token function\">hello_world</span><span class=\"token punctuation\">(</span>times<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> times <span class=\"token keyword\">do</span> <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello world'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">end</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'done'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>hello_world<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h4>æœ€åè°ƒç”¨ç³»ç»Ÿæ— é™å¾ªç¯:</h4> \n<p>concurrent.loop()æ¶ˆæ¯äº¤äº’è¿›ç¨‹é€šè¿‡ send() å’Œ receive() å‡½æ•°æ¥äº¤æ¢æ¶ˆæ¯.åŒæ ·,self()å‡½æ•°ä¹Ÿè¢«ç”¨æ¥è·å–æœ¬è¿›ç¨‹ID.<br />\nä¸‹é¢çš„ç¨‹åºå®ç°äº†ä¸¤ä¸ªè¿›ç¨‹äº¤æ¢æ¶ˆæ¯ç„¶åç»ˆæ­¢:</p>\n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">require <span class=\"token string\">'concurrent'</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">pong</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">while</span> <span class=\"token keyword\">true</span> <span class=\"token keyword\">do</span>\n        <span class=\"token keyword\">local</span> msg <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token string\">'finished'</span> <span class=\"token keyword\">then</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">elseif</span> msg<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token string\">'ping'</span> <span class=\"token keyword\">then</span>\n            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong received ping'</span><span class=\"token punctuation\">)</span>\n            concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>from<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> body <span class=\"token operator\">=</span> <span class=\"token string\">'pong'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">end</span>\n    <span class=\"token keyword\">end</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong finished'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ping</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> pid<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> n <span class=\"token keyword\">do</span>\n        concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>pid<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n            from <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">self</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            body <span class=\"token operator\">=</span> <span class=\"token string\">'ping'</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">local</span> msg <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token string\">'pong'</span> <span class=\"token keyword\">then</span>\n            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ping received pong'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">end</span>\n    <span class=\"token keyword\">end</span>\n    concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>pid<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n        from <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">self</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        body <span class=\"token operator\">=</span> <span class=\"token string\">'finished'</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ping finished'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span>\n\npid <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>pong<span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>ping<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> pid<span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>è¾“å‡ºåº”è¯¥æ˜¯:</h4> \n<pre class=\"line-numbers language-none\"><code class=\"language-none\">pong received ping\nping received pong\npong received ping\nping received pong\npong received ping\nping received pong\npong finished\nping finished<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>åœ¨ pong è¿›ç¨‹è¢«åˆ›å»ºå, ping è¿›ç¨‹è·å¾—äº† pong è¿›ç¨‹çš„ PID:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">pid <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>pong<span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>ping<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> pid<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h4>ping è¿›ç¨‹å‘é€ä¸€ä¸ªæ¶ˆæ¯:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>pid<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n    from <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">self</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    body <span class=\"token operator\">=</span> <span class=\"token string\">'ping'</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>pong è¿›ç¨‹ç­‰å¾…æ¶ˆæ¯æŠµè¾¾,ç„¶åæŠŠæ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¿å­˜åˆ°ä¸€ä¸ªå˜é‡ä¸­:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\"><span class=\"token keyword\">local</span> msg <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h4>pong è¿›ç¨‹å›å¤:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>from<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> body <span class=\"token operator\">=</span> <span class=\"token string\">'pong'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>pong è¿›ç¨‹åœ¨æ¥æ”¶åˆ° ping è¿›ç¨‹å‘æ¥çš„ä¸€ä¸ªæç¤ºåç»ˆç»“.<br />\næ³¨å†Œè¿›ç¨‹åå¯ä»¥ç”¨è¿›ç¨‹åæ›¿ä»£PIDæ¥æŒ‡å®šæ¶ˆæ¯æ¥æ”¶æ–¹. register() å‡½æ•°å¯ä»¥ç”¨æ¥åœ¨æ³¨å†Œè¡¨<br />\n(è¯‘æ³¨:æŒ‡ç³»ç»Ÿçš„åå­—å¯¹åº”è¡¨,è€Œä¸æ˜¯Windowsçš„æ³¨å†Œè¡¨,é¡ºä¾¿é„™è§†ä¸€ä¸‹Windows. ğŸ˜ƒ )</p>\n<h4>åˆ›å»ºä¸€ä¸ªè¿›ç¨‹çš„åå­—:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">require <span class=\"token string\">'concurrent'</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">pong</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">while</span> <span class=\"token keyword\">true</span> <span class=\"token keyword\">do</span>\n        <span class=\"token keyword\">local</span> msg <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token string\">'finished'</span> <span class=\"token keyword\">then</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">elseif</span> msg<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token string\">'ping'</span> <span class=\"token keyword\">then</span>\n            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong received ping'</span><span class=\"token punctuation\">)</span>\n            concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>from<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> body <span class=\"token operator\">=</span> <span class=\"token string\">'pong'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">end</span>\n    <span class=\"token keyword\">end</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong finished'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ping</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> n <span class=\"token keyword\">do</span>\n        concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n            from <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">self</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            body <span class=\"token operator\">=</span> <span class=\"token string\">'ping'</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">local</span> msg <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token string\">'pong'</span> <span class=\"token keyword\">then</span>\n            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ping received pong'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">end</span>\n    <span class=\"token keyword\">end</span>\n    concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n        from <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">self</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        body <span class=\"token operator\">=</span> <span class=\"token string\">'finished'</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ping finished'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span>\n\npid <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>pong<span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong'</span><span class=\"token punctuation\">,</span> pid<span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>ping<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>ç›¸å¯¹å‰ä¸€ä¸ªç‰ˆæœ¬çš„æ”¹å˜å°±æ˜¯ ping è¿›ç¨‹å‘é€æ¶ˆæ¯çš„åœ°æ–¹:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n    from <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">self</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    body <span class=\"token operator\">=</span> <span class=\"token string\">'ping'</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>å’Œ:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n    from <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">self</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    body <span class=\"token operator\">=</span> <span class=\"token string\">'finished'</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>ä»¥åŠç°åœ¨ pong è¿›ç¨‹æ³¨å†Œäº†å®ƒçš„åå­—:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong'</span><span class=\"token punctuation\">,</span> pid<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>å› æ­¤ ping è¿›ç¨‹ä¸éœ€è¦çŸ¥é“ pong è¿›ç¨‹çš„ PID äº†.<br />\nåˆ†å¸ƒå¼æ¶ˆæ¯ä¼ é€’ä¸åŒèŠ‚ç‚¹ä¸Šçš„è¿›ç¨‹ä»ç„¶å¯ä»¥ä½¿ç”¨åŒæ ·çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶.è¿œç¨‹è¿›ç¨‹é€šè¿‡ PIDæˆ–è¿›ç¨‹å åŠ ä¸Š<br />\nèŠ‚ç‚¹åæ¥æŒ‡å®š.å…ˆå‰çš„ä¾‹å­å¯ä»¥æ”¹é€ æˆä¸¤ä¸ªç¨‹åº,åˆ†åˆ«æ˜¯ä¸€ä¸ªç‹¬ç«‹è¿›ç¨‹.</p>\n<h4>pong è¿›ç¨‹çš„ä»£ç å¦‚ä¸‹:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">require <span class=\"token string\">'concurrent'</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">pong</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">while</span> <span class=\"token keyword\">true</span> <span class=\"token keyword\">do</span>\n        <span class=\"token keyword\">local</span> msg <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token string\">'finished'</span> <span class=\"token keyword\">then</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">elseif</span> msg<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token string\">'ping'</span> <span class=\"token keyword\">then</span>\n            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong received ping'</span><span class=\"token punctuation\">)</span>\n            concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>from<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> body <span class=\"token operator\">=</span> <span class=\"token string\">'pong'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">end</span>\n    <span class=\"token keyword\">end</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong finished'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong@gaia'</span><span class=\"token punctuation\">)</span>\npid <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>pong<span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong'</span><span class=\"token punctuation\">,</span> pid<span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">shutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>ping è¿›ç¨‹çš„ä»£ç å¦‚ä¸‹:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">require <span class=\"token string\">'concurrent'</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">ping</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> n <span class=\"token keyword\">do</span>\n        concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token string\">'pong'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pong@gaia'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n            from <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">self</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">node</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n            body <span class=\"token operator\">=</span> <span class=\"token string\">'ping'</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">local</span> msg <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token string\">'pong'</span> <span class=\"token keyword\">then</span>\n            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ping received pong'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">end</span>\n    <span class=\"token keyword\">end</span>\n    concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token string\">'pong'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pong@gaia'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n        from <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">self</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">node</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n        body <span class=\"token operator\">=</span> <span class=\"token string\">'finished'</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ping finished'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>ping<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ping@selene'</span><span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">shutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>(è¯‘æ³¨: å¦‚æœä½ æƒ³è‡ªå·±è·‘è¿™ä¸ªä¾‹å­éœ€è¦ä¿®æ”¹ä¸Šé¢çš„èŠ‚ç‚¹åååŠéƒ¨åˆ†çš„æœºå™¨åéƒ¨åˆ†,ä½¿ä¹‹å’Œä½ çš„ç½‘ç»œç¯å¢ƒç›¸åŒ¹é….)pong è¿›ç¨‹çš„è¾“å‡ºåº”è¯¥æ˜¯:</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">pong received ping\npong received ping\npong received ping\npong finished<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>ping è¿›ç¨‹çš„è¾“å‡ºåº”è¯¥æ˜¯:</h4> \n<pre class=\"line-numbers language-none\"><code class=\"language-none\">ping received pong\nping received pong\nping received pong\nping finished<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>åœ¨è¿™ä¸ªä¾‹å­é‡Œ,è¿è¡Œæ—¶ç³»ç»Ÿè¿è¡Œåœ¨åˆ†å¸ƒå¼æ¨¡å¼.ä¸ºäº†çœ‹åˆ°ç»“æœ,ç«¯å£æ˜ å°„å™¨å¿…é¡»å…ˆè¿è¡Œ:</h4> \n<p>$ clpmd</p>\n<h4>åˆå§‹åŒ– pong è¿›ç¨‹æ‰€åœ¨èŠ‚ç‚¹çš„ä»£ç :</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong@gaia'</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h4>åˆå§‹åŒ– ping è¿›ç¨‹æ‰€åœ¨èŠ‚ç‚¹çš„ä»£ç :</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ping@selene'</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h4>ä¸Šé¢ä¸¤å¥ä»£ç æ³¨å†ŒèŠ‚ç‚¹åˆ°ç«¯å£æ˜ å°„å™¨.å»æ³¨å†Œæ˜¯é€šè¿‡:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">shutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h4>è¿™ä¸ªä¾‹å­çš„å”¯ä¸€æ”¹åŠ¨æ˜¯æ¶ˆæ¯å‘é€çš„ç›®çš„åœ°.node()å‡½æ•°ä¼šè¿”å›è°ƒç”¨è¿›ç¨‹ååœ¨èŠ‚ç‚¹çš„åå­—:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token string\">'pong'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pong@gaia'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n    from <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">self</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">node</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    body <span class=\"token operator\">=</span> <span class=\"token string\">'ping'</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>æ¥ä¸‹æ¥:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token string\">'pong'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pong@gaia'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n    from <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">self</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">node</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    body <span class=\"token operator\">=</span> <span class=\"token string\">'finished'</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>é”™è¯¯å¤„ç†ä¸€ä¸ªæ•è·è¿›ç¨‹é—´é”™è¯¯çš„æ–¹æ³•æ˜¯è¿æ¥è¿›ç¨‹.ä¸¤ä¸ªè¿›ç¨‹è¢«ç»‘å®šåˆ°ä¸€èµ·,ä¸€ä¸ªå¼‚å¸¸ç»ˆæ­¢çš„åå¦ä¸€ä¸ªä¹Ÿä¼šç»ˆæ­¢.link()å‡½æ•°ç”¨æ¥ç»‘å®šè¿›ç¨‹:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">require <span class=\"token string\">'concurrent'</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">ping</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> pid<span class=\"token punctuation\">)</span>\n    concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">link</span><span class=\"token punctuation\">(</span>pid<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> n <span class=\"token keyword\">do</span>\n        concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>pid<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n            from <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">self</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            body <span class=\"token operator\">=</span> <span class=\"token string\">'ping'</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">local</span> msg <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token string\">'pong'</span> <span class=\"token keyword\">then</span>\n            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ping received pong'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">end</span>\n    <span class=\"token keyword\">end</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ping finished'</span><span class=\"token punctuation\">)</span>\n    concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'finished'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">pong</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">while</span> <span class=\"token keyword\">true</span> <span class=\"token keyword\">do</span>\n        <span class=\"token keyword\">local</span> msg <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token string\">'ping'</span> <span class=\"token keyword\">then</span>\n            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong received ping'</span><span class=\"token punctuation\">)</span>\n            concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>from<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> body <span class=\"token operator\">=</span> <span class=\"token string\">'pong'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">end</span>\n    <span class=\"token keyword\">end</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong finished'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span>\npid <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>pong<span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>ping<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> pid<span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>è¾“å‡ºåº”è¯¥æ˜¯:</h4> \n<pre class=\"line-numbers language-none\"><code class=\"language-none\">pong received ping\nping received pong\npong received ping\nping received pong\npong received ping\nping received pong\npong finished <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>â€“ è¯‘æ³¨:è¿™é‡Œåº”è¯¥æ˜¯: ping fininshedpong è¿›ç¨‹æ°¸è¿œä¸ä¼šè¿è¡Œåˆ°æœ€åä¸€è¡Œ,å› ä¸ºä»–åœ¨æ¥æ”¶åˆ° ping è¿›ç¨‹é€€å‡ºä¿¡å·çš„æ—¶å€™ä¼šç»ˆæ­¢.</p>\n<h4>è¿æ¥è¿›ç¨‹çš„ä»£ç å¦‚ä¸‹:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">link</span><span class=\"token punctuation\">(</span>pid<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h4>ä¹Ÿå¯ä»¥æ•è·è¿›ç¨‹ç»ˆæ­¢å¯¼è‡´çš„exitä¿¡å·.è¢«æ•è·çš„exitä¿¡å·ä¼šè½¬æ¢æˆä¸€ä¸ªç‰¹æ®Šçš„æ¶ˆæ¯:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">require <span class=\"token string\">'concurrent'</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">setoption</span><span class=\"token punctuation\">(</span><span class=\"token string\">'trapexit'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">pong</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">while</span> <span class=\"token keyword\">true</span> <span class=\"token keyword\">do</span>\n        <span class=\"token keyword\">local</span> msg <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg<span class=\"token punctuation\">.</span>signal <span class=\"token operator\">==</span> <span class=\"token string\">'EXIT'</span> <span class=\"token keyword\">then</span>\n            <span class=\"token keyword\">break</span>\n        <span class=\"token keyword\">elseif</span> msg<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token string\">'ping'</span> <span class=\"token keyword\">then</span>\n            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong received ping'</span><span class=\"token punctuation\">)</span>\n            concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>from<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> body <span class=\"token operator\">=</span> <span class=\"token string\">'pong'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">end</span>\n    <span class=\"token keyword\">end</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong finished'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ping</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> pid<span class=\"token punctuation\">)</span>\n    concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">link</span><span class=\"token punctuation\">(</span>pid<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> n <span class=\"token keyword\">do</span>\n        concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>pid<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n            from <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">self</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            body <span class=\"token operator\">=</span> <span class=\"token string\">'ping'</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">local</span> msg <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> msg<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token string\">'pong'</span> <span class=\"token keyword\">then</span>\n            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ping received pong'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">end</span>\n    <span class=\"token keyword\">end</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ping finished'</span><span class=\"token punctuation\">)</span>\n    concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'finished'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span>\n\npid <span class=\"token operator\">=</span> concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>pong<span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span>ping<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> pid<span class=\"token punctuation\">)</span>\nconcurrent<span class=\"token punctuation\">.</span><span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>è¾“å‡ºåº”è¯¥æ˜¯:</h4> \n<pre class=\"line-numbers language-none\"><code class=\"language-none\">pong received ping\nping received pong\npong received ping\nping received pong\npong received ping\nping received pong\npong finished<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4>ping finishedå¯ä»¥é€šè¿‡ setoption() å‡½æ•°æ¥è®¾ç½®è¿›ç¨‹é“¾æ¥çš„é€‰é¡¹,è¿™é‡Œæ˜¯ trapexit é€‰é¡¹:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\">concurrent<span class=\"token punctuation\">.</span><span class=\"token function\">setoption</span><span class=\"token punctuation\">(</span><span class=\"token string\">'trapexit'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h4>pong è¿›ç¨‹ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªé€€å‡ºæ¶ˆæ¯:</h4> \n<pre class=\"line-numbers language-lua\" data-language=\"lua\"><code class=\"language-lua\"><span class=\"token keyword\">if</span> msg<span class=\"token punctuation\">.</span>signal <span class=\"token operator\">==</span> <span class=\"token string\">'EXIT'</span> <span class=\"token keyword\">then</span>\n    <span class=\"token keyword\">break</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>åŸºäºæç¤ºæ¶ˆæ¯çš„monitor, ä¹Ÿå¯ä»¥ç”¨æ¥å¤„ç†é”™è¯¯.</p>\n<p>åŸæ–‡è¿æ¥ï¼š<br />\n<a href=\"http://floss.qiniucdn.com/data/20110831112702/index.html\">http://floss.qiniucdn.com/data/20110831112702/index.html</a></p>\n","text":"ä»‹ç» ConcurrentLua æ˜¯ä¸€ä¸ªæ— å…±äº«å¼‚æ­¥æ¶ˆæ¯ä¼ é€’æ¨¡å‹çš„å®ç°.è¯¥æ¨¡å‹æ¥è‡ªErlangè¯­è¨€. å¥¹æ”¹ç¼–äº†Erlangçš„å¹¶å‘å…ƒç´ å¹¶æ•´åˆè¿›Luaé‡Œ. ConcurrentLuaçš„ä¸€ä¸ªæ ¸å¿ƒå…ƒç´ æ˜¯ process(è¿›ç¨‹).ä¸€ä¸ªè¿›ç¨‹æ˜¯ä¸€ä¸ªè½»é‡çº§ è™šæ‹Ÿæœº çº¿ç¨‹,æ‰®æ¼”å’Œæ“ä½œç³»ç»Ÿçš„è¿›ç¨‹åŒæ ·çš„...","link":"","photos":[],"count_time":{"symbolsCount":"9.3k","symbolsTime":"8 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\"><span class=\"toc-text\">ä»‹ç»</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\"><span class=\"toc-text\">å®ç°</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\"><span class=\"toc-text\">ç”¨æ³•</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">è¾“å‡ºåº”è¯¥æ˜¯:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">é¦–å…ˆåŠ è½½ç³»ç»Ÿ:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">è¿›ç¨‹å…¥å£å‡½æ•°:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">æœ€åè°ƒç”¨ç³»ç»Ÿæ— é™å¾ªç¯:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">è¾“å‡ºåº”è¯¥æ˜¯:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">åœ¨ pong è¿›ç¨‹è¢«åˆ›å»ºå, ping è¿›ç¨‹è·å¾—äº† pong è¿›ç¨‹çš„ PID:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">ping è¿›ç¨‹å‘é€ä¸€ä¸ªæ¶ˆæ¯:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">pong è¿›ç¨‹ç­‰å¾…æ¶ˆæ¯æŠµè¾¾,ç„¶åæŠŠæ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¿å­˜åˆ°ä¸€ä¸ªå˜é‡ä¸­:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">pong è¿›ç¨‹å›å¤:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">åˆ›å»ºä¸€ä¸ªè¿›ç¨‹çš„åå­—:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">ç›¸å¯¹å‰ä¸€ä¸ªç‰ˆæœ¬çš„æ”¹å˜å°±æ˜¯ ping è¿›ç¨‹å‘é€æ¶ˆæ¯çš„åœ°æ–¹:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">å’Œ:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">ä»¥åŠç°åœ¨ pong è¿›ç¨‹æ³¨å†Œäº†å®ƒçš„åå­—:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">pong è¿›ç¨‹çš„ä»£ç å¦‚ä¸‹:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">ping è¿›ç¨‹çš„ä»£ç å¦‚ä¸‹:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">ping è¿›ç¨‹çš„è¾“å‡ºåº”è¯¥æ˜¯:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">åœ¨è¿™ä¸ªä¾‹å­é‡Œ,è¿è¡Œæ—¶ç³»ç»Ÿè¿è¡Œåœ¨åˆ†å¸ƒå¼æ¨¡å¼.ä¸ºäº†çœ‹åˆ°ç»“æœ,ç«¯å£æ˜ å°„å™¨å¿…é¡»å…ˆè¿è¡Œ:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">åˆå§‹åŒ– pong è¿›ç¨‹æ‰€åœ¨èŠ‚ç‚¹çš„ä»£ç :</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">åˆå§‹åŒ– ping è¿›ç¨‹æ‰€åœ¨èŠ‚ç‚¹çš„ä»£ç :</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">ä¸Šé¢ä¸¤å¥ä»£ç æ³¨å†ŒèŠ‚ç‚¹åˆ°ç«¯å£æ˜ å°„å™¨.å»æ³¨å†Œæ˜¯é€šè¿‡:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">è¿™ä¸ªä¾‹å­çš„å”¯ä¸€æ”¹åŠ¨æ˜¯æ¶ˆæ¯å‘é€çš„ç›®çš„åœ°.node()å‡½æ•°ä¼šè¿”å›è°ƒç”¨è¿›ç¨‹ååœ¨èŠ‚ç‚¹çš„åå­—:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">æ¥ä¸‹æ¥:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">é”™è¯¯å¤„ç†ä¸€ä¸ªæ•è·è¿›ç¨‹é—´é”™è¯¯çš„æ–¹æ³•æ˜¯è¿æ¥è¿›ç¨‹.ä¸¤ä¸ªè¿›ç¨‹è¢«ç»‘å®šåˆ°ä¸€èµ·,ä¸€ä¸ªå¼‚å¸¸ç»ˆæ­¢çš„åå¦ä¸€ä¸ªä¹Ÿä¼šç»ˆæ­¢.link()å‡½æ•°ç”¨æ¥ç»‘å®šè¿›ç¨‹:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">è¾“å‡ºåº”è¯¥æ˜¯:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">è¿æ¥è¿›ç¨‹çš„ä»£ç å¦‚ä¸‹:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">ä¹Ÿå¯ä»¥æ•è·è¿›ç¨‹ç»ˆæ­¢å¯¼è‡´çš„exitä¿¡å·.è¢«æ•è·çš„exitä¿¡å·ä¼šè½¬æ¢æˆä¸€ä¸ªç‰¹æ®Šçš„æ¶ˆæ¯:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">è¾“å‡ºåº”è¯¥æ˜¯:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">ping finishedå¯ä»¥é€šè¿‡ setoption() å‡½æ•°æ¥è®¾ç½®è¿›ç¨‹é“¾æ¥çš„é€‰é¡¹,è¿™é‡Œæ˜¯ trapexit é€‰é¡¹:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\"><span class=\"toc-text\">pong è¿›ç¨‹ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªé€€å‡ºæ¶ˆæ¯:</span></a></li></ol></li></ol>","author":{"name":"å®‰å…¨ä¹¦","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"ã€Šå¢¨å®ˆä¹‹é“-WebæœåŠ¡å®‰å…¨æ¶æ„ä¸å®è·µã€‹","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"NGINXæ‰§è¡Œé˜¶æ®µæ¦‚å¿µ","uid":"9430d64b8d40e629bac43d0184c0f2ac","slug":"old_topic/2016-09-17-214","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.167Z","comments":true,"path":"api/articles/old_topic/2016-09-17-214.json","keywords":"AIGC,LLM,ç³–æœAIGCå®éªŒå®¤","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"å›¾ç‰‡ï¼š1079283195.png åŸæ–‡è¿æ¥ï¼šhttp://leandre.cn/web/79.html ","link":"","photos":[],"count_time":{"symbolsCount":54,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"å®‰å…¨ä¹¦","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"ã€Šå¢¨å®ˆä¹‹é“-WebæœåŠ¡å®‰å…¨æ¶æ„ä¸å®è·µã€‹","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"LORæ¡†æ¶è®¾è®¡è‰å›¾","uid":"ad959d61ae3ba0f4919be1ad782c86c1","slug":"old_topic/2016-09-17-216","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.229Z","comments":true,"path":"api/articles/old_topic/2016-09-17-216.json","keywords":"AIGC,LLM,ç³–æœAIGCå®éªŒå®¤","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"ä¸‹é¢å›¾æ˜¯LORçš„æ¡†æ¶çš„è®¾è®¡è‰å›¾ï¼Œæ˜¯ä½œè€…é¥­æ€»å½“æ—¶ä¸ºå®ç°LORç”»çš„ï¼Œæä¾›ç»™å¤§å®¶å‚è€ƒï¼š æƒ³æŠŠroute,router,layeré‚£éƒ¨åˆ†çš„è¨­è¨ˆç•«æ¸…æ¥šä¸€äº›ï¼Œé¥­ç¸½æä¾›äº†ä¸€ä¸‹ç¾é€™å€‹åœ¨ç·šç•«åœ–çš„å·¥å…·ï¼š https://www.processon.com/ å›¾ç‰‡ï¼š1.jpg å›¾ç‰‡ï¼š2.jpg å›¾ç‰‡ï¼š...","link":"","photos":[],"count_time":{"symbolsCount":177,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"å®‰å…¨ä¹¦","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"ã€Šå¢¨å®ˆä¹‹é“-WebæœåŠ¡å®‰å…¨æ¶æ„ä¸å®è·µã€‹","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}