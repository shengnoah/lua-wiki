{"title":"Tail Call åˆ°åº•æœ‰å•¥ç”¨ï¼Ÿ","uid":"d50433282a5b8a29764977173d70c1a2","slug":"old_topic/2016-09-17-279","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.203Z","comments":true,"path":"api/articles/old_topic/2016-09-17-279.json","keywords":"AIGC,LLM,ç³–æœAIGCå®éªŒå®¤","cover":[],"content":"<p>ä½œè€…ï¼šms2008</p>\n<p>æ•´ç†ç¼–è¾‘ï¼šç³–æœ</p>\n<p>åœ¨èŠä»Šå¤©è¿™ä¸ªè¯é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä»€ä¹ˆå« tail callã€‚å…ˆæ¥çœ‹ä¸‹ï¼Œlua ç¨‹åºè®¾è®¡æ˜¯æ€ä¹ˆå®šä¹‰çš„ï¼š</p>\n<p>å°¾è°ƒç”¨æ˜¯ä¸€ç§ç±»ä¼¼åœ¨å‡½æ•°ç»“å°¾çš„ goto è°ƒç”¨ï¼Œå½“å‡½æ•°æœ€åä¸€ä¸ªåŠ¨ä½œæ˜¯è°ƒç”¨å¦å¤–ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ç§°è¿™ç§è°ƒç”¨å°¾è°ƒç”¨ã€‚ä¾‹å¦‚ï¼š</p>\n<p>function f(x)<br>\nreturn g(x)<br>\nend</p>\n<p>g çš„è°ƒç”¨æ˜¯å°¾è°ƒç”¨ã€‚</p>\n<p>ä¾‹å­ä¸­ f è°ƒç”¨ g åä¸ä¼šå†åšä»»ä½•äº‹æƒ…ï¼Œè¿™ç§æƒ…å†µä¸‹å½“è¢«è°ƒç”¨å‡½æ•° g ç»“æŸæ—¶ç¨‹åºä¸éœ€è¦è¿”å›åˆ°è°ƒç”¨è€… fï¼›æ‰€ä»¥å°¾è°ƒç”¨ä¹‹åç¨‹åºä¸éœ€è¦åœ¨æ ˆä¸­ä¿ç•™å…³äºè°ƒç”¨è€…çš„ä»»ä½•ä¿¡æ¯ã€‚ä¸€äº›ç¼–è¯‘å™¨æ¯”å¦‚ Lua è§£é‡Šå™¨åˆ©ç”¨è¿™ç§ç‰¹æ€§åœ¨å¤„ç†å°¾è°ƒç”¨æ—¶ä¸ä½¿ç”¨é¢å¤–çš„æ ˆï¼Œæˆ‘ä»¬ç§°è¿™ç§è¯­è¨€æ”¯æŒæ­£ç¡®çš„å°¾è°ƒç”¨ã€‚</p>\n<p>ç”±äºå°¾è°ƒç”¨ä¸éœ€è¦ä½¿ç”¨æ ˆç©ºé—´ï¼Œé‚£ä¹ˆå°¾è°ƒç”¨é€’å½’çš„å±‚æ¬¡å¯ä»¥æ— é™åˆ¶çš„ã€‚</p>\n<p>æ˜¯ä¸æ˜¯æœ‰äº›è¿·ç³Šï¼Ÿé‚£æˆ‘ç»§ç»­æ¥è§£é‡Šä¸‹ã€Œè¯¦æƒ…å¯ä»¥å‚è€ƒå»–é›ªå³°çš„blogã€ï¼š</p>\n<p>æˆ‘ä»¬çŸ¥é“åœ¨å‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥è°ƒç”¨å…¶ä»–å‡½æ•°ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°åœ¨å†…éƒ¨è°ƒç”¨è‡ªèº«æœ¬èº«ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯é€’å½’å‡½æ•°ã€‚é€’å½’å‡½æ•°çš„ä¼˜ç‚¹æ˜¯å®šä¹‰ç®€å•ï¼Œé€»è¾‘æ¸…æ™°ã€‚ä½†æ˜¯ä½¿ç”¨é€’å½’å‡½æ•°æœ‰ä¸ªè¦å‘½çš„ç¼ºç‚¹å°±æ˜¯éœ€è¦æ³¨æ„é˜²æ­¢æ ˆæº¢å‡ºï¼</p>\n<p>åœ¨è®¡ç®—æœºä¸­ï¼Œå‡½æ•°è°ƒç”¨æ˜¯é€šè¿‡æ ˆï¼ˆstackï¼‰è¿™ç§æ•°æ®ç»“æ„å®ç°çš„ï¼Œæ¯å½“è¿›å…¥ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œæ ˆå°±ä¼šåŠ ä¸€å±‚æ ˆå¸§ï¼Œæ¯å½“å‡½æ•°è¿”å›ï¼Œæ ˆå°±ä¼šå‡ä¸€å±‚æ ˆå¸§ã€‚ç”±äºæ ˆçš„å¤§å°ä¸æ˜¯æ— é™çš„ï¼Œæ‰€ä»¥ï¼Œé€’å½’è°ƒç”¨çš„æ¬¡æ•°è¿‡å¤šï¼Œä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚å¯ä»¥è¯•è¯•è¿™ä¸ªæ±‚é˜¶ä¹˜çš„ç”¨ä¾‹ï¼š</p>\n<p><img src=\"http://mmbiz.qpic.cn/mmbiz_png/sOId2kGKNxhdFrfmk2Uo0sz8FdpYZj3d4S3HkiblePAqzcsrRpuH29O6Zn4Z8vsEIY4ickhHwOzrQIDVAMsCuDHA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1\" alt=\"å›¾ç‰‡\"></p>\n<p>è§£å†³é€’å½’è°ƒç”¨æ ˆæº¢å‡ºçš„æ–¹æ³•æ˜¯é€šè¿‡å°¾é€’å½’ä¼˜åŒ–ã€‚å°¾é€’å½’æ˜¯æŒ‡ï¼Œåœ¨å‡½æ•°è¿”å›çš„æ—¶å€™ï¼Œè°ƒç”¨è‡ªèº«æœ¬èº«ï¼Œå¹¶ä¸”ï¼Œreturn è¯­å¥ä¸èƒ½åŒ…å«è¡¨è¾¾å¼ã€‚è¿™æ ·ï¼Œç¼–è¯‘å™¨æˆ–è€…è§£é‡Šå™¨å°±å¯ä»¥æŠŠå°¾é€’å½’åšä¼˜åŒ–ï¼Œä½¿é€’å½’æœ¬èº«æ— è®ºè°ƒç”¨å¤šå°‘æ¬¡ï¼Œéƒ½åªå ç”¨ä¸€ä¸ªæ ˆå¸§ï¼Œä¸ä¼šå‡ºç°æ ˆæº¢å‡ºçš„æƒ…å†µã€‚</p>\n<p>ä¸Šé¢çš„ fact(n) å‡½æ•°ç”±äº return n * fact(n - 1) å¼•å…¥äº†ä¹˜æ³•è¡¨è¾¾å¼ï¼Œæ‰€ä»¥å°±ä¸æ˜¯å°¾é€’å½’äº†ã€‚è¦æ”¹æˆå°¾é€’å½’æ–¹å¼ï¼Œéœ€è¦å¤šä¸€ç‚¹ä»£ç ï¼Œä¸»è¦æ˜¯è¦æŠŠæ¯ä¸€æ­¥çš„ä¹˜ç§¯ä¼ å…¥åˆ°é€’å½’å‡½æ•°ä¸­ï¼š</p>\n<p><img src=\"http://mmbiz.qpic.cn/mmbiz_png/sOId2kGKNxhdFrfmk2Uo0sz8FdpYZj3dDZ3u1yYLnBaRtjGnQnwFFbA7M59aWyFibGKYR8hroS0FhkI9nQJjdyQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1\" alt=\"å›¾ç‰‡\"></p>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œreturn fact_iter(n-1, now<em>n) ä»…è¿”å›é€’å½’å‡½æ•°æœ¬èº«ï¼Œn-1 å’Œ now</em>n åœ¨å‡½æ•°è°ƒç”¨å‰å°±ä¼šè¢«è®¡ç®—ï¼Œä¸å½±å“å‡½æ•°è°ƒç”¨ã€‚</p>\n<p>ä»»ä½•é€’å½’å‡½æ•°éƒ½å­˜åœ¨æ ˆæº¢å‡ºçš„é—®é¢˜ã€‚å°¾é€’å½’è°ƒç”¨æ—¶ï¼Œå¦‚æœåšäº†ä¼˜åŒ–ï¼Œæ ˆä¸ä¼šå¢é•¿ï¼Œå› æ­¤ï¼Œæ— è®ºå¤šå°‘æ¬¡è°ƒç”¨ä¹Ÿä¸ä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚è¿™ä¹Ÿæ­£æ˜¯ tail call çš„å¨åŠ›æ‰€åœ¨ã€‚</p>\n<p>é—æ†¾çš„æ˜¯ï¼Œå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€æ²¡æœ‰é’ˆå¯¹å°¾é€’å½’åšä¼˜åŒ–ï¼Œå½“ç„¶ lua é™¤å¤– ğŸ˜ƒ</p>\n","text":"ä½œè€…ï¼šms2008 æ•´ç†ç¼–è¾‘ï¼šç³–æœ åœ¨èŠä»Šå¤©è¿™ä¸ªè¯é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä»€ä¹ˆå« tail callã€‚å…ˆæ¥çœ‹ä¸‹ï¼Œlua ç¨‹åºè®¾è®¡æ˜¯æ€ä¹ˆå®šä¹‰çš„ï¼š å°¾è°ƒç”¨æ˜¯ä¸€ç§ç±»ä¼¼åœ¨å‡½æ•°ç»“å°¾çš„ goto è°ƒç”¨ï¼Œå½“å‡½æ•°æœ€åä¸€ä¸ªåŠ¨ä½œæ˜¯è°ƒç”¨å¦å¤–ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ç§°è¿™ç§è°ƒç”¨å°¾è°ƒç”¨ã€‚ä¾‹å¦‚ï¼š function f(x...","link":"","photos":[],"count_time":{"symbolsCount":979,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"toc":"","author":{"name":"å®‰å…¨ä¹¦","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"ã€Šå¢¨å®ˆä¹‹é“-WebæœåŠ¡å®‰å…¨æ¶æ„ä¸å®è·µã€‹","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Threadingçš„Timeræ˜¯å¦å¯ä»¥è¢«waitå’Œcommunicateé˜»å¡","uid":"1f0e7f34ab02983eb011a2f068cfda64","slug":"old_topic/2016-09-17-268","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.193Z","comments":true,"path":"api/articles/old_topic/2016-09-17-268.json","keywords":"AIGC,LLM,ç³–æœAIGCå®éªŒå®¤","cover":null,"text":"ä½œè€…ï¼šç³–æœ æµ‹è¯•çš„å†…å®¹æ˜¯å°†Timerçš„ä½¿ç”¨å’ŒPopençš„ä½¿ç”¨æ··åˆåœ¨ä¸€èµ·ï¼Œæµ‹è¯•å½“wait()å’Œcommunicate()è¢«è°ƒç”¨æ—¶ï¼Œæ˜¯å¦ä¼šé˜»å¡ä¸»è¿›ç¨‹çš„Timerã€‚ æ‰¾åˆ°Timeråœ¨Python2.7é‡Œçš„æºç ä½ç½®ï¼š 12345678910111213141516171819202122...","link":"","photos":[],"count_time":{"symbolsCount":"20k","symbolsTime":"18 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"å®‰å…¨ä¹¦","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"ã€Šå¢¨å®ˆä¹‹é“-WebæœåŠ¡å®‰å…¨æ¶æ„ä¸å®è·µã€‹","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"OpenResty ä¸­çš„è¿æ¥æ± ","uid":"34fb78ae79ed28901f3aef22da440208","slug":"old_topic/2016-09-17-280","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.230Z","comments":true,"path":"api/articles/old_topic/2016-09-17-280.json","keywords":"AIGC,LLM,ç³–æœAIGCå®éªŒå®¤","cover":null,"text":"OpenResty ä¸­çš„è¿æ¥æ±  ä½œè€…ï¼šms2008 ç¼–è¾‘æ•´ç†ï¼šç³–æœ æ³¨ï¼šset_keepalive å’Œ close äº’æ–¥(ä¸€ä¸ª socket å¯¹è±¡ä¸èƒ½æ‰§è¡Œå¤šæ¬¡ setkeepalive æ“ä½œï¼Œä¼šæŠ¥ï¼šè¿æ¥å·²å…³é—­) è¿æ¥æ± çš„å¤§å°æ˜¯å¯¹æ¯ä¸€ä¸ª nginx worker è€Œè¨€çš„ã€‚å¦‚æœæœ‰ N...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"å®‰å…¨ä¹¦","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"ã€Šå¢¨å®ˆä¹‹é“-WebæœåŠ¡å®‰å…¨æ¶æ„ä¸å®è·µã€‹","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}