{"title":"Vanilla工程如何设置静态文件夹static","uid":"56f67290590d9d72dc1ccb87fe155f52","slug":"old_topic/2016-09-17-190","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.155Z","comments":true,"path":"api/articles/old_topic/2016-09-17-190.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<p>修改/config/nginx.conf</p>\n<p>加入路由设置<br />\n[code]<br />\nlocation /static/ {<br />\nalias static/;<br />\n}<br />\n[/code]</p>\n<p>完整的配置文件，如下：<br />\n[code]<br />\npid tmp/-nginx.pid;</p>\n<h1 id=\"this-number-should-be-at-maxium-the-number-of-cpu-on-the-server\"><a class=\"markdownIt-Anchor\" href=\"#this-number-should-be-at-maxium-the-number-of-cpu-on-the-server\"></a> This number should be at maxium the number of CPU on the server</h1>\n<p>worker_processes 4;</p>\n<p>events {<br />\n# Number of connections per worker<br />\nworker_connections 4096;<br />\n}</p>\n<p>http {<br />\n# use sendfile<br />\nsendfile on;</p>\n<pre><code># Va initialization\n&#123;&#123;LUA_PACKAGE_PATH&#125;&#125;\n&#123;&#123;LUA_PACKAGE_CPATH&#125;&#125;\n&#123;&#123;LUA_CODE_CACHE&#125;&#125;\n&#123;&#123;LUA_SHARED_DICT&#125;&#125;\n&#123;&#123;INIT_BY_LUA&#125;&#125;\n&#123;&#123;INIT_BY_LUA_FILE&#125;&#125;\n&#123;&#123;VANILLA_WAF&#125;&#125;\n&#123;&#123;ACCESS_BY_LUA&#125;&#125;\n&#123;&#123;ACCESS_BY_LUA_FILE&#125;&#125;\n\nserver &#123;\n    # List port\n    listen &#123;&#123;PORT&#125;&#125;;\n    set $template_root '';\n\n    # Access log with buffer, or disable it completetely if unneeded\n    access_log logs/&#123;&#123;VA_ENV&#125;&#125;-access.log combined buffer=16k;\n    # access_log off;\n\n    # Error log\n    error_log logs/&#123;&#123;VA_ENV&#125;&#125;-error.log;\n\n\n    # Va runtime\n    &#123;&#123;CONTENT_BY_LUA_FILE&#125;&#125;\n\n    // 在此处加入静态链接的设置\n    location /static/ &#123;\n        alias static/;\n    &#125;\n&#125;\n</code></pre>\n<p>}<br />\n[/code]</p>\n","text":"修改/config/nginx.conf 加入路由设置 [code] location /static/ { alias static/; } [/code] 完整的配置文件，如下： [code] pid tmp/-nginx.pid; This number should be...","link":"","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#this-number-should-be-at-maxium-the-number-of-cpu-on-the-server\"><span class=\"toc-text\"> This number should be at maxium the number of CPU on the server</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"给Vanilla框架的路由模块加入单体测试","uid":"2ae7e20708abb11b61241dea5050fc63","slug":"old_topic/2016-09-17-188","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.195Z","comments":true,"path":"api/articles/old_topic/2016-09-17-188.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"作者：糖果 下面是单体测试的代码： -- perf local error = error local sgmatch = string.gmatch -- init Simple and set routes local Simple = &#123;&#125; functi...","link":"","photos":[],"count_time":{"symbolsCount":871,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Openresty工程如何处理mime定义问题","uid":"bc3b37831d103f6bddad2d9961281834","slug":"old_topic/2016-09-17-191","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-14T07:45:09.179Z","comments":true,"path":"api/articles/old_topic/2016-09-17-191.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"Lapis处理mime问题，一共使用了两个文件。 mime.types types &#123; text&#x2F;html html htm shtml; text&#x2F;css css; text&#x2F;xml xml; image&#x2F;gif gif; im...","link":"","photos":[],"count_time":{"symbolsCount":"3.4k","symbolsTime":"3 mins."},"categories":[{"name":"topic","slug":"topic","count":1441,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}