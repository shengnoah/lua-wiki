{"title":"用Rbenv创建Ruby虚拟环境","uid":"7d228d73be79610e7c1c5cb3159d1260","slug":"zhihu/用Rbenv创建Ruby虚拟环境","date":"2024-03-14T07:45:09.143Z","updated":"2024-03-14T07:45:09.143Z","comments":true,"path":"api/articles/zhihu/用Rbenv创建Ruby虚拟环境.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","content":"<h1 id=\"用rbenv创建ruby虚拟环境\"><a class=\"markdownIt-Anchor\" href=\"#用rbenv创建ruby虚拟环境\"></a> 用Rbenv创建Ruby虚拟环境</h1>\n<blockquote>\n<h2 id=\"excerpt\"><a class=\"markdownIt-Anchor\" href=\"#excerpt\"></a> Excerpt</h2>\n<p>一些测试工具，很多都是Ruby实现的，这些工具可能会要求在不同的Ruby版本下才能兼容运行，所以用一个Ruby虚拟管理工具很必要，就像Python用的Conda， Rbenv就是这么一个工具。 我们在 <a href=\"http://Coding.net\">http://Coding.net</a> 的WEB IDE…</p>\n</blockquote>\n<hr />\n<p>一些测试工具，很多都是Ruby实现的，这些工具可能会要求在不同的Ruby版本下才能兼容运行，所以用一个Ruby虚拟管理工具很必要，就像Python用的Conda， Rbenv就是这么一个工具。</p>\n<p>我们在<a href=\"https://link.zhihu.com/?target=http%3A//Coding.net\">http://Coding.net</a> 的WEB IDE里创建一个Ruby测试工具环境， 用的是Web IDE的 All In One环境, 之前应该有Ruby环境支持， 经过<a href=\"https://link.zhihu.com/?target=http%3A//Coding.net\">http://Coding.net</a>的各种Web IDE迭代后不支持了，装一个就行了。Web IDE中自带的Ruby是3.x 版本，有些应用是运行不了的。</p>\n<p>如果是Mac系统安装比较简单，但是<a href=\"https://link.zhihu.com/?target=http%3A//Coding.net\">http://Coding.net</a> Web IDE是2H 4GB的Ubuntu用apt-get安装，因为是默认的ZSH，有些Bash Shell不太适合,比下下面这种。</p>\n<pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">$ echo 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' >> ~/.bashrc\n$ echo 'eval \"$(rbenv init -)\"' >> ~/.bashrc\n$ exec $SHELL<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>直接用apt-get安装。</p>\n<pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">apt-get update\napt-get install rbenv<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>这里要注意一点， 默认安装ruby-build是老版本的，造成很多新版本的ruby环境没法装，这个时候需要把ruby-build卸载了。</p>\n<pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">apt-get remove ruby-build<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>然后，用Git下载的方式安装。</p>\n<pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">git clone https://github.com/rbenv/ruby-build.git \"$(rbenv root)\"/plugins/ruby-build<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>这样，再查看ruby-build的版本就变成了较新的版本，可以到找到类似ruby 2.7的安装包。</p>\n<p><img src=\"https://pic3.zhimg.com/v2-2bfa7c328299afe0848e822b8304c10e_b.jpg\" alt=\"\" /></p>\n<p><img src=\"https://pic3.zhimg.com/80/v2-2bfa7c328299afe0848e822b8304c10e_720w.webp\" alt=\"\" /></p>\n<p><a href=\"http://install.sh\">install.sh</a></p>\n<p><a href=\"http://xn--install-nw3kg2eo37eba009k0h3dlhbm78l0ll76q.sh\">记录运行插件目录下的install.sh</a>，ruby-build才算安装成功。</p>\n<pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">ruby-build --version\nruby-build 20221225<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><img src=\"https://pic3.zhimg.com/v2-d9114b8cce920927d109b902a0350a66_b.jpg\" alt=\"\" /></p>\n<p><img src=\"https://pic3.zhimg.com/80/v2-d9114b8cce920927d109b902a0350a66_720w.webp\" alt=\"\" /></p>\n<p>Web IDE</p>\n<p>ruby-build安装成了，再安装各种版本的Ruby才好用。</p>\n<p><img src=\"https://pic3.zhimg.com/v2-a8eed8d925601437bb9ead8b6d56cdf6_b.jpg\" alt=\"\" /></p>\n<p><img src=\"https://pic3.zhimg.com/80/v2-a8eed8d925601437bb9ead8b6d56cdf6_720w.webp\" alt=\"\" /></p>\n<p>列出可安装的ruby环境</p>\n<p><img src=\"https://pic1.zhimg.com/v2-be33151791854ee693715de47bceee48_b.jpg\" alt=\"\" /></p>\n<p><img src=\"https://pic1.zhimg.com/80/v2-be33151791854ee693715de47bceee48_720w.webp\" alt=\"\" /></p>\n<p>definition</p>\n<p>查看所能支持的ruby安装版本</p>\n<pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">ruby-build --definition<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://pic4.zhimg.com/v2-261e67b14733572a27112f2bbd52979b_b.jpg\" alt=\"\" /></p>\n<p><img src=\"https://pic4.zhimg.com/80/v2-261e67b14733572a27112f2bbd52979b_720w.webp\" alt=\"\" /></p>\n<p>查看安装的子版本</p>\n<p>查看目前装了那些ruby子版本</p>\n<pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">rbenv versions<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://pic2.zhimg.com/v2-be556dfb3a00250636bff896b3293345_b.jpg\" alt=\"\" /></p>\n<p><img src=\"https://pic2.zhimg.com/80/v2-be556dfb3a00250636bff896b3293345_720w.webp\" alt=\"\" /></p>\n<p>恢复回默认版本</p>\n<p>安装指定版本的ruby比较快。</p>\n<pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">rbenv install 2.7.1<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>当然也可用另一种方式安装，但是因为ruby-build支持，没有必要(备用)，比如，如下方法。</p>\n<pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">wget -q https://cache.ruby-lang.org/pub/ruby/2.7/ruby-2.7.1.tar.bz2  -O ~/.rbenv/versions/ruby-2.7.1.tar.gz\nenv RUBY_BUILD_MIRROR_URL=file:///root/.rbenv/versions/ruby-2.7.1.tar.gz\nrbenv install 2.7.1<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>安装后，我切到新到 2.7.1版本。</p>\n<p><img src=\"https://pic2.zhimg.com/v2-8ab41fe52b1b49eb23569e83a6c479f9_b.jpg\" alt=\"\" /></p>\n<p><img src=\"https://pic2.zhimg.com/80/v2-8ab41fe52b1b49eb23569e83a6c479f9_720w.webp\" alt=\"\" /></p>\n<p>切换到指定版本</p>\n<pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">rbenv global 2.7.1\neval \"$(rbenv init -)\"<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>因为是Web IDE是Zsh，需要在~/.zprofile 如果shell用的是zsh, eval “$(rbenv init -)” 这句要放到 zprofile中。</p>\n<p><img src=\"https://pic4.zhimg.com/v2-9ebcb2d75de3b92f695daae212a8bb97_b.jpg\" alt=\"\" /></p>\n<p><img src=\"https://pic4.zhimg.com/80/v2-9ebcb2d75de3b92f695daae212a8bb97_720w.webp\" alt=\"\" /></p>\n<p>.zprofile</p>\n<p>如果用的是Bash就放到Bash的配置文件中，这样开新终端的时候，ruby就跳到虚拟环境中。</p>\n","text":" 用Rbenv创建Ruby虚拟环境 Excerpt 一些测试工具，很多都是Ruby实现的，这些工具可能会要求在不同的Ruby版本下才能兼容运行，所以用一个Ruby虚拟管理工具很必要，就像Python用的Conda， Rbenv就是这么一个工具。 我们在 http://Coding...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"文章","slug":"文章","count":22,"path":"api/categories/文章.json"}],"tags":[{"name":"Ruby","slug":"Ruby","count":5,"path":"api/tags/Ruby.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%94%A8rbenv%E5%88%9B%E5%BB%BAruby%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\"> 用Rbenv创建Ruby虚拟环境</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#excerpt\"><span class=\"toc-text\"> Excerpt</span></a></li></ol></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"PDF文件转换成Docx文件","uid":"3830ddd8671d10af2c2e8efa9d9df758","slug":"zhihu/PDF文件转换成Docx文件","date":"2024-03-14T07:45:09.143Z","updated":"2024-03-14T07:45:09.144Z","comments":true,"path":"api/articles/zhihu/PDF文件转换成Docx文件.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":"测试一下普通不带格式， PDF格式的文件，是否可以转换成Word的Docx文档。 本地做PDF到Docx转，在线版的工具有大小限制，本地版本的软件要充会员，所考虑使用一个不花钱的方案。 安装Libreoffice brew info libreoffice brew instal...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"文章","slug":"文章","count":22,"path":"api/categories/文章.json"}],"tags":[{"name":"linux","slug":"linux","count":4,"path":"api/tags/linux.json"},{"name":"libreoffice","slug":"libreoffice","count":1,"path":"api/tags/libreoffice.json"},{"name":"pdf","slug":"pdf","count":1,"path":"api/tags/pdf.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"TinyLlama","uid":"6f9969d6703cdfb337efc9fb77db60f7","slug":"ollama/TinyLlama","date":"2024-03-14T07:45:09.141Z","updated":"2024-03-14T07:45:09.142Z","comments":true,"path":"api/articles/ollama/TinyLlama.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" TinyLlama TinyLlama Mac下高速跑LLM TinyLlama ultra fast on M3 Max cores: 4E+12P+40GPU with Q4_0: 207 tokens/s Q5_K_M: 197 tokens/s FP16: 119 to...","link":"","photos":[],"count_time":{"symbolsCount":339,"symbolsTime":"1 mins."},"categories":[{"name":"AIGC","slug":"AIGC","count":117,"path":"api/categories/AIGC.json"},{"name":"ollama","slug":"AIGC/ollama","count":1,"path":"api/categories/AIGC/ollama.json"}],"tags":[{"name":"ollama","slug":"ollama","count":1,"path":"api/tags/ollama.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}