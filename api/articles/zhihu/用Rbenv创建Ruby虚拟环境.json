{"title":"用Rbenv创建Ruby虚拟环境","uid":"7d228d73be79610e7c1c5cb3159d1260","slug":"zhihu/用Rbenv创建Ruby虚拟环境","date":"2024-03-14T07:45:09.143Z","updated":"2024-03-14T07:45:09.143Z","comments":true,"path":"api/articles/zhihu/用Rbenv创建Ruby虚拟环境.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":[],"content":"<h1>用Rbenv创建Ruby虚拟环境</h1>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><h2 id=\"Excerpt\">Excerpt</h2>\n<p>一些测试工具，很多都是Ruby实现的，这些工具可能会要求在不同的Ruby版本下才能兼容运行，所以用一个Ruby虚拟管理工具很必要，就像Python用的Conda， Rbenv就是这么一个工具。 我们在 <a href=\"http://Coding.net\">http://Coding.net</a> 的WEB IDE…</p></blockquote>\n<hr>\n<p>一些测试工具，很多都是Ruby实现的，这些工具可能会要求在不同的Ruby版本下才能兼容运行，所以用一个Ruby虚拟管理工具很必要，就像Python用的Conda， Rbenv就是这么一个工具。</p>\n<p>我们在<a href=\"https://link.zhihu.com/?target=http%3A//Coding.net\">http://Coding.net</a> 的WEB IDE里创建一个Ruby测试工具环境， 用的是Web IDE的 All In One环境, 之前应该有Ruby环境支持， 经过<a href=\"https://link.zhihu.com/?target=http%3A//Coding.net\">http://Coding.net</a>的各种Web IDE迭代后不支持了，装一个就行了。Web IDE中自带的Ruby是3.x 版本，有些应用是运行不了的。</p>\n<p>如果是Mac系统安装比较简单，但是<a href=\"https://link.zhihu.com/?target=http%3A//Coding.net\">http://Coding.net</a> Web IDE是2H 4GB的Ubuntu用apt-get安装，因为是默认的ZSH，有些Bash Shell不太适合,比下下面这种。</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ echo &#x27;export PATH=&quot;$HOME/.rbenv/bin:$PATH&quot;&#x27; &gt;&gt; ~/.bashrc</span><br><span class=\"line\">$ echo &#x27;eval &quot;$(rbenv init -)&quot;&#x27; &gt;&gt; ~/.bashrc</span><br><span class=\"line\">$ exec $SHELL</span><br></pre></td></tr></table></figure>\n<p>直接用apt-get安装。</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get update</span><br><span class=\"line\">apt-get install rbenv</span><br></pre></td></tr></table></figure>\n<p>这里要注意一点， 默认安装ruby-build是老版本的，造成很多新版本的ruby环境没法装，这个时候需要把ruby-build卸载了。</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get remove ruby-build</span><br></pre></td></tr></table></figure>\n<p>然后，用Git下载的方式安装。</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/rbenv/ruby-build.git &quot;$(rbenv root)&quot;/plugins/ruby-build</span><br></pre></td></tr></table></figure>\n<p>这样，再查看ruby-build的版本就变成了较新的版本，可以到找到类似ruby 2.7的安装包。</p>\n<p><img src=\"https://pic3.zhimg.com/v2-2bfa7c328299afe0848e822b8304c10e_b.jpg\" alt=\"\"></p>\n<p><img src=\"https://pic3.zhimg.com/80/v2-2bfa7c328299afe0848e822b8304c10e_720w.webp\" alt=\"\"></p>\n<p><a href=\"http://install.sh\">install.sh</a></p>\n<p><a href=\"http://xn--install-nw3kg2eo37eba009k0h3dlhbm78l0ll76q.sh\">记录运行插件目录下的install.sh</a>，ruby-build才算安装成功。</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ruby-build --version</span><br><span class=\"line\">ruby-build 20221225</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://pic3.zhimg.com/v2-d9114b8cce920927d109b902a0350a66_b.jpg\" alt=\"\"></p>\n<p><img src=\"https://pic3.zhimg.com/80/v2-d9114b8cce920927d109b902a0350a66_720w.webp\" alt=\"\"></p>\n<p>Web IDE</p>\n<p>ruby-build安装成了，再安装各种版本的Ruby才好用。</p>\n<p><img src=\"https://pic3.zhimg.com/v2-a8eed8d925601437bb9ead8b6d56cdf6_b.jpg\" alt=\"\"></p>\n<p><img src=\"https://pic3.zhimg.com/80/v2-a8eed8d925601437bb9ead8b6d56cdf6_720w.webp\" alt=\"\"></p>\n<p>列出可安装的ruby环境</p>\n<p><img src=\"https://pic1.zhimg.com/v2-be33151791854ee693715de47bceee48_b.jpg\" alt=\"\"></p>\n<p><img src=\"https://pic1.zhimg.com/80/v2-be33151791854ee693715de47bceee48_720w.webp\" alt=\"\"></p>\n<p>definition</p>\n<p>查看所能支持的ruby安装版本</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ruby-build --definition</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://pic4.zhimg.com/v2-261e67b14733572a27112f2bbd52979b_b.jpg\" alt=\"\"></p>\n<p><img src=\"https://pic4.zhimg.com/80/v2-261e67b14733572a27112f2bbd52979b_720w.webp\" alt=\"\"></p>\n<p>查看安装的子版本</p>\n<p>查看目前装了那些ruby子版本</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rbenv versions</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://pic2.zhimg.com/v2-be556dfb3a00250636bff896b3293345_b.jpg\" alt=\"\"></p>\n<p><img src=\"https://pic2.zhimg.com/80/v2-be556dfb3a00250636bff896b3293345_720w.webp\" alt=\"\"></p>\n<p>恢复回默认版本</p>\n<p>安装指定版本的ruby比较快。</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rbenv install 2.7.1</span><br></pre></td></tr></table></figure>\n<p>当然也可用另一种方式安装，但是因为ruby-build支持，没有必要(备用)，比如，如下方法。</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -q https://cache.ruby-lang.org/pub/ruby/2.7/ruby-2.7.1.tar.bz2  -O ~/.rbenv/versions/ruby-2.7.1.tar.gz</span><br><span class=\"line\">env RUBY_BUILD_MIRROR_URL=file:///root/.rbenv/versions/ruby-2.7.1.tar.gz</span><br><span class=\"line\">rbenv install 2.7.1</span><br></pre></td></tr></table></figure>\n<p>安装后，我切到新到 2.7.1版本。</p>\n<p><img src=\"https://pic2.zhimg.com/v2-8ab41fe52b1b49eb23569e83a6c479f9_b.jpg\" alt=\"\"></p>\n<p><img src=\"https://pic2.zhimg.com/80/v2-8ab41fe52b1b49eb23569e83a6c479f9_720w.webp\" alt=\"\"></p>\n<p>切换到指定版本</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rbenv global 2.7.1</span><br><span class=\"line\">eval &quot;$(rbenv init -)&quot;</span><br></pre></td></tr></table></figure>\n<p>因为是Web IDE是Zsh，需要在~/.zprofile 如果shell用的是zsh, eval “$(rbenv init -)” 这句要放到 zprofile中。</p>\n<p><img src=\"https://pic4.zhimg.com/v2-9ebcb2d75de3b92f695daae212a8bb97_b.jpg\" alt=\"\"></p>\n<p><img src=\"https://pic4.zhimg.com/80/v2-9ebcb2d75de3b92f695daae212a8bb97_720w.webp\" alt=\"\"></p>\n<p>.zprofile</p>\n<p>如果用的是Bash就放到Bash的配置文件中，这样开新终端的时候，ruby就跳到虚拟环境中。</p>\n","text":"用Rbenv创建Ruby虚拟环境 Excerpt 一些测试工具，很多都是Ruby实现的，这些工具可能会要求在不同的Ruby版本下才能兼容运行，所以用一个Ruby虚拟管理工具很必要，就像Python用的Conda， Rbenv就是这么一个工具。 我们在 http://Coding....","link":"","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[{"name":"文章","slug":"文章","count":22,"path":"api/categories/文章.json"}],"tags":[{"name":"Ruby","slug":"Ruby","count":5,"path":"api/tags/Ruby.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\"><span class=\"toc-text\">用Rbenv创建Ruby虚拟环境</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Excerpt\"><span class=\"toc-text\">Excerpt</span></a></li></ol></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"OpenAI 的超级对话模型 ChatGPT 会导致程序员大规模失业吗？","uid":"d06a4cd12369811f5165d02977d7c5f7","slug":"zhihu/OpenAI 的超级对话模型 ChatGPT 会导致程序员大规模失业吗？","date":"2024-03-14T07:45:09.143Z","updated":"2024-03-14T07:45:09.143Z","comments":true,"path":"api/articles/zhihu/OpenAI 的超级对话模型 ChatGPT 会导致程序员大规模失业吗？.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":[],"text":"OpenAI 的超级对话模型 ChatGPT 会导致程序员大规模失业吗？ Excerpt VSCode的Open AI插件ChatGPT，直接用VSCode进行，找Bug、优化、单体测试等操作。能不能取代搜索引擎？当… VSCode的Open AI插件ChatGPT，直接用VSC...","link":"","photos":[],"count_time":{"symbolsCount":941,"symbolsTime":"1 mins."},"categories":[{"name":"文章","slug":"文章","count":22,"path":"api/categories/文章.json"}],"tags":[{"name":"互联网","slug":"互联网","count":1,"path":"api/tags/互联网.json"},{"name":"失业","slug":"失业","count":1,"path":"api/tags/失业.json"},{"name":"程序员求职","slug":"程序员求职","count":1,"path":"api/tags/程序员求职.json"},{"name":"OpenAI","slug":"OpenAI","count":1,"path":"api/tags/OpenAI.json"},{"name":"ChatGPT","slug":"ChatGPT","count":1,"path":"api/tags/ChatGPT.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"TinyLlama","uid":"6f9969d6703cdfb337efc9fb77db60f7","slug":"ollama/TinyLlama","date":"2024-03-14T07:45:09.141Z","updated":"2024-03-14T07:45:09.142Z","comments":true,"path":"api/articles/ollama/TinyLlama.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":[],"text":"TinyLlama TinyLlama Mac下高速跑LLM TinyLlama ultra fast on M3 Max cores: 4E+12P+40GPU with Q4_0: 207 tokens/s Q5_K_M: 197 tokens/s FP16: 119 tok...","link":"","photos":[],"count_time":{"symbolsCount":338,"symbolsTime":"1 mins."},"categories":[{"name":"AIGC","slug":"AIGC","count":119,"path":"api/categories/AIGC.json"},{"name":"ollama","slug":"AIGC/ollama","count":1,"path":"api/categories/AIGC/ollama.json"}],"tags":[{"name":"ollama","slug":"ollama","count":1,"path":"api/tags/ollama.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}