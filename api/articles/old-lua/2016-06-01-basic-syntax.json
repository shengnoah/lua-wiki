{"title":"Lua基本语法","uid":"9b97fd5c58ceb41de2e73474e4dfb1f8","slug":"old-lua/2016-06-01-basic-syntax","date":"2024-03-14T06:15:59.729Z","updated":"2024-03-14T06:15:59.729Z","comments":true,"path":"api/articles/old-lua/2016-06-01-basic-syntax.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"content":"<h1 id=\"基本语法\"><a href=\"#基本语法\" class=\"headerlink\" title=\"基本语法\"></a>基本语法</h1><p>Lua 学起来非常简单。现在，让我们开始创建我们的第一个 Lua 程序吧！  </p>\n<h2 id=\"第一个-Lua-程序\"><a href=\"#第一个-Lua-程序\" class=\"headerlink\" title=\"第一个 Lua 程序\"></a>第一个 Lua 程序</h2><p>Lua 提供交互式编程模式。在这个模式下，你可以一条一条地输入命令，然后立即就可以得到结果。你可以在 shell 中使用 lua -i 或者 lua 命令启动。输入命令后，按下回车键，就启动了交互模式，显示如下:</p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ lua -i </span><br><span class=\"line\">$ Lua <span class=\"number\">5.1</span><span class=\"number\">.4</span>  Copyright (C) <span class=\"number\">1994</span><span class=\"number\">-2008</span> Lua.org, PUC-Rio</span><br><span class=\"line\">quit to <span class=\"keyword\">end</span>; cd, dir <span class=\"keyword\">and</span> edit also available</span><br></pre></td></tr></table></figure>\n\n\n\n\n<p>你可以使用如下命令打印输出：  </p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&quot;test&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n\n<p>按下回车键后，你会得到如下输出结果：  </p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&#x27;test&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"默认模式编辑\"><a href=\"#默认模式编辑\" class=\"headerlink\" title=\"默认模式编辑\"></a>默认模式编辑</h2><p>使用 Lua 文件做为解释器的参数启动解释器,然后开始执行文件直到文件结束。当脚本执行结束后，解释器就不在活跃了。 </p>\n<p>让我们写一个简单的 Lua 程序。所有的 Lua　文件都扩展名都是<code>.lua</code>。因此，将下面的源代码放到 test.lua 文件中。  </p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;test&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>假如你已经设置好 Lua 程序的环境，用下面的命令运行程序：  </p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ lua test.lua</span><br></pre></td></tr></table></figure>\n\n<p>我们会得到如下的输出结果：  </p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test</span><br></pre></td></tr></table></figure>\n\n<p>让我们尝试使用另外的方式运行 Lua 程序。下面是修改后的 test.lua 文件：  </p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!/usr/<span class=\"keyword\">local</span>/bin/lua</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;test&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>这里，我们假设你的 Lua 解释器程序在 /usr/local/bin/lua 目录下。test.lua 文件中第一行由于以 # 开始而被解释器忽略，运行这个程序可以得到如下的结果：  </p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ chmod a+rx test.lua</span><br><span class=\"line\">$./test.lua</span><br></pre></td></tr></table></figure>\n\n<p>我们会得到如下的的输出结果：  </p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test</span><br></pre></td></tr></table></figure>\n\n<p>接下来让我们看一下 Lua 程序的基本结构。这样，你可以更容易理解 Lua 编程语言的基本结构单元。  </p>\n<h2 id=\"Lua-中的符号\"><a href=\"#Lua-中的符号\" class=\"headerlink\" title=\"Lua 中的符号\"></a>Lua 中的符号</h2><p>Lua 程序是由大量的符号组成的。这些符号可以分为关键字、标识符、常量、字符串常量几类。例如，下面的 Lua 语句中包含三个符号：  </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">io.write(&quot;Hello world, from &quot;,_VERSION,&quot;!\\n&quot;)</span><br></pre></td></tr></table></figure>\n\n<p>这三个符号分别是:  </p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">io</span>.<span class=\"built_in\">write</span></span><br><span class=\"line\">(</span><br><span class=\"line\"><span class=\"string\">&quot;Hello world, from &quot;</span>,<span class=\"built_in\">_VERSION</span>,<span class=\"string\">&quot;!\\n&quot;</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"注释\"><a href=\"#注释\" class=\"headerlink\" title=\"注释\"></a>注释</h3><p>注释就是 Lua 程序中的帮助文档，Lua 解释器会自动忽略它们。所有注释都以 –[[ 开始，并以 –]]结束。如下所示：  </p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">--[[ my first program in Lua --]]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"标识符\"><a href=\"#标识符\" class=\"headerlink\" title=\"标识符\"></a>标识符</h3><p>Lua 中标识符是识别变量、函数或者其它用户自定义项的名字。标符识总是以字母或者下划线开始，其后可以是零个或多个字母、下划线或数字。<br>Lua 标识符中不允许出现任何标点符号，比如，@，$ 或者 %。Lua 是大小写敏感的语言，因此 Manpower 和 manpower 是 Lua 中两个不同的标识符。下面所列的是一些合法标识符的例子。  </p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mohd         zara      abc     move_name    a_123</span><br><span class=\"line\">myname50     _temp     j       a23b9        retVal</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"关键字\"><a href=\"#关键字\" class=\"headerlink\" title=\"关键字\"></a>关键字</h3><p>下面列表中所示的是 Lua 中一小部分保留字。这些保留字不能用作常量、变量以及任何标识符的名字。  </p>\n<table>\n    <tr>\n    <td>and</td>\n    <td>break</td>\n    <td>do</td>\n    <td>else</td>\n    </tr>\n    <tr>\n    <td>elseif</td>\n    <td>end</td>\n    <td>false</td>\n    <td>for</td>\n    </tr>\n    <tr>\n    <td>function</td>\n    <td>if</td>\n    <td>in</td>\n    <td>local</td>\n    </tr>\n    <tr>\n    <td>nil</td>\n    <td>not</td>\n    <td>or</td>\n    <td>repeat</td>\n    </tr>\n    <tr>\n    <td>return</td>\n    <td>then</td>\n    <td>true</td>\n    <td>until</td>\n    </tr>\n    <tr>\n    <td>while</td>\n    <td></td>\n    <td></td>\n    <td></td>\n    </tr>\n</table>\n\n<h3 id=\"Lua-中的空白符\"><a href=\"#Lua-中的空白符\" class=\"headerlink\" title=\"Lua 中的空白符\"></a>Lua 中的空白符</h3><p>如果 Lua 程序中某一行只包含空格或者注释，那么这样的一行被称之为空行。 Lua 解释器将完全忽略这一行。<br>在 Lua 中，空白是用来描述空格、制表符、换行符和注释的术语。空白符用于将语句中的一部分与其它部分区分开，使得解释器可以语句中的一个元素，比如 int，何处结束，以及另一个元素从何处开始。因此，在下面的语句中：  </p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">local</span> age</span><br></pre></td></tr></table></figure>\n\n<p>在 local 与 age 之间至少有一个空白符（通常是空格）,这个空白符使得解释器可以将 local 与 age 区分开。另一方面，在下面的语句中：  </p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fruit = apples + oranges   <span class=\"comment\">--get the total fruit</span></span><br></pre></td></tr></table></figure>\n\n<p>fruit 与 = 之间以及 = 与 apples 之间的空白符都是可以没有的。但是为了程序的可读性目的，建议你在它们之间使用空白符。</p>\n","text":"基本语法Lua 学起来非常简单。现在，让我们开始创建我们的第一个 Lua 程序吧！ 第一个 Lua 程序Lua 提供交互式编程模式。在这个模式下，你可以一条一条地输入命令，然后立即就可以得到结果。你可以在 shell 中使用 lua -i 或者 lua 命令启动。输入命令后，按下...","link":"","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"lua_guide","slug":"lua-guide","count":68,"path":"api/categories/lua-guide.json"}],"tags":[{"name":"lua","slug":"lua","count":153,"path":"api/tags/lua.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95\"><span class=\"toc-text\">基本语法</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%80%E4%B8%AA-Lua-%E7%A8%8B%E5%BA%8F\"><span class=\"toc-text\">第一个 Lua 程序</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%BB%98%E8%AE%A4%E6%A8%A1%E5%BC%8F%E7%BC%96%E8%BE%91\"><span class=\"toc-text\">默认模式编辑</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Lua-%E4%B8%AD%E7%9A%84%E7%AC%A6%E5%8F%B7\"><span class=\"toc-text\">Lua 中的符号</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B3%A8%E9%87%8A\"><span class=\"toc-text\">注释</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A0%87%E8%AF%86%E7%AC%A6\"><span class=\"toc-text\">标识符</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%94%AE%E5%AD%97\"><span class=\"toc-text\">关键字</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Lua-%E4%B8%AD%E7%9A%84%E7%A9%BA%E7%99%BD%E7%AC%A6\"><span class=\"toc-text\">Lua 中的空白符</span></a></li></ol></li></ol></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"数组","uid":"e16187d7a3c490f96b788338bdd79d24","slug":"old-lua/2016-06-01-arrays","date":"2024-03-14T06:15:59.729Z","updated":"2024-03-14T06:15:59.729Z","comments":true,"path":"api/articles/old-lua/2016-06-01-arrays.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"Lua 数组数组是一组有序的对象排列，既可以是一维的也可以是多维的。 在 Lua 语言中，数组是用整数索引表实现的。数组的大小并不固定，随着数组元素的增加，它可以动态地增加内存空间大小。 一维数组一维数组可以使用一个简单的表结构表示。可以通过一个简单循环初始化数组或者读取数组中数...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"Lua","slug":"Lua","count":3,"path":"api/categories/Lua.json"},{"name":"Arrays","slug":"Lua/Arrays","count":1,"path":"api/categories/Lua/Arrays.json"}],"tags":[{"name":"Arrays","slug":"Arrays","count":1,"path":"api/tags/Arrays.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Break语句","uid":"1e07952645adeb0063307933aff99e35","slug":"old-lua/2016-06-01-break","date":"2024-03-14T06:15:59.729Z","updated":"2024-03-14T06:15:59.729Z","comments":true,"path":"api/articles/old-lua/2016-06-01-break.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"break 语句程序在解释执行过程中，在循环内遇到 break 语句时，循环将立即结束。程序将循环语句的下一条语句开始执行。如果你是在嵌套循环（即，一个循环内还有一个循环语句）内使用 break 语句，break 只结束内层循环，并从该代码块后的第一条语句处开始执行。 语法bre...","link":"","photos":[],"count_time":{"symbolsCount":566,"symbolsTime":"1 mins."},"categories":[{"name":"lua_guide","slug":"lua-guide","count":68,"path":"api/categories/lua-guide.json"}],"tags":[{"name":"lua","slug":"lua","count":153,"path":"api/tags/lua.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}