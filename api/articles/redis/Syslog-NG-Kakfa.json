{"title":"Syslog-NG-Kakfa","uid":"bcb7c4b98ca2fe3fe924416317ff59aa","slug":"redis/Syslog-NG-Kakfa","date":"2024-03-14T07:45:09.046Z","updated":"2024-03-14T07:45:09.046Z","comments":true,"path":"api/articles/redis/Syslog-NG-Kakfa.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://s2.loli.net/2024/02/07/Li7MZXHjcuvCSO4.png","content":"<h1 id=\"syslog-ng-kakfa\"><a class=\"markdownIt-Anchor\" href=\"#syslog-ng-kakfa\"></a> Syslog-NG-Kakfa</h1>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">destination d_kafka <span class=\"token punctuation\">&#123;</span>\n\nchannel <span class=\"token punctuation\">&#123;</span>\n\nrewrite <span class=\"token punctuation\">&#123;</span>\n\nset<span class=\"token punctuation\">(</span><span class=\"token string\">\"<span class=\"token variable\">$&#123;HOST&#125;</span>\"</span> value<span class=\"token punctuation\">(</span><span class=\"token string\">\".eventv1.host\"</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n\nset<span class=\"token punctuation\">(</span><span class=\"token string\">\"1\"</span> value<span class=\"token punctuation\">(</span><span class=\"token string\">\".eventv1.@version\"</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n\nset<span class=\"token punctuation\">(</span><span class=\"token string\">\"<span class=\"token variable\">$&#123;ISODATE&#125;</span>\"</span> value<span class=\"token punctuation\">(</span><span class=\"token string\">\".eventv1.@timestamp\"</span><span class=\"token punctuation\">)</span> condition<span class=\"token punctuation\">(</span><span class=\"token string\">\"<span class=\"token variable\">$&#123;.eventv1.@timestamp&#125;</span>\"</span> eq <span class=\"token string\">\"\"</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n\nset<span class=\"token punctuation\">(</span><span class=\"token string\">\"<span class=\"token variable\">$&#123;MESSAGE&#125;</span>\"</span> value<span class=\"token punctuation\">(</span><span class=\"token string\">\".eventv1.message\"</span><span class=\"token punctuation\">)</span> condition<span class=\"token punctuation\">(</span><span class=\"token string\">\"<span class=\"token variable\">$&#123;.eventv1.message&#125;</span>\"</span> eq <span class=\"token string\">\"\"</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n\nset<span class=\"token punctuation\">(</span><span class=\"token string\">\"<span class=\"token variable\">$&#123;MSG&#125;</span>\"</span> value<span class=\"token punctuation\">(</span><span class=\"token string\">\".eventv1.message\"</span><span class=\"token punctuation\">)</span> condition<span class=\"token punctuation\">(</span><span class=\"token string\">\"<span class=\"token variable\">$&#123;.eventv1.message&#125;</span>\"</span> eq <span class=\"token string\">\"\"</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n\nset<span class=\"token punctuation\">(</span><span class=\"token string\">\"generic\"</span> value<span class=\"token punctuation\">(</span><span class=\"token string\">\".eventv1.type\"</span><span class=\"token punctuation\">)</span> condition<span class=\"token punctuation\">(</span><span class=\"token string\">\"<span class=\"token variable\">$&#123;.eventv1.type&#125;</span>\"</span> eq <span class=\"token string\">\"\"</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\ndestination <span class=\"token punctuation\">&#123;</span>\n\nkafka-c<span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">(</span>metadata.broker.list<span class=\"token punctuation\">(</span><span class=\"token string\">\"localhost:9092\"</span><span class=\"token punctuation\">)</span>\n\nqueue.buffering.max.ms<span class=\"token punctuation\">(</span><span class=\"token string\">\"1000\"</span><span class=\"token punctuation\">))</span>\n\ntopic<span class=\"token punctuation\">(</span><span class=\"token string\">\"test\"</span><span class=\"token punctuation\">)</span>\n\nmessage<span class=\"token punctuation\">(</span><span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span>format-json <span class=\"token parameter variable\">--key</span> .eventv1.* <span class=\"token parameter variable\">--rekey</span> .eventv1.* <span class=\"token parameter variable\">--shift</span> <span class=\"token number\">9</span><span class=\"token variable\">)</span></span>\"</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","text":" Syslog-NG-Kakfa destination d_kafka &#123; channel &#123; rewrite &#123; set(\"$&#123;HOST&#125;\" value(\".eventv1.host\")); set(\"1\" value(\".e...","link":"","photos":[],"count_time":{"symbolsCount":803,"symbolsTime":"1 mins."},"categories":[{"name":"AIGC","slug":"AIGC","count":117,"path":"api/categories/AIGC.json"},{"name":"weibo","slug":"AIGC/weibo","count":59,"path":"api/categories/AIGC/weibo.json"}],"tags":[{"name":"weibo","slug":"weibo","count":62,"path":"api/tags/weibo.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#syslog-ng-kakfa\"><span class=\"toc-text\"> Syslog-NG-Kakfa</span></a></li></ol>","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Redis调用Lua代码测试","uid":"88a39baca0bf4d65eac517bd912a0a45","slug":"redis/Redis调用Lua代码测试","date":"2024-03-14T07:45:09.046Z","updated":"2024-03-14T07:45:09.046Z","comments":true,"path":"api/articles/redis/Redis调用Lua代码测试.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" Redis调用Lua代码测试 写一段用Redis执行Lua代码的例子 以下是一个使用Redis执行Lua代码的示例： import redis # 连接到Redis服务器 r &#x3D; redis.Redis(host&#x3D;&#39;localhost&#39;, p...","link":"","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[{"name":"Lua","slug":"Lua","count":2,"path":"api/categories/Lua.json"},{"name":"Redis","slug":"Lua/Redis","count":1,"path":"api/categories/Lua/Redis.json"}],"tags":[{"name":"Redis","slug":"Redis","count":1,"path":"api/tags/Redis.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"启动 Redis服务","uid":"869a6190793366537b039507409bd457","slug":"redis/启动 Redis服务","date":"2024-03-14T07:45:09.046Z","updated":"2024-03-14T07:45:09.046Z","comments":true,"path":"api/articles/redis/启动 Redis服务.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":"https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg","text":" 启动 Redis服务 如何从Linux命令执行Redis-Server 要从Linux命令行执行Redis服务器，可以按照以下步骤： 首先，确保已经安装了Redis服务器。如果没有安装，请使用适合您的Linux发行版的包管理器来安装它。例如，在Ubuntu上，可以使用以下命令进...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"AIGC","slug":"AIGC","count":117,"path":"api/categories/AIGC.json"},{"name":"weibo","slug":"AIGC/weibo","count":59,"path":"api/categories/AIGC/weibo.json"}],"tags":[{"name":"weibo","slug":"weibo","count":62,"path":"api/tags/weibo.json"}],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}