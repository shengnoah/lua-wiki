<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>在Heroku云上部署Lua应用 | 糖果AIGC实验室-LUA</title><meta name="author" content="糖果AIGC实验室 备案:辽ICP备16003836号-5"><meta name="copyright" content="糖果AIGC实验室 备案:辽ICP备16003836号-5"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="在Heroku云上部署Lua应用">
<meta property="og:type" content="article">
<meta property="og:title" content="在Heroku云上部署Lua应用">
<meta property="og:url" content="https://secbooks.cn/topic/223/index.html">
<meta property="og:site_name" content="糖果AIGC实验室-LUA">
<meta property="og:description" content="在Heroku云上部署Lua应用">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg">
<meta property="article:published_time" content="2016-09-17T14:50:18.000Z">
<meta property="article:modified_time" content="2024-03-14T07:45:09.208Z">
<meta property="article:author" content="糖果AIGC实验室 备案:辽ICP备16003836号-5">
<meta property="article:tag" content="AIGC,LLM,糖果AIGC实验室">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://secbooks.cn/topic/223/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?14cc93bf3f08d31c458639d309dde522";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();



</script><script>(function () {
  var meta = document.createElement('meta');
  meta.content = 'no-referrer';
  meta.name = 'referrer';
  document.getElementsByTagName('head')[0].appendChild(meta);
})();</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"OCGZTJTHCQ","apiKey":"4dede33603574dcaed0e9d4641849158","indexName":"jianpan.vip","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '在Heroku云上部署Lua应用',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-14 15:45:09'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">632</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">188</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">95</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清單</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="糖果AIGC实验室-LUA"><span class="site-name">糖果AIGC实验室-LUA</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清單</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">在Heroku云上部署Lua应用</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2016-09-17T14:50:18.000Z" title="发表于 2016-09-17 22:50:18">2016-09-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-03-14T07:45:09.208Z" title="更新于 2024-03-14 15:45:09">2024-03-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/topic/">topic</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="在Heroku云上部署Lua应用"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><p>在Heroku云上部署Lua应用</p>
<p>Running Lua on Heroku</p>
<p>Posted February 05, 2012 by leafo (@moonscript)</p>
<blockquote>Since the release of Heroku’s Cedar platform they've opened up the opportunity for users to run web applications on any stack. Using something called a buildpack we can describe a template for deploying any kind of application. I saw this as a great opportunity to try using Lua on a cloud hosting platform (for free).</blockquote> 
<p>因为Heroku发布的Cedar平台，开放了为用户运行任意web应用的栈技术支持，buildpack使我们可以用模板来描述任意类型的应用部署，关键的是这东西,在云上运行lua还免费。</p>
<blockquote>I put together heroku-buildpack-lua, a buildpack containing Lua 5.1 andLuaRocks (a Lua package manager) enable you to quickly deploy Lua along with any required dependencies that can be found on theLuaRocks server.</blockquote> 
<p>我做了一个heroku-buidlparck-lua的构建包，包里有lua 5.1和luarocks（LUA包管理器），充许你快速的部署一个lua程序，并且任何相关的依赖，都可以在LuaRocsks服务器上找到。</p>
<blockquote>Here’s a tutorial on getting a very simple app running:</blockquote> 
下面的是运行一个简单app的教程。
<p>Feb 12 2012 — I’ve updated the buildpack and this post to simplify the process.</p>
<blockquote> 
1.Creating An App
2.Describing Dependencies
3.Creating A Web Server
4.Deploying The Web Server
5.What’s Next?
</blockquote> 
<p>1.创建APP<br />
2.描述依赖<br />
3.创建一个WEB服务器<br />
4.部署WEB服务器<br />
5.后续</p>
<h3>1.创建APP</h3> 
Creating An App
<blockquote>Assuming you've installed heroku we start by creating a new app:</blockquote> 
<p>假设你已经安装了heroku,我们就开始创建一个应用。</p>
<pre class="line-numbers language-none"><code class="language-none">$ heroku create --stack cedar --buildpack 
http:&#x2F;&#x2F;github.com&#x2F;leafo&#x2F;heroku-buildpack-lua.git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<blockquote>Clone the repository it created and we're ready to begin. (stark-dust-4830 was the randomly generated name of my app, replace it with yours.)</blockquote> 
<p>克隆分支，创建后我们开始读取。(stark-dust-4830是一个随机生成app名称)</p>
<pre class="line-numbers language-none"><code class="language-none">$ git clone git@heroku.com:stark-dusk-4830.git
$cd stark-dust-4830<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3>2.描述依赖</h3> 
Describing Dependencies
<blockquote>Heroku manages a collection of app servers for us, called web dynos in their terminology. Each application server must expose itself to the outside world. This is done by running a web server on the dyno.</blockquote>  
<p>Heroku为我们管理服务器上的应用集合， 术语叫做web dynos，每个应用服务必须对外界暴露自己，这是运行在dyno上的WEB服务。</p>
<blockquote>The Xavante project is simple web server written in Lua with a couple dependencies.</blockquote> 
Xavate project是一个简单的用lua弄的web服务，两依赖。
<blockquote>Using LuaRocks bundled in the Lua buildpack, we can easily install Xavante and all its dependencies. We describe the dependencies of our Lua project by creating a rockspec for it.</blockquote> 
<p>LuaRocks被绑定在lua级的buidlpack中， 我们可以很容易的安装Xavante和所有她的依赖， 我们创建一个rockkspec的文件来描述我们lua工程的依赖。</p>
<blockquote>A rockspec is a special Lua file ending in .rockspec that describes meta-data about a Lua module. This meta-data includes things like the project name, the maintainer. It also holds any dependencies and how to build the module.</blockquote> 
<p>rockspeck是一个特殊的扩名是.rockspec的lua文件，描述关于lua模块的头信息，这个头信息包括了像项目名、维护者，甚至任何的关于如何创建模块的所需的依赖信息。</p>
<blockquote>The Lua buildpack understands the rockspec format, but only looks at the dependencies. Thus, for simplicity we'll only define the dependencies.
Go ahead and create app.rockspec and place inside of it:</blockquote> 
<p>Lua的构建包知道rockspec的格式，但是只能是依赖，我们的只能定义依赖，以下是之前创建的app.rockspec的内容。</p>
<pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- app.rockspec</span>
dependencies <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token string">"xavante"</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>Xavante will be our only dependency. We're going to keep this tutorial short and leave out the web frameworks. Xavante’s API is flexible enough that it functions as a makeshift framework.</blockquote> 
<p>Xavante 是我们唯一的依赖，我们这教程不使用lua web框架。Xavante的API很灵活，是够应付一般函数的简易框架。</p>
<blockquote>If you commit and push, you'll see the buildpack fetch and build all the dependencies. There will be a lot of output, don’t be be concerned.</blockquote> 
<p>如果你提交了代码，会看到build会取得重建所有的依赖，会有很多的输出，可无视。</p>
<pre class="line-numbers language-none"><code class="language-none">$ git add app.rockspec
$ git commit -m &quot;init&quot;$ git push origin master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>…</p>
<p>-----&gt; Heroku receiving push<br />
-----&gt; Fetching custom buildpack… done<br />
-----&gt; Lua app detected<br />
-----&gt; Copying lua to bin<br />
-----&gt; Installing packages<br />
Installing <a target="_blank" rel="noopener" href="http://www.luarocks.org/repositories/rocks/xavante-2.2.1-1.all.rock">http://www.luarocks.org/repositories/rocks/xavante-2.2.1-1.all.rock</a>…</p>
<p>… output truncated …</p>
<p>-----&gt; Discovering process types<br />
Procfile declares types -&gt; (none)<br />
-----&gt; Compiled slug size is 292K<br />
-----&gt; Launching… done, v5<br />
<a target="_blank" rel="noopener" href="http://stark-dusk-4830.herokuapp.com">http://stark-dusk-4830.herokuapp.com</a> deployed to</p>
<blockquote>Heroku</blockquote> 
<blockquote>Our dependencies work, but we still haven’t set up a web server. This we'll do by writing some Lua.</blockquote> 
<p>依赖配置好了，但还需要配置web服务器，那我们就用lua写点啥。</p>
<h3>3.创建WEB服务</h3> 
Creating A Web Server
<blockquote>We'll use Xavante’s programmatic API to create and run our server through a simple Lua script
<p>Create a file, web.lua, and place in it:</p>
</blockquote> 
<p>我们用Xavnate的可编程API来创建和运行我们的简单的lua脚本。<br />
创建一个web.lua文件。</p>
<pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- web.lua</span>
require<span class="token string">"xavante"</span>
require<span class="token string">"xavante.filehandler"</span>

port <span class="token operator">=</span><span class="token punctuation">...</span>

xavante<span class="token punctuation">.</span><span class="token function">HTTP</span> <span class="token punctuation">&#123;</span>
  server <span class="token operator">=</span> <span class="token punctuation">&#123;</span> host <span class="token operator">=</span><span class="token string">"*"</span><span class="token punctuation">,</span> port <span class="token operator">=</span><span class="token function">tonumber</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  defaultHost <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    rules <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
      <span class="token punctuation">&#123;</span>
        match <span class="token operator">=</span><span class="token string">"/$"</span><span class="token punctuation">,</span>
        with <span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span>
          res<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">"Content-type"</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token string">"text/html"</span>
          res<span class="token punctuation">.</span>content <span class="token operator">=</span><span class="token string">"hello world, the time is: "</span><span class="token operator">..</span>os<span class="token punctuation">.</span><span class="token function">date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token keyword">return</span> res
        <span class="token keyword">end</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
        match <span class="token operator">=</span><span class="token string">"."</span><span class="token punctuation">,</span>
        with <span class="token operator">=</span> xavante<span class="token punctuation">.</span>filehandler<span class="token punctuation">,</span>
        params <span class="token operator">=</span> <span class="token punctuation">&#123;</span> baseDir <span class="token operator">=</span><span class="token string">"static/"</span> <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

xavante<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>In this file we create a web server with two simple rules. If you go to the path / then we say hello and show the time. Otherwise, we default to trying to serve files from the static/ directory in our app.</blockquote> 
<p>在这个文件，我们创建一个web服务和两个简单的规则。当你访问路径’/'时，<br />
会显示 'say hello’的字样，并且显示时间信息，另外静态文件是放在当前app的static目录 。</p>
<blockquote>Go ahead and create the static/ directory now, and put something inside of it like a favicon or a html file.</blockquote> 
<p>继续，创建的 static目录 ，现在就可以把放一些图标和html文件放到里面。</p>
<blockquote>If you have Xavante installed locally, we can test the app. (where 5000 is a port to bind to)</blockquote> 
<p>如果Xavante被安装在本地，我们测下APP。（绑定的端口是5000）</p>
<pre class="line-numbers language-none"><code class="language-none">$ lua web.lua 5000
Xavante started on port(s) 5000<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<blockquote>If not, go on to the next step.</blockquote> 
如果不是，进入下一步。
<h3>4.部署 Web Server</h3> 
Deploying The Web Server
<blockquote>Now that all the required code is written, the only thing left to do is to tell Heroku how to start it.</blockquote> 
<p>现在所有的代码都写了，接下来唯一要做的是告诉Heroku如何开始。</p>
<blockquote>Heroku uses something called a Procfile to list the commands needed to start things like web severs and workers. We only need a single web server.</blockquote> 
Heroku使用了一个叫Procfile的文件，列出了web server要执行的命令任务，我们只需要一个单独的web 服务。
<blockquote>Create a file called Procfile and place inside of it:</blockquote> 
创建一个procfile文件。
<pre class="line-numbers language-none"><code class="language-none">web: lua web.lua $PORT<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>Now we're ready to deploy. Commit and push once again.</blockquote> 
开始部署，再一次上传代码。
<pre class="line-numbers language-none"><code class="language-none">$ git commit -a -m &quot;...&quot;$ git push origin master<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>We can check and see if our app is running by typing into the console:</blockquote> 
使用命令行检查我们正在运行的app。
<pre class="line-numbers language-none"><code class="language-none">$ heroku ps<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>You'll probably see nothing running! It’s because we deployed before without a Procfile. Tell Heroku to start up our web server:</blockquote> 
<p>你也看到了，什么都没运行！ 因为之前的部署没有Procfile文件，来告诉Heroku是如何启动web服务的。</p>
<pre class="line-numbers language-none"><code class="language-none">$ heroku scale web&#x3D;1
Scaling web processes... done, now running 1

$ heroku ps
Process  State       Command                
-------  ----------  ---------------------  
web.1    up for 16s  bin&#x2F;lua web.lua $PORT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>If you still see nothing running you'll have to debug. Run heroku logs to see if anything failed.</blockquote> 
如果你还是看到什么也没运行，执行一下heroku logs，看一下有什么错误发生。
<blockquote>Now our web server is running, navigate to the url of the app to see it live.
Don’t forget to try out some of the static files you included.</blockquote> 
<p>此刻我们的Web服务在运行了，跳到的Url 证明app在运行中，别忘了测试一下static目录下的文件。</p>
<h3>5.后续</h3> 
What’s Next?
<blockquote>What we've created here is fairly primitive. There are a lot of opportunities for expanding:</blockquote> 
<p>这篇比较糙，后续还有很多可以展开的题目 。</p>
<blockquote>
Use a Lua web framework like Orbit
Talk to a SQL database with LuaSQL
Talk to Redis with redis-lua
Talk to CouchDB with luachia
Make a website in MoonScript
</blockquote> 
<p>使用Orbit 这种Lua WEB框架。<br />
探讨SQL数据库和LuaSQL<br />
探讨Redis和redis-lua<br />
探讨CouchDB和luachia<br />
使用Moonscript创建站点。</p>
<blockquote>It’s also worth reading the the Lua buildpack’s README because it explains how and where Lua and it’s packages are installed.</blockquote> 
<p>更多有价值的信息可以看buildpack里面的README文件， 里面解释了lua和对应包是如何被安装的。</p>
<p><a target="_blank" rel="noopener" href="http://leafo.net">leafo.net</a> 2015 · Generated Fri Apr 8 14:00:07 2016 by Sitegen</p>
<p>翻译：糖果</p>
<p><a href="http://lua.ren/topic/223/%E5%9C%A8heroku%E5%9C%A8%E8%BF%90%E8%A1%8Clua" target="_blank">Lua On Heroku</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://secbooks.cn">糖果AIGC实验室 备案:辽ICP备16003836号-5</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://secbooks.cn/topic/223/">https://secbooks.cn/topic/223/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="null" target="_blank">null</a> 许可协议。转载请注明来自 <a href="https://secbooks.cn" target="_blank">糖果AIGC实验室-LUA</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/topic/222/" title="vim 可视化模式（visual模式）"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">vim 可视化模式（visual模式）</div></div></a></div><div class="next-post pull-right"><a href="/topic/224/" title="Lapis的数据库查询分页功能"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Lapis的数据库查询分页功能</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">糖果AIGC实验室 备案:辽ICP备16003836号-5</div><div class="author-info__description">AIGC</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">632</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">188</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">95</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">公众号：糖果的实验室 <img src="https://gitee.com/shengnoah/picture/raw/master/20231027182204.png"></img></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">1.创建APP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">2.描述依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">3.创建WEB服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">4.部署 Web Server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">5.</span> <span class="toc-text">5.后续</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/database/mongodb/%E5%A4%87%E4%BB%BD%E6%95%B4%E4%B8%AAMongoDB%E6%95%B0%E6%8D%AE%E5%BA%93/" title="备份整个MongoDB数据库"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="备份整个MongoDB数据库"/></a><div class="content"><a class="title" href="/database/mongodb/%E5%A4%87%E4%BB%BD%E6%95%B4%E4%B8%AAMongoDB%E6%95%B0%E6%8D%AE%E5%BA%93/" title="备份整个MongoDB数据库">备份整个MongoDB数据库</a><time datetime="2024-03-19T08:50:19.744Z" title="发表于 2024-03-19 16:50:19">2024-03-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/linux/netstat%20%E5%91%BD%E4%BB%A4/" title="netstat 命令"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="netstat 命令"/></a><div class="content"><a class="title" href="/linux/netstat%20%E5%91%BD%E4%BB%A4/" title="netstat 命令">netstat 命令</a><time datetime="2024-03-19T07:36:46.509Z" title="发表于 2024-03-19 15:36:46">2024-03-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/sec/SORA/%E5%88%A9%E7%94%A8n8n%E9%9B%86%E6%88%90Langchain%E4%B8%8D%E5%86%99%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E5%AE%8C%E6%88%90%E5%AF%B9%E7%BA%BF%E4%B8%8A%E8%AE%BA%E6%96%87%E7%9A%84%E6%80%BB%E7%BB%93/" title="利用n8n集成Langchain不写一行代码完成对线上论文的总结"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="利用n8n集成Langchain不写一行代码完成对线上论文的总结"/></a><div class="content"><a class="title" href="/sec/SORA/%E5%88%A9%E7%94%A8n8n%E9%9B%86%E6%88%90Langchain%E4%B8%8D%E5%86%99%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E5%AE%8C%E6%88%90%E5%AF%B9%E7%BA%BF%E4%B8%8A%E8%AE%BA%E6%96%87%E7%9A%84%E6%80%BB%E7%BB%93/" title="利用n8n集成Langchain不写一行代码完成对线上论文的总结">利用n8n集成Langchain不写一行代码完成对线上论文的总结</a><time datetime="2024-03-18T10:55:35.743Z" title="发表于 2024-03-18 18:55:35">2024-03-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/sec/TheHive/%E7%94%A8TheHive%E5%AE%9E%E7%8E%B0SOAR/" title="用TheHive实现SOAR"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="用TheHive实现SOAR"/></a><div class="content"><a class="title" href="/sec/TheHive/%E7%94%A8TheHive%E5%AE%9E%E7%8E%B0SOAR/" title="用TheHive实现SOAR">用TheHive实现SOAR</a><time datetime="2024-03-18T03:38:03.761Z" title="发表于 2024-03-18 11:38:03">2024-03-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/lua_guide/io/" title="Lua文件I/O"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Lua文件I/O"/></a><div class="content"><a class="title" href="/lua_guide/io/" title="Lua文件I/O">Lua文件I/O</a><time datetime="2024-03-18T03:38:03.760Z" title="发表于 2024-03-18 11:38:03">2024-03-18</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 糖果AIGC实验室 备案:辽ICP备16003836号-5</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><script>(function () {
  var meta = document.createElement('meta');
  meta.content = 'no-referrer';
  meta.name = 'referrer';
  document.getElementsByTagName('head')[0].appendChild(meta);
})();</script></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script></div></body></html>